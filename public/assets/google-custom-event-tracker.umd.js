(function(c,d){typeof exports=="object"&&typeof module<"u"?d(exports):typeof define=="function"&&define.amd?define(["exports"],d):(c=typeof globalThis<"u"?globalThis:c||self,d(c.GoogleCustomEventTracker={}))})(this,function(c){"use strict";var d=typeof document<"u"?document.currentScript:null;function v(o,e){try{const n=document.querySelectorAll(o);return n.length===1&&n[0]===e}catch{return!1}}function m(o){if(!(o instanceof Element))return null;const e=o;if(e.id)return`#${CSS.escape(e.id)}`;const n=e.tagName.toLowerCase(),t=[];if(e.classList.length>0)for(const l of Array.from(e.classList))t.push(`.${CSS.escape(l)}`);for(const l of Array.from(e.attributes))l.name.startsWith("data-")&&t.push(`[${l.name}="${CSS.escape(l.value)}"]`);const r=`${n}${t.join("")}`;if(r&&v(r,e))return r;const s=[];let a=e;for(;a&&a.nodeType===Node.ELEMENT_NODE;){const l=a.parentElement,y=a.tagName.toLowerCase();let E="";if(l){const g=Array.from(l.children).filter(f=>f instanceof Element&&f.tagName.toLowerCase()===y);if(g.length>1){const f=g.indexOf(a);f!==-1&&(E=`:nth-of-type(${f+1})`)}}s.unshift(`${y}${E}`),a=l}return s.join(" > ")}function p(o){switch(o.nodeType){case Node.DOCUMENT_NODE:return"/";case Node.DOCUMENT_TYPE_NODE:return"/html/doctype";case Node.ELEMENT_NODE:{const e=o;if(e.id)return`//*[@id="${CSS.escape(e.id)}"]`;const n=e.tagName.toLowerCase();if(n==="html")return"/html";if(e===document.head)return"/html/head";if(e===document.body)return"/html/body";const t=e.parentNode;if(!t)return"";const r=Array.from(t.children).filter(a=>a instanceof Element&&a.tagName.toLowerCase()===n),s=r.length>1?`[${r.indexOf(e)+1}]`:"";return`${p(t)}/${n}${s}`}case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:case Node.COMMENT_NODE:{const e=o.parentNode;if(!e)return"";const n={[Node.TEXT_NODE]:"text()",[Node.CDATA_SECTION_NODE]:"text()",[Node.COMMENT_NODE]:"comment()"},t=Array.from(e.childNodes).filter(s=>s.nodeType===o.nodeType),r=t.length>1?`[${t.indexOf(o)+1}]`:"";return`${p(e)}/${n[o.nodeType]}${r}`}default:return""}}let u=null,i=null;const N=50,L=5e3,C=typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:d&&d.tagName.toUpperCase()==="SCRIPT"&&d.src||new URL("google-custom-event-tracker.umd.js",document.baseURI).href}<"u"&&!1;function h(o){const e={captureText:!0,captureSelector:!0,capturePath:!0,captureXPath:!0,...o};u&&(document.removeEventListener("click",u),document.removeEventListener("input",u)),u=n=>{var a;const t=n.target;if(!t)return;const r={type:n.type,tag:t.tagName.toLowerCase(),ts:Date.now()};e.captureText&&(r.text=t instanceof HTMLInputElement?t.value:((a=t.textContent)==null?void 0:a.trim())||null);let s=null;e.captureSelector&&(s=m(t),r.selector=s),e.capturePath&&(r.path=s??m(t)),e.captureXPath&&(r.xpath=p(t)),e.send(r)},document.addEventListener("click",u),document.addEventListener("input",u)}function T(){if(typeof window>"u")return;i&&clearInterval(i);let o=0;i=setInterval(()=>{if(typeof window>"u"){clearInterval(i),i=null;return}o+=N;const e=window.gtag,n=window.dataLayer,t=Array.isArray(n)&&typeof n.push=="function";if(typeof e=="function"||t){clearInterval(i),i=null,h({send:r=>{typeof e=="function"?e("event","ui_event",r):n.push({event:"ui_event",...r})},captureSelector:!0,capturePath:!0,captureText:!0,captureXPath:!0});return}o>=L&&(clearInterval(i),i=null,console.warn("[GCE] gtag did not initialize in time â€” tracking disabled"))},N)}function S(){u&&(document.removeEventListener("click",u),document.removeEventListener("input",u),u=null),i&&(clearInterval(i),i=null)}typeof window<"u"&&!C&&T();const _={init:h};c._resetTrackerForTests=S,c.buildSelector=m,c.buildXPath=p,c.default=_,c.initTracker=h,c.startAutoInit=T,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=google-custom-event-tracker.umd.js.map
