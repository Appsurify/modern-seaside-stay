{"version":3,"file":"google-custom-event-tracker.umd.js","sources":["../node_modules/@whenessel/seql-js/dist/seql-js.js","../src/selector/selector.ts","../src/index.ts"],"sourcesContent":["const ne = \"1.0\", ae = 10, q = {\n  ANCHOR: 0.4,\n  PATH: 0.3,\n  TARGET: 0.2,\n  UNIQUENESS: 0.1\n}, N = {\n  SEMANTIC_TAG: 0.5,\n  ROLE: 0.3,\n  ARIA_LABEL: 0.1,\n  STABLE_ID: 0.25,\n  TEST_MARKER: 0.05,\n  DEPTH_PENALTY_THRESHOLD: 5,\n  DEPTH_PENALTY_FACTOR: 0.05,\n  DEGRADED_SCORE: 0.3\n}, lt = {\n  MIN_CONFIDENCE_FOR_SKIP: 0.7\n}, X = [\n  \"form\",\n  \"main\",\n  \"nav\",\n  \"section\",\n  \"article\",\n  \"footer\",\n  \"header\"\n], K = [\n  \"form\",\n  \"navigation\",\n  \"main\",\n  \"region\",\n  \"contentinfo\",\n  \"complementary\",\n  \"banner\",\n  \"search\"\n], ht = [\n  // HTML5 Semantic\n  \"article\",\n  \"aside\",\n  \"details\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"header\",\n  \"main\",\n  \"mark\",\n  \"nav\",\n  \"section\",\n  \"summary\",\n  \"time\",\n  // Form elements\n  \"button\",\n  \"datalist\",\n  \"fieldset\",\n  \"form\",\n  \"input\",\n  \"label\",\n  \"legend\",\n  \"meter\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"progress\",\n  \"select\",\n  \"textarea\",\n  // Interactive\n  \"a\",\n  \"audio\",\n  \"video\",\n  \"canvas\",\n  \"dialog\",\n  \"menu\",\n  // Text content\n  \"blockquote\",\n  \"dd\",\n  \"dl\",\n  \"dt\",\n  \"hr\",\n  \"li\",\n  \"ol\",\n  \"ul\",\n  \"p\",\n  \"pre\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  // Table\n  \"caption\",\n  \"col\",\n  \"colgroup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"tr\",\n  // SVG\n  \"svg\",\n  \"path\",\n  \"circle\",\n  \"rect\",\n  \"line\",\n  \"polyline\",\n  \"polygon\",\n  \"ellipse\",\n  \"g\",\n  \"text\",\n  \"use\"\n], ut = [\n  \"rect\",\n  \"path\",\n  \"circle\",\n  \"line\",\n  \"polyline\",\n  \"polygon\",\n  \"ellipse\",\n  \"g\",\n  \"text\",\n  \"use\",\n  \"defs\",\n  \"clipPath\",\n  \"mask\"\n], ie = [\n  \"aria-label\",\n  \"aria-labelledby\",\n  \"aria-describedby\",\n  \"name\",\n  \"type\",\n  \"data-testid\",\n  \"data-qa\",\n  \"data-test\",\n  \"href\",\n  \"title\",\n  \"placeholder\",\n  \"alt\"\n], E = {\n  // Test attributes (highest priority)\n  \"data-testid\": 100,\n  \"data-qa\": 99,\n  \"data-cy\": 98,\n  \"data-test\": 97,\n  \"data-test-id\": 96,\n  // ARIA (accessibility semantics)\n  \"aria-label\": 90,\n  \"aria-labelledby\": 85,\n  \"aria-describedby\": 80,\n  // Semantic HTML attributes\n  name: 75,\n  href: 70,\n  // for <a>\n  src: 70,\n  // for <img>, <script>, etc.\n  type: 65,\n  role: 60,\n  alt: 55,\n  title: 50,\n  for: 45,\n  placeholder: 40,\n  // Any data-* attribute (if not above)\n  \"data-*\": 30,\n  // Any aria-* attribute (if not above)\n  \"aria-*\": 25\n}, B = /* @__PURE__ */ new Set([\n  \"id\",\n  // handled separately\n  \"class\",\n  // handled separately\n  \"style\",\n  // unstable\n  \"xmlns\",\n  // service attribute for SVG\n  \"tabindex\",\n  // can change\n  \"contenteditable\"\n]), dt = {\n  maxPathDepth: 10,\n  enableSvgFingerprint: !0,\n  confidenceThreshold: 0,\n  fallbackToBody: !0,\n  includeUtilityClasses: !1,\n  source: \"dom-dsl\"\n}, ft = {\n  strictMode: !1,\n  enableFallback: !0,\n  maxCandidates: 20\n};\nfunction D(n) {\n  return !!(/^[a-z]+-\\d+$/i.test(n) || /^[a-z]+(-[a-z]+)+-\\d+$/i.test(n) || /^[a-z]+(_[a-z]+)*_\\d+$/i.test(n) || /^\\d+$/.test(n) || /^:[a-z0-9]+:$/i.test(n) || /^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/i.test(n) || /^[a-z]{1,3}[A-Za-z0-9]{8,}$/.test(n) && (/\\d/.test(n) || /[A-Z]/.test(n)) || /^radix-/.test(n) || /^mui-\\d+$/.test(n));\n}\nconst G = /* @__PURE__ */ new Set([\n  \"aria-labelledby\",\n  \"aria-describedby\",\n  \"aria-controls\",\n  \"aria-owns\",\n  \"aria-activedescendant\",\n  \"for\",\n  \"form\",\n  \"list\",\n  \"headers\",\n  \"aria-details\",\n  \"aria-errormessage\",\n  \"aria-flowto\"\n]);\nfunction V(n) {\n  return n.trim().split(/\\s+/).some((e) => D(e));\n}\nclass gt {\n  constructor(t, e) {\n    this.maxDepth = t.maxPathDepth ?? 10, this.cache = e;\n  }\n  /**\n   * Finds the best anchor element for the target\n   * @param target - Target element to find anchor for\n   * @returns Anchor result or null if not found\n   * @remarks\n   * Special handling for root elements (html, head, body):\n   * - For html: returns html itself as anchor\n   * - For head or elements inside head: returns html as anchor\n   * - For body: returns html as anchor\n   */\n  findAnchor(t) {\n    if (this.cache) {\n      const c = this.cache.getAnchor(t);\n      if (c !== void 0)\n        return c;\n    }\n    const e = t.tagName.toLowerCase(), s = t.ownerDocument;\n    if (e === \"html\") {\n      const c = {\n        element: t,\n        score: 1,\n        tier: \"A\",\n        depth: 0\n      };\n      return this.cacheResult(t, c), c;\n    }\n    if (e === \"head\" || this.isInsideHead(t)) {\n      const c = s?.documentElement;\n      if (c) {\n        const u = {\n          element: c,\n          score: 1,\n          tier: \"A\",\n          depth: 0\n        };\n        return this.cacheResult(t, u), u;\n      }\n    }\n    if (e === \"body\") {\n      const c = s?.documentElement;\n      if (c) {\n        const u = {\n          element: c,\n          score: 1,\n          tier: \"A\",\n          depth: 0\n        };\n        return this.cacheResult(t, u), u;\n      }\n    }\n    let r = t.parentElement, a = 0, i = null;\n    for (; r && a < this.maxDepth; ) {\n      if (r.tagName.toLowerCase() === \"body\")\n        return i || {\n          element: r,\n          score: N.DEGRADED_SCORE,\n          tier: \"C\",\n          depth: a\n        };\n      const c = this.scoreAnchor(r);\n      if (c > 0) {\n        const u = this.applyDepthPenalty(c, a), d = this.getTier(r), l = { element: r, score: u, tier: d, depth: a };\n        if (d === \"A\")\n          return l;\n        (!i || u > i.score) && (i = l);\n      }\n      r = r.parentElement, a++;\n    }\n    const o = i;\n    return this.cache && this.cache.setAnchor(t, o), o;\n  }\n  /**\n   * Scores an element as anchor candidate (without depth penalty)\n   * @param element - Element to score\n   * @returns Raw score from 0 to 1\n   */\n  scoreAnchor(t) {\n    let e = 0;\n    const s = t.tagName.toLowerCase();\n    X.includes(s) && (e += N.SEMANTIC_TAG);\n    const r = t.getAttribute(\"role\");\n    r && K.includes(r) && (e += N.ROLE), (t.hasAttribute(\"aria-label\") || t.hasAttribute(\"aria-labelledby\")) && (e += N.ARIA_LABEL);\n    const a = t.id;\n    return a && !D(a) && (e += N.STABLE_ID), (t.hasAttribute(\"data-testid\") || t.hasAttribute(\"data-qa\") || t.hasAttribute(\"data-test\")) && (e += N.TEST_MARKER), Math.min(e, 1);\n  }\n  /**\n   * Applies depth penalty to score\n   * Following SPECIFICATION.md ยง7: depthPenalty = (depth - threshold) * factor\n   */\n  applyDepthPenalty(t, e) {\n    if (e <= N.DEPTH_PENALTY_THRESHOLD)\n      return t;\n    const s = (e - N.DEPTH_PENALTY_THRESHOLD) * N.DEPTH_PENALTY_FACTOR;\n    return Math.max(0, t - s);\n  }\n  /**\n   * Determines the tier of an anchor element\n   */\n  getTier(t) {\n    const e = t.tagName.toLowerCase();\n    if (X.includes(e))\n      return \"A\";\n    const s = t.getAttribute(\"role\");\n    return s && K.includes(s) ? \"B\" : \"C\";\n  }\n  /**\n   * Checks if element is inside <head> section.\n   * Stops at <body> to avoid false positives.\n   * @param element - Element to check\n   * @returns True if element is inside head, false otherwise\n   * @remarks\n   * Traverses up the DOM tree until finding head or body.\n   * Returns false if body is encountered first.\n   * @example\n   * const meta = document.querySelector('meta');\n   * if (isInsideHead(meta)) { ... }\n   */\n  isInsideHead(t) {\n    let e = t.parentElement;\n    for (; e; ) {\n      const s = e.tagName.toLowerCase();\n      if (s === \"head\") return !0;\n      if (s === \"body\") return !1;\n      e = e.parentElement;\n    }\n    return !1;\n  }\n  /**\n   * Caches the anchor result for the target element\n   * @param target - Target element\n   * @param result - Anchor result to cache\n   */\n  cacheResult(t, e) {\n    this.cache && this.cache.setAnchor(t, e);\n  }\n}\nconst mt = [\n  // CSS-in-JS\n  /^css-[a-z0-9]+$/i,\n  /^sc-[a-z0-9]+-\\d+$/i,\n  /^[a-z]{5,8}$/i,\n  // Short generated classes (abcdef)\n  // Material-UI / MUI\n  /^Mui[A-Z]\\w+-\\w+-\\w+/,\n  /^makeStyles-\\w+-\\d+$/,\n  // JSS\n  /^jss\\d+$/,\n  // Emotion / Linaria\n  /^(emotion|linaria)-[a-z0-9]+/i,\n  // Component libraries with hashes\n  /^(chakra|tw-|ant-)[a-z0-9]+-\\w+/i,\n  // Hash-based (hashes in classes)\n  /-[a-f0-9]{6,}$/i,\n  /^_[a-z0-9]{5,}$/i,\n  /\\d{5,}/\n  // 5+ digits in a row\n], pt = [\n  // === FIX 4: Tailwind arbitrary values and variants (highest priority) ===\n  /^\\[/,\n  // Any arbitrary value or variant starting with [ (e.g., [&_svg]:..., [mask-type:luminance])\n  // === FIX 4: Pseudo-class variants (must be before specific patterns) ===\n  /^(first|last|odd|even|only|first-of-type|last-of-type|only-of-type):/,\n  // first:, last:, etc.\n  /^(hover|focus|active|disabled|enabled|checked|indeterminate|default|required|valid|invalid|in-range|out-of-range|placeholder-shown|autofill|read-only):/,\n  // State pseudo-classes\n  /^(focus-within|focus-visible|visited|target|open):/,\n  // Advanced pseudo-classes\n  // === FIX 4: Responsive variants (must be before specific patterns) ===\n  /^(sm|md|lg|xl|2xl|3xl|4xl|5xl|6xl|7xl):/,\n  // === FIX 4: Dark mode and directional variants ===\n  /^dark:/,\n  /^(rtl|ltr):/,\n  // === FIX 4: Group and peer variants ===\n  /^(group|peer)(-hover|-focus|-active)?:/,\n  // === FIX 4: Tailwind utilities with fraction values ===\n  /\\/([\\d.]+|full|auto|screen)$/,\n  // /50, /100, /full, /auto, /screen\n  // === FIX 4: Positioning utilities ===\n  /^(inset|top|right|bottom|left)(-|$)/,\n  // inset-0, top-0, left-0\n  // === Layout & Display ===\n  /^(flex|inline-flex|grid|block|inline|inline-block|hidden|visible)$/,\n  /^(absolute|relative|fixed|sticky|static)$/,\n  // === Flexbox & Grid ===\n  /^(items|justify|content|self|place)-/,\n  /^flex-(row|col|wrap|nowrap|1|auto|initial|none)/,\n  /^grid-(cols|rows|flow)/,\n  // === Spacing (Tailwind) ===\n  /^(gap|space)-/,\n  /^[mp][trblxy]?-(\\d+|auto|px)$/,\n  // === Negative Tailwind utilities (margins, positioning, transforms) ===\n  /^-[mp][trblxy]?-\\d+$/,\n  // -m-4, -mt-2, -mx-4, -px-4, -py-2\n  /^-(top|right|bottom|left|inset)-\\d+$/,\n  // -top-4, -bottom-6, -left-6, -inset-0\n  /^-z-\\d+$/,\n  // -z-10, -z-20\n  /^-space-[xy]-\\d+$/,\n  // -space-x-2, -space-y-4\n  /^-translate-[xy]-\\d+$/,\n  // -translate-x-4, -translate-y-2\n  /^-rotate-\\d+$/,\n  // -rotate-45, -rotate-90\n  /^-scale-\\d+$/,\n  // -scale-50, -scale-75\n  /^-skew-[xy]-\\d+$/,\n  // -skew-x-12, -skew-y-6\n  // === Sizing ===\n  /^(w|h|min-w|min-h|max-w|max-h|size)-/,\n  // === Colors & Styling ===\n  // Note: text-* can be semantic (text-muted, text-primary) or utility (text-center, text-lg)\n  // More specific patterns for utility text-* classes\n  /^text-(center|left|right|justify|start|end|xs|sm|base|lg|xl|2xl|3xl|4xl|5xl|6xl|7xl|8xl|9xl)$/,\n  /^text-(uppercase|lowercase|capitalize|normal-case|underline|line-through|no-underline)$/,\n  /^text-(truncate|ellipsis|clip)$/,\n  /^(bg|border|ring|shadow|outline)-/,\n  /^rounded(-|$)/,\n  // === Typography ===\n  /^(font|leading|tracking|whitespace|break|truncate)-/,\n  /^(uppercase|lowercase|capitalize|normal-case)$/,\n  // === Transform & Animation (IMPORTANT!) ===\n  /^(transform|transition|duration|delay|ease|animate)-/,\n  /^(scale|rotate|translate|skew)-/,\n  /^transform$/,\n  /^backdrop-blur-/,\n  /^motion-/,\n  // Framer Motion\n  /^(fade|slide|zoom|bounce|pulse|spin|ping)-/,\n  // animations\n  // === Overflow & Scrolling ===\n  /^(overflow|overscroll|scroll)-/,\n  /^object-(contain|cover|fill|none|scale-down)$/,\n  // === Interactivity ===\n  /^(cursor|pointer-events|select|resize)-/,\n  // === Visibility & Opacity ===\n  /^(opacity|z)-/,\n  /^(visible|invisible|collapse)$/,\n  // === Bootstrap utilities ===\n  /^d-(none|inline|inline-block|block|grid|table|flex)$/,\n  /^(float|clearfix|text)-(left|right|center|justify|start|end)$/,\n  /^(m|p)[trblxy]?-[0-5]$/,\n  /^(w|h)-(25|50|75|100|auto)$/,\n  // Note: btn-* classes are semantic (component classes), not utility\n  // /^btn-(primary|secondary|success|danger|warning|info|light|dark|link)$/,\n  /^btn-(sm|lg|block)$/,\n  // Only size modifiers are utility\n  /^text-(muted|primary|success|danger|warning|info|light|dark|white)$/,\n  /^bg-(primary|secondary|success|danger|warning|info|light|dark|white|transparent)$/,\n  /^border(-top|-bottom|-left|-right)?(-0)?$/,\n  /^rounded(-top|-bottom|-left|-right|-circle|-pill|-0)?$/,\n  /^shadow(-sm|-lg|-none)?$/,\n  /^(align|justify|order|flex)-(start|end|center|between|around|fill|grow|shrink)$/,\n  /^col(-sm|-md|-lg|-xl)?(-\\d+|-auto)?$/,\n  /^row(-cols)?(-\\d+)?$/,\n  /^g[xy]?-[0-5]$/,\n  /^(show|hide|invisible|visible)$/,\n  /^(position|top|bottom|start|end)-(static|relative|absolute|fixed|sticky|-\\d+)$/,\n  // === Common utility patterns ===\n  /^(row|col)$/,\n  /^clearfix$/,\n  /^pull-(left|right)$/,\n  /^float-(left|right|none)$/\n], bt = [\n  // === Navigation ===\n  /^(nav|menu|header|footer|sidebar|topbar|navbar|breadcrumb)/,\n  /(navigation|dropdown|megamenu)$/,\n  // === Components ===\n  /^(btn|button|link|card|modal|dialog|popup|tooltip|alert|badge|chip)/,\n  /^(form|input|select|checkbox|radio|textarea|label|fieldset)/,\n  /^(table|list|item|row|cell|column)/,\n  /^(accordion|tab|carousel|slider|gallery)/,\n  // === Content ===\n  /^(content|main|article|post|comment|title|subtitle|description|caption)/,\n  /^(hero|banner|jumbotron|section|wrapper|box)/,\n  // === User/Data ===\n  /^(user|profile|avatar|account|auth)/,\n  /^(product|item|price|cart|checkout|order)/,\n  // === Layout sections ===\n  /^(page|layout|panel|widget|block)/,\n  // === States (semantic naming) ===\n  /-(primary|secondary|tertiary|success|error|warning|info|danger)$/,\n  /-(active|inactive|disabled|enabled|selected|highlighted|focused)$/,\n  /-(open|closed|expanded|collapsed|visible|hidden)$/,\n  /-(large|medium|small|tiny|xs|sm|md|lg|xl)$/,\n  // === Action buttons ===\n  /^(submit|cancel|close|delete|edit|save|back|next|prev|search)/,\n  // === Status ===\n  /^(loading|pending|complete|failed|draft|published)/\n];\nfunction L(n) {\n  return mt.some((t) => t.test(n));\n}\nfunction _(n) {\n  return n.length <= 2 || /^\\d/.test(n) ? !0 : pt.some((t) => t.test(n));\n}\nfunction St(n) {\n  return L(n) || _(n) ? !1 : bt.some((t) => t.test(n));\n}\nfunction yt(n) {\n  return !L(n) && !_(n);\n}\nfunction M(n) {\n  return n.filter((t) => yt(t));\n}\nfunction At(n) {\n  if (L(n) || _(n))\n    return 0;\n  let t = 0.5;\n  return St(n) && (t = 0.8), n.length < 3 ? t *= 0.3 : n.length < 5 && (t *= 0.6), /\\d/.test(n) && (t *= 0.7), Math.min(t, 1);\n}\nfunction xt(n) {\n  const t = [], e = [];\n  for (const s of n)\n    _(s) || L(s) ? e.push(s) : t.push(s);\n  return { semantic: t, utility: e };\n}\nfunction J(n) {\n  return _(n) || L(n);\n}\nfunction oe(n) {\n  return At(n);\n}\nconst tt = (n) => n.replace(/([#:.[\\]@])/g, \"\\\\$1\");\nclass Ct {\n  constructor(t, e) {\n    this.maxDepth = t.maxPathDepth ?? 10, this.cache = e;\n  }\n  /**\n   * Builds path from anchor to target (excluding both)\n   * @param anchor - Anchor element (start)\n   * @param target - Target element (end)\n   * @param extractor - Semantic extractor instance\n   * @returns Path build result with nodes and degradation info\n   * @remarks\n   * Special handling for root elements:\n   * - If anchor is html and target is head/body: returns empty path\n   * - If anchor is html and target is inside head: builds path through head\n   */\n  buildPath(t, e, s) {\n    const r = t.tagName.toLowerCase(), a = e.tagName.toLowerCase();\n    if (r === \"html\" && (a === \"head\" || a === \"body\"))\n      return {\n        path: [],\n        degraded: !1\n      };\n    if (r === \"html\" && this.isInsideHead(e))\n      return this.buildHeadPath(t, e, s);\n    const i = [];\n    let o = e.parentElement;\n    for (; o && o !== t && i.length < this.maxDepth; )\n      i.unshift(o), o = o.parentElement;\n    const c = i.length >= this.maxDepth && o !== t;\n    if (!c && o !== t)\n      return console.warn(\"[PathBuilder] Target is not a descendant of anchor\"), {\n        path: [],\n        degraded: !0,\n        degradationReason: \"target-not-descendant-of-anchor\"\n      };\n    let u = this.filterNoise(i);\n    return u = this.ensureUniqueness(i, u, t, e, s), {\n      path: u.map((l) => {\n        const h = l.parentElement;\n        let g;\n        if (h) {\n          const m = Array.from(h.children).indexOf(l);\n          m !== -1 && (g = m + 1);\n        }\n        return {\n          tag: l.tagName.toLowerCase(),\n          semantics: s.extract(l),\n          score: s.scoreElement(l),\n          nthChild: g\n        };\n      }),\n      degraded: c,\n      degradationReason: c ? \"path-depth-overflow\" : void 0\n    };\n  }\n  /**\n   * Legacy method for backward compatibility\n   */\n  buildPathNodes(t, e, s) {\n    return this.buildPath(t, e, s).path;\n  }\n  /**\n   * Ensures path uniqueness by adding nodes if needed\n   * Following SPECIFICATION.md ยง8 Disambiguation Algorithm\n   */\n  ensureUniqueness(t, e, s, r, a) {\n    const i = this.buildTestSelector(s, e, r);\n    try {\n      const o = r.ownerDocument;\n      if (!o) return e;\n      let c;\n      if (this.cache) {\n        const d = this.cache.getSelectorResults(i);\n        d !== void 0 ? c = d : (c = Array.from(o.querySelectorAll(i)), this.cache.setSelectorResults(i, c));\n      } else\n        c = o.querySelectorAll(i);\n      if (c.length <= 1)\n        return e;\n      const u = t.filter((d) => !e.includes(d));\n      for (const d of u) {\n        if (a.scoreElement(d) < lt.MIN_CONFIDENCE_FOR_SKIP)\n          continue;\n        const h = this.insertNodeInOrder(e, d, t), g = this.buildTestSelector(s, h, r);\n        try {\n          let f;\n          if (this.cache) {\n            const m = this.cache.getSelectorResults(g);\n            m !== void 0 ? f = m : (f = Array.from(o.querySelectorAll(g)), this.cache.setSelectorResults(g, f));\n          } else\n            f = o.querySelectorAll(g);\n          if (f.length === 1)\n            return h;\n          f.length < c.length && (e = h);\n        } catch {\n        }\n      }\n      return e;\n    } catch {\n      return e;\n    }\n  }\n  /**\n   * Inserts node into path maintaining original order\n   */\n  insertNodeInOrder(t, e, s) {\n    const r = s.indexOf(e), a = [...t];\n    let i = 0;\n    for (let o = 0; o < a.length && !(s.indexOf(a[o]) > r); o++)\n      i = o + 1;\n    return a.splice(i, 0, e), a;\n  }\n  /**\n   * Builds a test CSS selector from path\n   */\n  buildTestSelector(t, e, s) {\n    const r = [];\n    r.push(this.elementToSelector(t));\n    for (const a of e)\n      r.push(this.elementToSelector(a));\n    return r.push(this.elementToSelector(s)), r.join(\" \");\n  }\n  /**\n   * Converts element to basic CSS selector\n   */\n  elementToSelector(t) {\n    let e = t.tagName.toLowerCase();\n    t.id && !D(t.id) && (e += `#${tt(t.id)}`);\n    for (const s of Array.from(t.classList))\n      J(s) || (e += `.${tt(s)}`);\n    return e;\n  }\n  /**\n   * Filters out noise/layout elements\n   */\n  filterNoise(t) {\n    return t.filter((e) => this.shouldInclude(e));\n  }\n  /**\n   * Determines if element should be included in path\n   */\n  shouldInclude(t) {\n    const e = t.tagName.toLowerCase();\n    return ht.includes(e) ? !0 : e === \"div\" || e === \"span\" ? this.hasSemanticFeatures(t) : !1;\n  }\n  /**\n   * Checks if element has meaningful semantic features\n   */\n  hasSemanticFeatures(t) {\n    if (t.hasAttribute(\"role\")) return !0;\n    for (const s of Array.from(t.attributes))\n      if (s.name.startsWith(\"aria-\")) return !0;\n    if (t.classList.length > 0) {\n      for (const s of Array.from(t.classList))\n        if (!J(s)) return !0;\n    }\n    if (t.hasAttribute(\"data-testid\") || t.hasAttribute(\"data-qa\") || t.hasAttribute(\"data-test\"))\n      return !0;\n    const e = t.id;\n    return !!(e && !D(e));\n  }\n  /**\n   * Checks if element is inside <head> section.\n   * Stops at <body> to avoid false positives.\n   * @param element - Element to check\n   * @returns True if element is inside head, false otherwise\n   * @remarks\n   * Traverses up the DOM tree until finding head or body.\n   * Returns false if body is encountered first.\n   */\n  isInsideHead(t) {\n    let e = t.parentElement;\n    for (; e; ) {\n      const s = e.tagName.toLowerCase();\n      if (s === \"head\") return !0;\n      if (s === \"body\") return !1;\n      e = e.parentElement;\n    }\n    return !1;\n  }\n  /**\n   * Builds path from html to target through head element.\n   * Always includes head in the path for correct CSS selector generation.\n   * @param htmlElement - The html element (anchor)\n   * @param target - Target element inside head\n   * @param extractor - Semantic extractor instance\n   * @returns Path build result with head and intermediate nodes\n   * @example\n   * For <html><head><meta name=\"description\"></head></html>\n   * Returns path: [head]\n   */\n  buildHeadPath(t, e, s) {\n    const r = [];\n    let a = e.parentElement;\n    for (; a && a !== t; )\n      r.unshift(a), a = a.parentElement;\n    return a !== t ? {\n      path: [],\n      degraded: !0,\n      degradationReason: \"target-not-descendant-of-html\"\n    } : r.findIndex((c) => c.tagName.toLowerCase() === \"head\") === -1 ? {\n      path: [],\n      degraded: !0,\n      degradationReason: \"head-not-found-in-path\"\n    } : {\n      path: r.map((c) => {\n        const u = c.parentElement;\n        let d;\n        if (u) {\n          const h = Array.from(u.children).indexOf(c);\n          h !== -1 && (d = h + 1);\n        }\n        return {\n          tag: c.tagName.toLowerCase(),\n          semantics: s.extract(c),\n          score: s.scoreElement(c),\n          nthChild: d\n        };\n      }),\n      degraded: !1\n    };\n  }\n}\nfunction Q(n) {\n  return n ? n.trim().replace(/[\\n\\t\\r]/g, \" \").replace(/\\s+/g, \" \") : \"\";\n}\nconst Tt = {\n  preserveQueryForAbsolute: !0,\n  removeDynamicHashes: !0\n};\nfunction Et(n) {\n  return n ? [\n    /\\d{5,}/,\n    // 5+ digits\n    /[a-f0-9]{8,}/i,\n    // hex hash 8+ characters\n    /(session|token|temp|random|timestamp|nonce|cache)/i,\n    // dynamic words\n    /^\\d+$/,\n    // only digits\n    /^[a-f0-9-]{32,}$/i\n    // UUID-like\n  ].some((e) => e.test(n)) : !1;\n}\nfunction wt(n, t) {\n  if (!n) return n;\n  const e = n.startsWith(\"http://\") || n.startsWith(\"https://\"), [s, r] = n.split(\"#\"), [a, i] = s.split(\"?\");\n  let o = a;\n  return e && t.preserveQueryForAbsolute && i && (o += `?${i}`), r && (t.removeDynamicHashes && Et(r) || (o += `#${r}`)), o;\n}\nfunction k(n, t, e = {}) {\n  if (!t) return t;\n  const s = { ...Tt, ...e };\n  return n === \"href\" || n === \"src\" ? wt(t, s) : t;\n}\nconst vt = [\n  \"role\",\n  \"aria-label\",\n  \"aria-labelledby\",\n  \"aria-describedby\",\n  \"aria-controls\",\n  \"aria-owns\",\n  \"aria-level\",\n  \"aria-posinset\",\n  \"aria-setsize\",\n  \"aria-haspopup\"\n], $t = [\n  \"aria-selected\",\n  \"aria-checked\",\n  \"aria-pressed\",\n  \"aria-expanded\",\n  \"aria-hidden\",\n  \"aria-disabled\",\n  \"aria-current\",\n  \"aria-busy\",\n  \"aria-invalid\",\n  \"aria-grabbed\",\n  \"aria-live\",\n  \"aria-atomic\"\n], It = [\n  \"data-state\",\n  \"data-active\",\n  \"data-inactive\",\n  \"data-selected\",\n  \"data-open\",\n  \"data-closed\",\n  \"data-visible\",\n  \"data-hidden\",\n  \"data-disabled\",\n  \"data-enabled\",\n  \"data-loading\",\n  \"data-error\",\n  \"data-success\",\n  \"data-highlighted\",\n  \"data-focused\",\n  \"data-hover\",\n  \"data-orientation\",\n  \"data-theme\"\n], Nt = [\n  \"data-radix-\",\n  \"data-headlessui-\",\n  \"data-reach-\",\n  \"data-mui-\",\n  \"data-chakra-\",\n  \"data-mantine-\",\n  \"data-tw-\"\n], Rt = [\n  \"data-testid\",\n  \"data-test-id\",\n  \"data-test\",\n  \"data-cy\",\n  \"data-qa\",\n  \"data-automation-id\",\n  \"data-id\",\n  \"data-component\",\n  \"data-entity-id\",\n  \"data-product-id\",\n  \"data-user-id\"\n], Mt = [\n  // Google Analytics / GTM\n  \"data-ga\",\n  \"data-gtm\",\n  \"data-google\",\n  \"data-layer\",\n  \"data-event\",\n  // Yandex Metrica\n  \"data-yandex\",\n  \"data-ym\",\n  \"data-metrika\",\n  // A/B Testing\n  \"data-optimizely\",\n  \"data-vwo\",\n  \"data-optimize\",\n  // Session Recording\n  \"data-hj\",\n  \"data-hotjar\",\n  \"data-fs\",\n  \"data-mouseflow\",\n  \"data-mf\",\n  \"data-smartlook\",\n  \"data-sl\",\n  // Social / Ad Pixels\n  \"data-fb\",\n  \"data-facebook\",\n  \"data-tt\",\n  \"data-li\",\n  // Generic Tracking\n  \"data-track\",\n  \"data-tracking\",\n  \"data-click\",\n  \"data-impression\",\n  \"data-conversion\",\n  \"data-segment\",\n  \"data-analytics\"\n], Dt = [\n  \"data-category\",\n  // Google Analytics category\n  \"data-action\",\n  // Google Analytics action\n  \"data-label\",\n  // Google Analytics label\n  \"data-value\"\n  // Google Analytics value\n], Ht = [\n  \"id\",\n  \"name\",\n  \"type\",\n  \"placeholder\",\n  \"title\",\n  \"for\",\n  \"alt\",\n  \"href\"\n], Pt = [\n  \"disabled\",\n  \"checked\",\n  \"selected\",\n  \"hidden\",\n  \"readonly\",\n  \"required\",\n  \"value\"\n], kt = [\n  /^radix-/,\n  /^headlessui-/,\n  /^mui-/,\n  /:\\w+:/\n  // matches :ru:, :r1:, etc.\n];\nfunction Lt(n, t) {\n  return vt.includes(n) ? !0 : $t.includes(n) || It.includes(n) || Nt.some((e) => n.startsWith(e)) ? !1 : Rt.includes(n) ? !0 : Mt.some((e) => n.startsWith(e)) || Dt.includes(n) ? !1 : n.startsWith(\"data-\") && n.endsWith(\"-id\") ? !0 : n === \"id\" ? !kt.some((e) => e.test(t)) : Ht.includes(n) ? !0 : Pt.includes(n) ? !1 : !!n.startsWith(\"data-\");\n}\nclass et {\n  constructor(t, e) {\n    this.includeUtilityClasses = t.includeUtilityClasses ?? !1, this.cache = e;\n  }\n  /**\n   * Extracts semantic features from element\n   * @param element - DOM element to extract from\n   * @returns Semantic features object\n   */\n  extract(t) {\n    if (this.cache) {\n      const i = this.cache.getSemantics(t);\n      if (i !== void 0)\n        return i;\n    }\n    const e = {}, s = t.id;\n    if (s && !D(s) && (e.id = s), t.classList.length > 0) {\n      const i = Array.from(t.classList);\n      if (this.includeUtilityClasses)\n        e.classes = i;\n      else {\n        const { semantic: o } = xt(i);\n        o.length > 0 && (e.classes = o);\n      }\n    }\n    const r = this.extractAttributes(t);\n    Object.keys(r).length > 0 && (e.attributes = r);\n    const a = t.getAttribute(\"role\");\n    if (a && (e.role = a), this.shouldExtractText(t)) {\n      const i = this.extractText(t);\n      i && (e.text = i);\n    }\n    return this.cache && this.cache.setSemantics(t, e), e;\n  }\n  /**\n   * Scores element based on semantic richness\n   * @param element - Element to score\n   * @returns Score from 0 to 1\n   */\n  scoreElement(t) {\n    let e = 0.5;\n    const s = this.extract(t);\n    return s.id && (e += 0.15), s.classes && s.classes.length > 0 && (e += 0.1), s.attributes && Object.keys(s.attributes).length > 0 && (e += 0.1), s.role && (e += 0.1), s.text && (e += 0.05), Math.min(e, 1);\n  }\n  /**\n   * Checks if attribute should be ignored\n   * @param attrName - Attribute name\n   * @returns True if should be ignored\n   */\n  shouldIgnoreAttribute(t) {\n    return !!(B.has(t) || t.startsWith(\"on\") || t.startsWith(\"ng-\") || t.startsWith(\"_ng\") || t.startsWith(\"data-reactid\") || t.startsWith(\"data-react\") || t.startsWith(\"data-v-\"));\n  }\n  /**\n   * Gets attribute priority\n   * @param attrName - Attribute name\n   * @returns Priority number (higher = more priority)\n   */\n  getAttributePriority(t) {\n    return E[t] !== void 0 ? E[t] : t.startsWith(\"data-\") ? E[\"data-*\"] : t.startsWith(\"aria-\") ? E[\"aria-*\"] : 0;\n  }\n  /**\n   * Checks if attribute value is dynamic (should be ignored)\n   * @param value - Attribute value\n   * @returns True if value is dynamic\n   */\n  isDynamicValue(t) {\n    return [\n      /^[a-f0-9]{32,}$/i,\n      // Long hashes\n      /^\\d{10,}$/,\n      // Timestamp\n      /^(undefined|null|\\[object)/,\n      // JS artifacts\n      /^{{.*}}$/\n      // Template literals\n    ].some((s) => s.test(t));\n  }\n  /**\n   * Extracts relevant semantic attributes from element\n   * Iterates through all attributes and filters by priority\n   */\n  extractAttributes(t) {\n    const e = {};\n    for (const s of Array.from(t.attributes)) {\n      const r = s.name;\n      if (this.shouldIgnoreAttribute(r) || !Lt(r, s.value) || G.has(r) && V(s.value) || this.getAttributePriority(r) === 0) continue;\n      const i = r === \"href\" || r === \"src\" ? k(r, s.value) : s.value;\n      !i || i.trim() === \"\" || this.isDynamicValue(i) || (e[r] = i);\n    }\n    return e;\n  }\n  /**\n   * Extracts and normalizes text content\n   */\n  extractText(t) {\n    const e = this.getDirectTextContent(t);\n    if (!e) return null;\n    const s = Q(e);\n    if (!s) return null;\n    const r = 100, a = e.length > r ? e.slice(0, r) + \"...\" : e, i = s.length > r ? s.slice(0, r) + \"...\" : s;\n    return {\n      raw: a,\n      normalized: i\n    };\n  }\n  /**\n   * Gets direct text content excluding child elements\n   */\n  getDirectTextContent(t) {\n    const e = [];\n    for (const s of Array.from(t.childNodes))\n      if (s.nodeType === Node.TEXT_NODE && s.textContent) {\n        const r = s.textContent.trim();\n        r && e.push(r);\n      }\n    return e.length > 0 ? e.join(\" \") : t.textContent ?? null;\n  }\n  /**\n   * Determines if text should be extracted for this element\n   */\n  shouldExtractText(t) {\n    const e = t.tagName.toLowerCase();\n    return [\n      \"button\",\n      \"a\",\n      \"label\",\n      \"h1\",\n      \"h2\",\n      \"h3\",\n      \"h4\",\n      \"h5\",\n      \"h6\",\n      \"p\",\n      \"span\",\n      \"li\",\n      \"th\",\n      \"td\",\n      \"dt\",\n      \"dd\",\n      \"legend\",\n      \"figcaption\",\n      \"summary\"\n    ].includes(e);\n  }\n}\nclass _t {\n  /**\n   * Generates fingerprint for SVG element\n   * @param element - SVG element to fingerprint\n   * @returns SVG fingerprint object\n   */\n  fingerprint(t) {\n    const e = t.tagName.toLowerCase(), s = this.getShape(e), r = {\n      shape: s,\n      hasAnimation: this.hasAnimation(t)\n    };\n    if (s === \"path\") {\n      const o = t.getAttribute(\"d\");\n      o && (r.dHash = this.computePathHash(o));\n    } else [\"circle\", \"rect\", \"ellipse\", \"line\"].includes(s) && (r.geomHash = this.computeGeomHash(t, s));\n    const a = t.getAttribute(\"role\");\n    a && (r.role = a);\n    const i = t.querySelector(\"title\");\n    return i?.textContent && (r.titleText = i.textContent.trim()), r;\n  }\n  /**\n   * Computes hash from path data (first N commands)\n   * @param d - SVG path d attribute value\n   * @returns Hash string\n   */\n  computePathHash(t) {\n    const e = this.normalizePathData(t);\n    return this.simpleHash(e);\n  }\n  /**\n   * Gets the shape type from tag name\n   */\n  getShape(t) {\n    return [\n      \"path\",\n      \"circle\",\n      \"rect\",\n      \"line\",\n      \"polyline\",\n      \"polygon\",\n      \"ellipse\",\n      \"g\",\n      \"text\",\n      \"use\",\n      \"svg\"\n    ].find((s) => s === t) ?? \"path\";\n  }\n  /**\n   * Normalizes path data for consistent hashing\n   */\n  normalizePathData(t) {\n    return (t.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi) ?? []).slice(0, 5).map((r) => r.trim().replace(/(-?\\d+\\.?\\d*)/g, (a) => parseFloat(a).toFixed(1))).join(\" \");\n  }\n  /**\n   * Computes geometry hash for non-path shapes\n   */\n  computeGeomHash(t, e) {\n    const s = [];\n    switch (e) {\n      case \"circle\":\n        s.push(`r=${t.getAttribute(\"r\") ?? \"0\"}`);\n        break;\n      case \"rect\":\n        {\n          const r = parseFloat(t.getAttribute(\"width\") ?? \"0\"), a = parseFloat(t.getAttribute(\"height\") ?? \"0\");\n          r > 0 && a > 0 && s.push(`ratio=${(r / a).toFixed(2)}`);\n        }\n        break;\n      case \"ellipse\":\n        {\n          const r = parseFloat(t.getAttribute(\"rx\") ?? \"0\"), a = parseFloat(t.getAttribute(\"ry\") ?? \"0\");\n          r > 0 && a > 0 && s.push(`ratio=${(r / a).toFixed(2)}`);\n        }\n        break;\n      case \"line\":\n        {\n          const r = parseFloat(t.getAttribute(\"x1\") ?? \"0\"), a = parseFloat(t.getAttribute(\"y1\") ?? \"0\"), i = parseFloat(t.getAttribute(\"x2\") ?? \"0\"), o = parseFloat(t.getAttribute(\"y2\") ?? \"0\"), c = Math.atan2(o - a, i - r);\n          s.push(`angle=${c.toFixed(2)}`);\n        }\n        break;\n    }\n    return this.simpleHash(s.join(\";\"));\n  }\n  /**\n   * Detects animations on SVG element\n   */\n  hasAnimation(t) {\n    if (t.querySelector(\"animate, animateTransform, animateMotion\"))\n      return !0;\n    const e = t.ownerDocument;\n    if (e?.defaultView)\n      try {\n        const s = e.defaultView.getComputedStyle(t);\n        if (s.animationName !== \"none\" || s.transitionProperty !== \"all\" && s.transitionProperty !== \"none\")\n          return !0;\n      } catch {\n      }\n    return !1;\n  }\n  /**\n   * Simple hash function for fingerprinting (not cryptographic)\n   */\n  simpleHash(t) {\n    let e = 0;\n    for (let s = 0; s < t.length; s++) {\n      const r = t.charCodeAt(s);\n      e = (e << 5) - e + r, e = e & e;\n    }\n    return Math.abs(e).toString(16).padStart(8, \"0\");\n  }\n}\nfunction qt(n, t = 0) {\n  const e = n.anchor.score, s = n.path.length > 0 ? n.path.reduce((o, c) => o + c.score, 0) / n.path.length : 0.5, r = n.target.score, a = e * q.ANCHOR + s * q.PATH + r * q.TARGET + t * q.UNIQUENESS, i = n.anchor.degraded ? 0.2 : 0;\n  return Math.max(0, Math.min(1, a - i));\n}\nfunction ce(n, t, e) {\n  let s = 0.5;\n  return t && (s += 0.2), e && (s += 0.15), s += Math.min(n * 0.05, 0.15), Math.min(s, 1);\n}\nclass Ot {\n  constructor(t) {\n    this.cache = /* @__PURE__ */ new Map(), this.maxSize = t;\n  }\n  get(t) {\n    const e = this.cache.get(t);\n    if (e !== void 0)\n      return this.cache.delete(t), this.cache.set(t, e), e;\n  }\n  set(t, e) {\n    if (this.cache.has(t))\n      this.cache.delete(t);\n    else if (this.cache.size >= this.maxSize) {\n      const s = this.cache.keys().next().value;\n      s !== void 0 && this.cache.delete(s);\n    }\n    this.cache.set(t, e);\n  }\n  has(t) {\n    return this.cache.has(t);\n  }\n  delete(t) {\n    this.cache.delete(t);\n  }\n  clear() {\n    this.cache.clear();\n  }\n  get size() {\n    return this.cache.size;\n  }\n}\nclass Ut {\n  constructor(t = {}) {\n    this.eidCache = /* @__PURE__ */ new WeakMap(), this.selectorResultCache = new Ot(\n      t.maxSelectorCacheSize ?? 1e3\n    ), this.anchorCache = /* @__PURE__ */ new WeakMap(), this.semanticsCache = /* @__PURE__ */ new WeakMap(), this.stats = {\n      eidHits: 0,\n      eidMisses: 0,\n      selectorHits: 0,\n      selectorMisses: 0,\n      anchorHits: 0,\n      anchorMisses: 0,\n      semanticsHits: 0,\n      semanticsMisses: 0,\n      selectorCacheSize: 0,\n      maxSelectorCacheSize: t.maxSelectorCacheSize ?? 1e3\n    };\n  }\n  /**\n   * Get cached EID for element\n   */\n  getEID(t) {\n    const e = this.eidCache.get(t);\n    if (e !== void 0)\n      return this.stats.eidHits++, e;\n    this.stats.eidMisses++;\n  }\n  /**\n   * Cache EID for element\n   */\n  setEID(t, e) {\n    this.eidCache.set(t, e);\n  }\n  /**\n   * Get cached selector results\n   */\n  getSelectorResults(t) {\n    const e = this.selectorResultCache.get(t);\n    if (e !== void 0)\n      return this.stats.selectorHits++, this.stats.selectorCacheSize = this.selectorResultCache.size, e;\n    this.stats.selectorMisses++, this.stats.selectorCacheSize = this.selectorResultCache.size;\n  }\n  /**\n   * Cache selector results\n   */\n  setSelectorResults(t, e) {\n    this.selectorResultCache.set(t, e), this.stats.selectorCacheSize = this.selectorResultCache.size;\n  }\n  /**\n   * Get cached anchor result\n   */\n  getAnchor(t) {\n    if (this.anchorCache.has(t))\n      return this.stats.anchorHits++, this.anchorCache.get(t);\n    this.stats.anchorMisses++;\n  }\n  /**\n   * Cache anchor result\n   */\n  setAnchor(t, e) {\n    this.anchorCache.set(t, e);\n  }\n  /**\n   * Get cached semantics\n   */\n  getSemantics(t) {\n    const e = this.semanticsCache.get(t);\n    if (e !== void 0)\n      return this.stats.semanticsHits++, e;\n    this.stats.semanticsMisses++;\n  }\n  /**\n   * Cache semantics\n   */\n  setSemantics(t, e) {\n    this.semanticsCache.set(t, e);\n  }\n  /**\n   * Clear all caches\n   */\n  clear() {\n    this.selectorResultCache.clear(), this.stats.selectorCacheSize = 0, this.stats = {\n      eidHits: 0,\n      eidMisses: 0,\n      selectorHits: 0,\n      selectorMisses: 0,\n      anchorHits: 0,\n      anchorMisses: 0,\n      semanticsHits: 0,\n      semanticsMisses: 0,\n      selectorCacheSize: 0,\n      maxSelectorCacheSize: this.stats.maxSelectorCacheSize\n    };\n  }\n  /**\n   * Invalidate cache for a specific element\n   * Note: WeakMaps don't support deletion, but we can clear selector cache\n   * if needed. This method is mainly for future extensibility.\n   */\n  invalidateElement(t) {\n  }\n  /**\n   * Invalidate a specific selector from cache\n   */\n  invalidateSelector(t) {\n    this.selectorResultCache.delete(t), this.stats.selectorCacheSize = this.selectorResultCache.size;\n  }\n  /**\n   * Get cache statistics\n   */\n  getStats() {\n    return {\n      ...this.stats,\n      selectorCacheSize: this.selectorResultCache.size\n    };\n  }\n  /**\n   * Get cache hit rate for EID cache\n   */\n  getEIDHitRate() {\n    const t = this.stats.eidHits + this.stats.eidMisses;\n    return t > 0 ? this.stats.eidHits / t : 0;\n  }\n  /**\n   * Get cache hit rate for selector cache\n   */\n  getSelectorHitRate() {\n    const t = this.stats.selectorHits + this.stats.selectorMisses;\n    return t > 0 ? this.stats.selectorHits / t : 0;\n  }\n  /**\n   * Get cache hit rate for anchor cache\n   */\n  getAnchorHitRate() {\n    const t = this.stats.anchorHits + this.stats.anchorMisses;\n    return t > 0 ? this.stats.anchorHits / t : 0;\n  }\n  /**\n   * Get cache hit rate for semantics cache\n   */\n  getSemanticsHitRate() {\n    const t = this.stats.semanticsHits + this.stats.semanticsMisses;\n    return t > 0 ? this.stats.semanticsHits / t : 0;\n  }\n  /**\n   * Get overall cache hit rate\n   */\n  getOverallHitRate() {\n    const t = this.stats.eidHits + this.stats.selectorHits + this.stats.anchorHits + this.stats.semanticsHits, e = this.stats.eidMisses + this.stats.selectorMisses + this.stats.anchorMisses + this.stats.semanticsMisses, s = t + e;\n    return s > 0 ? t / s : 0;\n  }\n}\nfunction zt(n) {\n  return new Ut(n);\n}\nlet O = null;\nfunction Y() {\n  return O || (O = zt()), O;\n}\nfunction le() {\n  O = null;\n}\nfunction Z(n, t = {}) {\n  if (!n || !n.ownerDocument || !n.isConnected)\n    return null;\n  const e = { ...dt, ...t }, s = e.cache ?? Y(), r = s.getEID(n);\n  if (r !== void 0)\n    return r;\n  if (n.tagName.toLowerCase() === \"html\") {\n    const v = new et(e, s), A = Wt(n, e, v);\n    return s.setEID(n, A), A;\n  }\n  const i = new gt(e, s), o = new Ct(e, s), c = new et(e, s), u = new _t(), d = i.findAnchor(n);\n  if (!d && !e.fallbackToBody)\n    return null;\n  const l = d?.element ?? n.ownerDocument?.body ?? null;\n  if (!l) return null;\n  const h = !d || d.tier === \"C\", g = l.tagName.toLowerCase(), f = l.parentElement;\n  let m;\n  if (f && g !== \"body\" && g !== \"html\") {\n    const A = Array.from(f.children).indexOf(l);\n    A !== -1 && (m = A + 1);\n  }\n  const p = c.extract(l), S = {\n    tag: l.tagName.toLowerCase(),\n    semantics: p,\n    score: d?.score ?? N.DEGRADED_SCORE,\n    degraded: h,\n    nthChild: m\n  }, y = o.buildPath(l, n, c), w = c.extract(n);\n  e.enableSvgFingerprint && Ft(n) && (w.svg = u.fingerprint(n));\n  const x = n.parentElement;\n  let b;\n  if (x) {\n    const A = Array.from(x.children).indexOf(n);\n    A !== -1 && (b = A + 1);\n  }\n  const $ = {\n    tag: n.tagName.toLowerCase(),\n    semantics: w,\n    score: c.scoreElement(n),\n    nthChild: b\n  }, I = [], H = {\n    onMultiple: \"best-score\",\n    onMissing: \"anchor-only\",\n    maxDepth: 3\n  }, T = S.degraded || y.degraded, R = jt(S.degraded, y), C = {\n    version: \"1.0\",\n    anchor: S,\n    path: y.path,\n    target: $,\n    constraints: I,\n    fallback: H,\n    meta: {\n      confidence: 0,\n      // Calculated below\n      generatedAt: (/* @__PURE__ */ new Date()).toISOString(),\n      generator: \"dom-eid@1.0\",\n      source: e.source,\n      degraded: T,\n      degradationReason: R\n    }\n  };\n  return C.meta.confidence = qt(C), C.meta.confidence < e.confidenceThreshold ? null : (s.setEID(n, C), C);\n}\nfunction Ft(n) {\n  return n.namespaceURI === \"http://www.w3.org/2000/svg\" || n.tagName.toLowerCase() === \"svg\" || n instanceof SVGElement;\n}\nfunction jt(n, t) {\n  if (n && t.degraded)\n    return \"anchor-and-path-degraded\";\n  if (n)\n    return \"no-semantic-anchor\";\n  if (t.degraded)\n    return t.degradationReason;\n}\nfunction Wt(n, t, e, s) {\n  const a = {\n    tag: \"html\",\n    semantics: e.extract(n),\n    score: 1,\n    degraded: !1,\n    nthChild: void 0\n  };\n  return {\n    version: \"1.0\",\n    anchor: a,\n    path: [],\n    target: a,\n    constraints: [],\n    fallback: {\n      onMultiple: \"best-score\",\n      onMissing: \"anchor-only\",\n      maxDepth: 3\n    },\n    meta: {\n      confidence: 1,\n      generatedAt: (/* @__PURE__ */ new Date()).toISOString(),\n      generator: \"dom-eid@1.0\",\n      source: t.source,\n      degraded: !1,\n      degradationReason: void 0\n    }\n  };\n}\nclass rt {\n  buildSelector(t, e) {\n    if (t.target.tag === \"html\") {\n      const l = \"html\";\n      return e?.ensureUnique ? {\n        selector: l,\n        isUnique: !0,\n        usedNthOfType: !1,\n        extraClassesAdded: 0\n      } : l;\n    }\n    if (t.anchor.tag === \"html\" && t.path.length === 0) {\n      const h = `html > ${this.buildNodeSelector(t.target.tag, t.target.semantics)}`;\n      return e?.ensureUnique ? {\n        selector: h,\n        isUnique: this.isUnique(h, e.root ?? document),\n        usedNthOfType: !1,\n        extraClassesAdded: 0\n      } : h;\n    }\n    if (t.anchor.tag === \"html\" && t.path.length > 0 && t.path[0].tag === \"head\")\n      return this.buildHeadSelector(t, e);\n    if (t.path.length === 0 && t.anchor.tag === t.target.tag && JSON.stringify(t.anchor.semantics) === JSON.stringify(t.target.semantics)) {\n      const l = this.buildNodeSelector(\n        t.target.tag,\n        t.target.semantics,\n        { excludeClasses: !1 }\n        // Include classes for same-element case\n      );\n      return e?.ensureUnique ? this.ensureUniqueSelector(l, t, e) : l;\n    }\n    const r = [], a = e?.ensureUnique ? this.ensureUniqueAnchor(t, e.root ?? document) : this.buildNodeSelector(t.anchor.tag, t.anchor.semantics);\n    r.push(a);\n    for (const l of t.path) {\n      let h = this.buildNodeSelector(l.tag, l.semantics);\n      l.nthChild !== void 0 && ([\"tr\", \"td\", \"th\", \"thead\", \"tbody\", \"tfoot\"].includes(l.tag) ? h += `:nth-child(${l.nthChild})` : h += `:nth-child(${l.nthChild})`), r.push(h);\n    }\n    let i = this.buildNodeSelector(\n      t.target.tag,\n      t.target.semantics,\n      { excludeClasses: e?.ensureUnique }\n      // Exclude classes initially if we need unique\n    );\n    t.target.nthChild !== void 0 && ([\"tr\", \"td\", \"th\", \"thead\", \"tbody\", \"tfoot\"].includes(t.target.tag) ? i += `:nth-child(${t.target.nthChild})` : i += `:nth-child(${t.target.nthChild})`), r.push(i);\n    const o = this.isSvgChildElement(t.target.tag), c = t.path.some((l) => l.tag === \"svg\");\n    let u;\n    if (o && c) {\n      const l = t.path.findIndex((h) => h.tag === \"svg\");\n      if (l !== -1) {\n        const h = l + 1, g = r.slice(0, h + 1), f = r.slice(h + 1, -1), m = r[r.length - 1];\n        f.length > 0 ? u = g.join(\" \") + \" > \" + f.join(\" > \") + \" > \" + m : u = g.join(\" \") + \" > \" + m;\n      } else\n        u = r.join(\" \");\n    } else\n      u = r.join(\" \");\n    if (!e?.ensureUnique)\n      return u;\n    const d = this.querySelectorSafe(u, e.root ?? document);\n    if (d.length === 1)\n      return {\n        selector: u,\n        isUnique: !0,\n        usedNthOfType: u.includes(\":nth-\"),\n        extraClassesAdded: 0\n      };\n    if (d.length === 0 || d.length > 1) {\n      const l = this.buildFullDomPathSelector(\n        t,\n        t.target.semantics,\n        e.root ?? document\n      );\n      if (l && this.isUnique(l, e.root ?? document))\n        return {\n          selector: l,\n          isUnique: !0,\n          usedNthOfType: l.includes(\":nth-\"),\n          extraClassesAdded: 0\n        };\n    }\n    return this.ensureUniqueSelector(u, t, e);\n  }\n  /**\n   * Builds selector for anchor only (used in fallback)\n   * @param eid - Element Identity\n   * @returns CSS selector for anchor\n   */\n  buildAnchorSelector(t) {\n    return this.buildNodeSelector(t.anchor.tag, t.anchor.semantics);\n  }\n  /**\n   * Ensures selector uniqueness by progressively adding classes and nth-of-type\n   */\n  ensureUniqueSelector(t, e, s) {\n    const r = s.root ?? document, a = s.maxClasses ?? 4, i = e.target.tag, o = e.target.semantics;\n    let c = t, u = 0, d = !1;\n    if (this.querySelectorSafe(c, r).length === 0) {\n      const f = this.buildFullDomPathSelector(e, o, r);\n      if (f && (c = f, this.isUnique(c, r)))\n        return {\n          selector: c,\n          isUnique: !0,\n          usedNthOfType: !1,\n          extraClassesAdded: 0\n        };\n    }\n    if (this.isUnique(c, r))\n      return {\n        selector: c,\n        isUnique: !0,\n        usedNthOfType: !1,\n        extraClassesAdded: 0\n      };\n    const h = M(o.classes ?? []);\n    for (let f = 0; f < Math.min(h.length, a); f++) {\n      const m = h[f];\n      if (c += `.${this.escapeCSS(m)}`, u++, this.isUnique(c, r))\n        return {\n          selector: c,\n          isUnique: !0,\n          usedNthOfType: !1,\n          extraClassesAdded: u\n        };\n    }\n    if (!this.isUnique(c, r)) {\n      const f = this.buildFullDomPathSelector(e, o, r);\n      if (f && this.isUnique(f, r))\n        return {\n          selector: f,\n          isUnique: !0,\n          usedNthOfType: f.includes(\":nth-of-type(\"),\n          extraClassesAdded: u\n        };\n    }\n    const g = this.findNthElementByText(c, o, r);\n    return g && (c += this.getNthSelector(g, i), d = !0), {\n      selector: c,\n      isUnique: this.isUnique(c, r),\n      usedNthOfType: d,\n      extraClassesAdded: u\n    };\n  }\n  /**\n   * Builds full DOM path selector by traversing actual DOM from anchor\n   * This handles cases where intermediate div/span elements were filtered out\n   */\n  buildFullDomPathSelector(t, e, s) {\n    const r = this.buildNodeSelector(t.anchor.tag, t.anchor.semantics), a = this.querySelectorSafe(r, s);\n    if (a.length === 0) return null;\n    for (const i of a) {\n      const o = this.findTargetWithinAnchor(i, t.target.tag, e);\n      if (o.length === 0) continue;\n      const c = o.map((u) => {\n        const d = this.scorePathMatch(u, i, t.path);\n        return { element: u, score: d };\n      });\n      c.sort((u, d) => d.score - u.score);\n      for (const { element: u } of c) {\n        const d = this.buildPathFromAnchorToTarget(i, u, t, s);\n        if (d && this.isUnique(d, s))\n          return d;\n      }\n    }\n    return null;\n  }\n  /**\n   * Scores how well a candidate's DOM path matches the EID path\n   * Compares tags, classes, attributes, and nthChild positions\n   * @param candidate - Target element candidate\n   * @param anchor - Anchor element\n   * @param eidPath - EID path nodes\n   * @returns Score (higher = better match)\n   */\n  scorePathMatch(t, e, s) {\n    const r = [];\n    let a = t.parentElement;\n    for (; a && a !== e; )\n      r.unshift(a), a = a.parentElement;\n    let i = 0;\n    const o = Math.min(r.length, s.length);\n    for (let u = 0; u < o; u++) {\n      const d = r[u], l = s[u];\n      if (d.tagName.toLowerCase() === l.tag) {\n        if (i += 10, l.nthChild !== void 0) {\n          const h = d.parentElement;\n          h && (Array.from(h.children).indexOf(d) + 1 === l.nthChild ? i += 20 : i -= 10);\n        }\n      } else\n        i -= 5;\n      if (l.semantics.classes && l.semantics.classes.length > 0) {\n        const h = l.semantics.classes.filter(\n          (g) => d.classList.contains(g)\n        );\n        i += h.length * 2;\n      }\n      if (l.semantics.attributes) {\n        const h = Object.entries(l.semantics.attributes).filter(\n          ([g, f]) => d.getAttribute(g) === f\n        );\n        i += h.length * 3;\n      }\n    }\n    const c = Math.abs(r.length - s.length);\n    return i -= c * 2, i;\n  }\n  /**\n   * Finds target elements within an anchor by matching semantics\n   */\n  findTargetWithinAnchor(t, e, s) {\n    return Array.from(t.querySelectorAll(e)).filter((a) => {\n      if (s.text) {\n        const i = a.textContent?.trim() || \"\", o = s.text.normalized;\n        if (!i.includes(o) && !o.includes(i))\n          return !1;\n      }\n      return !!(s.classes && s.classes.length > 0 && s.classes.every((o) => a.classList.contains(o)) || s.attributes && Object.entries(s.attributes).every(([o, c]) => {\n        const u = a.getAttribute(o);\n        return o === \"href\" || o === \"src\" ? k(o, u || \"\") === k(o, c) : u === c;\n      }) || s.text);\n    });\n  }\n  /**\n   * Disambiguates a parent element by trying attributes, classes, then nth-of-type\n   * Priority: stable attributes > one stable class > nth-of-type\n   * @param element The DOM element to disambiguate\n   * @param tag The tag name\n   * @param pathNode EID path node with semantics (if available)\n   * @param fullPath Current selector path (for uniqueness testing)\n   * @param root Root element for queries\n   * @returns Disambiguated selector part (e.g., \"div[role='main']\" or \"div.sidebar\" or \"div:nth-of-type(3)\")\n   */\n  disambiguateParent(t, e, s, r, a) {\n    if (s?.semantics?.attributes) {\n      const o = this.buildNodeSelector(e, s.semantics, {\n        excludeClasses: !0\n      }), c = [...r, e].join(\" > \"), u = this.querySelectorSafe(c, a), d = [...r, o].join(\" > \"), l = this.querySelectorSafe(d, a);\n      if (l.length > 0 && l.length < u.length)\n        return o;\n    }\n    if (s?.semantics?.classes) {\n      const o = M(s.semantics.classes);\n      if (o.length > 0) {\n        const c = `${e}.${this.escapeCSS(o[0])}`, u = [...r, e].join(\" > \"), d = this.querySelectorSafe(u, a), l = [...r, c].join(\" > \"), h = this.querySelectorSafe(l, a);\n        if (h.length > 0 && h.length < d.length)\n          return c;\n      }\n    }\n    const i = t.parentElement;\n    return i && Array.from(i.children).filter((c) => c.tagName.toLowerCase() === e).length > 1 ? `${e}${this.getNthSelector(t, e)}` : e;\n  }\n  /**\n   * Builds CSS selector path from anchor to target by traversing actual DOM\n   */\n  buildPathFromAnchorToTarget(t, e, s, r) {\n    const a = [];\n    let i = e;\n    for (; i && i !== t; )\n      a.unshift(i), i = i.parentElement;\n    if (i !== t)\n      return null;\n    const o = [\n      // ============================================================\n      // Strategy 0: anchor path target[attrs_only]\n      // Most flexible - no classes on target, only semantic attributes\n      // ============================================================\n      () => {\n        const c = this.buildNodeSelector(s.anchor.tag, s.anchor.semantics), u = s.target.tag, d = s.target.semantics, l = [];\n        for (const p of s.path)\n          l.push(p.tag);\n        const g = [c, ...l, u].filter(Boolean).join(\" \");\n        if (this.isUnique(g, r))\n          return g;\n        const f = this.buildNodeSelector(u, d, {\n          excludeClasses: !0\n          // KEY: no classes on target in Strategy 0\n        }), m = [\n          c,\n          ...l.slice(0, -1),\n          f\n        ].join(\" \");\n        return this.isUnique(m, r) ? m : null;\n      },\n      // ============================================================\n      // Strategy 1: anchor > parent[attrs|class|nth] > target[attrs_only]\n      // Full path with '>' combinator\n      // Parents: disambiguated using attrs > stable class > nth-of-type\n      // Target: ONLY attributes, NO classes\n      // ============================================================\n      () => {\n        const c = [this.buildNodeSelector(s.anchor.tag, s.anchor.semantics)], u = /* @__PURE__ */ new Map();\n        let d = 0;\n        for (let h = 0; h < a.length - 1; h++) {\n          const g = a[h], f = g.tagName.toLowerCase();\n          d < s.path.length && s.path[d].tag === f ? (u.set(g, s.path[d]), d++) : u.set(g, null);\n        }\n        for (let h = 0; h < a.length; h++) {\n          const g = a[h], f = g.tagName.toLowerCase();\n          if (h < a.length - 1) {\n            const S = u.get(g) || null, y = this.disambiguateParent(g, f, S, c, r);\n            c.push(y);\n            continue;\n          }\n          const m = this.buildNodeSelector(\n            s.target.tag,\n            s.target.semantics,\n            { excludeClasses: !0 }\n            // KEY: no classes on target\n          ), p = g.parentElement;\n          p && [\"td\", \"th\", \"tr\", \"thead\", \"tbody\", \"tfoot\"].includes(f) && Array.from(p.children).filter(\n            (y) => y.tagName.toLowerCase() === f\n          ).length > 1 ? c.push(`${m}${this.getNthSelector(g, f)}`) : c.push(m);\n        }\n        const l = c.join(\" > \");\n        return this.isUnique(l, r) ? l : null;\n      },\n      // ============================================================\n      // Strategy 2: anchor parent[attrs|class|nth] target[attrs_only]\n      // Descendant combinator (space) - more flexible\n      // Parents: disambiguated using attrs > stable class > nth-of-type\n      // Target: ONLY attributes, NO classes\n      // ============================================================\n      () => {\n        const u = [this.buildNodeSelector(s.anchor.tag, s.anchor.semantics)];\n        for (let h = 0; h < a.length - 1; h++) {\n          const f = a[h].tagName.toLowerCase(), m = s.path[h] || null, p = u.join(\" \") + \" \" + f;\n          if (this.querySelectorSafe(p, r).length > 1) {\n            if (m?.semantics?.attributes) {\n              const x = this.buildNodeSelector(f, m.semantics, {\n                excludeClasses: !0\n              }), b = u.join(\" \") + \" \" + x;\n              if (this.querySelectorSafe(b, r).length === 1 || this.querySelectorSafe(b + \" \" + s.target.tag, r).length === 1) {\n                u.push(x);\n                continue;\n              }\n            }\n            if (m?.semantics?.classes) {\n              const x = M(m.semantics.classes);\n              if (x.length > 0) {\n                const b = `${f}.${this.escapeCSS(x[0])}`, $ = u.join(\" \") + \" \" + b;\n                if (this.querySelectorSafe($, r).length === 1 || this.querySelectorSafe($ + \" \" + s.target.tag, r).length === 1) {\n                  u.push(b);\n                  continue;\n                }\n              }\n            }\n            const y = a[h], w = y.parentElement;\n            if (w && Array.from(w.children).filter(\n              (b) => b.tagName.toLowerCase() === f\n            ).length > 1) {\n              u.push(`${f}${this.getNthSelector(y, f)}`);\n              continue;\n            }\n          }\n          u.push(f);\n        }\n        const d = this.buildNodeSelector(\n          s.target.tag,\n          s.target.semantics,\n          { excludeClasses: !0 }\n          // KEY: no classes on target\n        );\n        u.push(d);\n        const l = u.join(\" \");\n        return this.isUnique(l, r) ? l : null;\n      },\n      // ============================================================\n      // Strategy 3: anchor path target[attrs + 1_stable_class]\n      // Add ONE stable class to target (must be semantic, NOT utility)\n      // Only use this if attrs alone are not sufficient\n      // ============================================================\n      () => {\n        const c = this.buildNodeSelector(s.anchor.tag, s.anchor.semantics), u = [];\n        for (const g of s.path)\n          u.push(g.tag);\n        if (M(s.target.semantics.classes ?? []).length === 0)\n          return null;\n        const l = this.buildNodeSelector(\n          s.target.tag,\n          s.target.semantics,\n          { maxClasses: 1 }\n          // KEY: ONE stable class only\n        ), h = [c, ...u.slice(0, -1), l].join(\" \");\n        return this.isUnique(h, r) ? h : null;\n      },\n      // ============================================================\n      // Strategy 4: anchor path target[attrs]:nth-of-type(N)\n      // Last resort - add nth-of-type to target\n      // Only use when all other strategies fail\n      // ============================================================\n      () => {\n        const c = this.buildNodeSelector(s.anchor.tag, s.anchor.semantics), u = [];\n        for (const m of s.path)\n          u.push(m.tag);\n        const d = a[a.length - 1], l = d.parentElement;\n        if (!l || Array.from(l.children).filter(\n          (m) => m.tagName.toLowerCase() === s.target.tag\n        ).length <= 1) return null;\n        const g = this.buildNodeSelector(\n          s.target.tag,\n          s.target.semantics,\n          { excludeClasses: !0 }\n          // No classes, just attrs + nth\n        ) + this.getNthSelector(d, s.target.tag), f = [c, ...u.slice(0, -1), g].join(\" \");\n        return this.isUnique(f, r) ? f : null;\n      }\n    ];\n    for (const c of o) {\n      const u = c();\n      if (u) return u;\n    }\n    return null;\n  }\n  /**\n   * Builds a minimal selector for a DOM element\n   * @param element The DOM element to create a selector for\n   * @returns A minimal CSS selector for the element\n   */\n  buildElementSelector(t) {\n    const e = t.tagName.toLowerCase();\n    let s = e;\n    if (t.id && !D(t.id))\n      return `${e}#${this.escapeCSS(t.id)}`;\n    const r = Array.from(t.classList), a = M(r);\n    a.length > 0 && (s += a.slice(0, 2).map((o) => `.${this.escapeCSS(o)}`).join(\"\"));\n    const i = t.getAttribute(\"role\");\n    return i && (s += `[role=\"${this.escapeAttr(i)}\"]`), s;\n  }\n  /**\n   * Safe querySelectorAll that doesn't throw\n   */\n  querySelectorSafe(t, e) {\n    try {\n      return Array.from(e.querySelectorAll(t));\n    } catch {\n      return [];\n    }\n  }\n  /**\n   * Finds element by matching text content\n   * Returns the matching element (used with getNthSelector for table-aware positioning)\n   */\n  findNthElementByText(t, e, s) {\n    const r = this.querySelectorSafe(t, s);\n    if (r.length <= 1) return null;\n    if (e.text) {\n      const a = e.text.normalized;\n      for (const i of r) {\n        const o = i.textContent?.trim() || \"\";\n        if (o === a || o.includes(a) || a.includes(o))\n          return i;\n      }\n    }\n    return null;\n  }\n  /**\n   * Checks if selector matches exactly one element\n   */\n  isUnique(t, e) {\n    try {\n      return e.querySelectorAll(t).length === 1;\n    } catch {\n      return !1;\n    }\n  }\n  /**\n   * Gets nth-of-type index for an element\n   */\n  getNthOfTypeIndex(t, e) {\n    const s = t.parentElement;\n    if (!s) return null;\n    const a = Array.from(s.children).filter((i) => i.tagName.toLowerCase() === e).indexOf(t);\n    return a !== -1 ? a + 1 : null;\n  }\n  /**\n   * FIX 2: Ensures anchor selector is unique in the document\n   * Priority order: tag โ tag.class โ tag[attr] โ tag:nth-of-type(N)\n   * @param eid - Element Identity with anchor information\n   * @param root - Root element for uniqueness check\n   * @returns Unique selector for anchor\n   */\n  ensureUniqueAnchor(t, e) {\n    const s = t.anchor.tag, r = t.anchor.semantics;\n    if (this.isUnique(s, e))\n      return s;\n    if (r.classes && r.classes.length > 0) {\n      const i = M(r.classes);\n      if (i.length > 0) {\n        const o = `${s}.${this.escapeCSS(i[0])}`;\n        if (this.isUnique(o, e))\n          return o;\n      }\n    }\n    if (r.attributes) {\n      const i = this.getSortedAttributes(r.attributes);\n      for (const { name: o, value: c } of i) {\n        const u = o === \"href\" || o === \"src\" ? k(o, c) : c;\n        if (u) {\n          const d = `${s}[${o}=\"${this.escapeAttr(u)}\"]`;\n          if (this.isUnique(d, e))\n            return d;\n        }\n      }\n    }\n    if (t.anchor.nthChild !== void 0) {\n      const i = `${s}:nth-child(${t.anchor.nthChild})`;\n      if (this.isUnique(i, e))\n        return i;\n    }\n    const a = Array.from(e.querySelectorAll(s));\n    if (a.length > 1) {\n      const i = this.findElementBySemantics(a, r);\n      if (i) {\n        const o = this.getNthOfTypeIndex(i, s);\n        if (o)\n          return `${s}:nth-of-type(${o})`;\n      }\n    }\n    return s;\n  }\n  /**\n   * FIX 2: Finds element by matching semantics\n   * @param elements - Array of candidate elements\n   * @param semantics - Semantics to match against\n   * @returns Matching element or null\n   */\n  findElementBySemantics(t, e) {\n    return e.classes && e.classes.length > 0 || e.attributes && Object.keys(e.attributes).length > 0 || e.text ? t.find((r) => {\n      if (e.classes && e.classes.length > 0 && e.classes.every((i) => r.classList.contains(i)) || e.attributes && Object.entries(e.attributes).every(\n        ([i, o]) => r.getAttribute(i) === o\n      ))\n        return !0;\n      if (e.text) {\n        const a = r.textContent?.trim() || \"\", i = e.text.normalized;\n        if (a.includes(i) || i.includes(a))\n          return !0;\n      }\n      return !1;\n    }) || null : t.length > 0 ? t[0] : null;\n  }\n  /**\n   * FIX 3: Gets nth selector - nth-child for tables, nth-of-type for others\n   * This method is now ACTIVELY INTEGRATED in selector generation logic\n   * to ensure table elements use position-specific nth-child selectors\n   * @param element - Element to get selector for\n   * @param tag - Tag name\n   * @returns nth selector string (e.g., \":nth-child(2)\" or \":nth-of-type(2)\")\n   */\n  getNthSelector(t, e) {\n    const s = t.parentElement;\n    if (!s) return \"\";\n    const r = Array.from(s.children), a = r.indexOf(t) + 1;\n    return [\"tr\", \"td\", \"th\", \"thead\", \"tbody\", \"tfoot\"].includes(e) ? `:nth-child(${a})` : `:nth-of-type(${r.filter((c) => c.tagName.toLowerCase() === e).indexOf(t) + 1})`;\n  }\n  /**\n   * Gets attribute priority for sorting\n   * @param attrName - Attribute name\n   * @returns Priority number (higher = more priority)\n   */\n  getAttributePriority(t) {\n    return E[t] !== void 0 ? E[t] : t.startsWith(\"data-\") ? E[\"data-*\"] : t.startsWith(\"aria-\") ? E[\"aria-*\"] : 0;\n  }\n  /**\n   * Checks if attribute should be ignored\n   * @param attrName - Attribute name\n   * @returns True if should be ignored\n   */\n  shouldIgnoreAttribute(t) {\n    return !!(B.has(t) || t.startsWith(\"on\") || t.startsWith(\"ng-\") || t.startsWith(\"_ng\") || t.startsWith(\"data-reactid\") || t.startsWith(\"data-react\") || t.startsWith(\"data-v-\"));\n  }\n  /**\n   * Gets attributes sorted by priority\n   * @param attributes - Attributes object\n   * @returns Sorted array of attributes with priority\n   */\n  getSortedAttributes(t) {\n    return Object.entries(t).filter(([e]) => !this.shouldIgnoreAttribute(e)).filter(\n      ([e, s]) => !G.has(e) || !V(s)\n    ).map(([e, s]) => ({\n      name: e,\n      value: s,\n      priority: this.getAttributePriority(e)\n    })).filter((e) => e.priority > 0).sort((e, s) => s.priority - e.priority);\n  }\n  /**\n   * Builds selector for a single node\n   * Priority: ID โ semantic attributes โ role โ classes\n   */\n  buildNodeSelector(t, e, s) {\n    let r = t;\n    if (e.id)\n      return r += `#${this.escapeCSS(e.id)}`, r;\n    if (e.attributes) {\n      const a = this.getSortedAttributes(e.attributes);\n      for (const { name: i, value: o } of a) {\n        const c = i === \"href\" || i === \"src\" ? k(i, o) : o;\n        c && (r += `[${i}=\"${this.escapeAttr(c)}\"]`);\n      }\n    }\n    if (e.role && !e.attributes?.role && (r += `[role=\"${this.escapeAttr(e.role)}\"]`), !s?.excludeClasses && e.classes && e.classes.length > 0) {\n      const a = M(e.classes), i = s?.maxClasses !== void 0 ? a.slice(0, s.maxClasses) : a;\n      r += i.map((o) => `.${this.escapeCSS(o)}`).join(\"\");\n    }\n    return r;\n  }\n  /**\n   * Escapes special characters for CSS selector\n   */\n  escapeCSS(t) {\n    let e = t;\n    return e.startsWith(\"-\") && (e = \"\\\\-\" + e.slice(1)), e = e.replace(/([!\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~])/g, \"\\\\$1\"), e;\n  }\n  /**\n   * Escapes quotes for attribute values\n   */\n  escapeAttr(t) {\n    return t.replace(/\"/g, '\\\\\"').replace(/\\\\/g, \"\\\\\\\\\");\n  }\n  /**\n   * Checks if element tag is an SVG child element\n   * @param tag - Element tag name\n   * @returns True if element is an SVG child\n   */\n  isSvgChildElement(t) {\n    return ut.includes(t);\n  }\n  /**\n   * Builds CSS selector for elements inside <head>.\n   * Uses child combinator (>) for strict structure: html > head > ... > target\n   * @param eid - Element Identity with anchor=html and path[0]=head\n   * @param options - Optional uniqueness control settings\n   * @returns CSS selector string or BuildSelectorResult\n   * @remarks\n   * This method handles the special case where elements are inside <head>.\n   * The selector always uses child combinators for strict parent-child relationships.\n   * @example\n   * For <html><head><meta name=\"description\"></head></html>\n   * Returns: \"html > head > meta[name='description']\"\n   */\n  buildHeadSelector(t, e) {\n    const s = [\"html\"];\n    for (const o of t.path) {\n      let c = this.buildNodeSelector(o.tag, o.semantics);\n      o.nthChild !== void 0 && (c += `:nth-child(${o.nthChild})`), s.push(c);\n    }\n    let r = this.buildNodeSelector(t.target.tag, t.target.semantics);\n    t.target.nthChild !== void 0 && (r += `:nth-child(${t.target.nthChild})`), s.push(r);\n    const a = s.join(\" > \");\n    if (!e?.ensureUnique)\n      return a;\n    const i = this.isUnique(a, e.root ?? document);\n    return {\n      selector: a,\n      isUnique: i,\n      usedNthOfType: a.includes(\":nth-\"),\n      extraClassesAdded: 0\n    };\n  }\n}\nclass Bt {\n  /**\n   * Filters elements that match the semantics\n   * @param elements - Candidate elements\n   * @param semantics - Target semantics to match\n   * @returns Filtered elements that match\n   */\n  match(t, e) {\n    return t.filter((s) => this.matchElement(s, e));\n  }\n  /**\n   * Checks if a single element matches the semantics\n   */\n  matchElement(t, e) {\n    return !(e.text && !this.matchText(t, e.text) || e.attributes && !this.matchAttributes(t, e.attributes) || e.svg && !this.matchSvgFingerprint(t, e.svg));\n  }\n  /**\n   * Matches text content\n   * Prioritizes direct text nodes, but falls back to full textContent if no direct text\n   */\n  matchText(t, e) {\n    const a = Array.from(t.childNodes).filter(\n      (o) => o.nodeType === Node.TEXT_NODE\n    ).map((o) => o.textContent?.trim() ?? \"\").join(\" \") || (t.textContent?.trim() ?? \"\");\n    if (!a) return !1;\n    const i = Q(a);\n    return e.matchMode === \"partial\" ? i.includes(e.normalized) : i === e.normalized;\n  }\n  /**\n   * Matches attributes\n   */\n  matchAttributes(t, e) {\n    for (const [s, r] of Object.entries(e))\n      if (t.getAttribute(s) !== r)\n        return !1;\n    return !0;\n  }\n  /**\n   * Matches SVG fingerprint\n   */\n  matchSvgFingerprint(t, e) {\n    if (t.tagName.toLowerCase() !== e.shape)\n      return !1;\n    if (e.dHash && e.shape === \"path\") {\n      const s = t.getAttribute(\"d\");\n      if (s && this.computePathHash(s) !== e.dHash)\n        return !1;\n    }\n    return !(e.geomHash && [\"circle\", \"rect\", \"ellipse\", \"line\"].includes(e.shape) && this.computeGeomHash(t, e.shape) !== e.geomHash || e.titleText && t.querySelector(\"title\")?.textContent?.trim() !== e.titleText);\n  }\n  /**\n   * Computes simple path hash (matching SvgFingerprinter)\n   */\n  computePathHash(t) {\n    const r = (t.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi) ?? []).slice(0, 5).map((a) => a.trim().replace(/(-?\\d+\\.?\\d*)/g, (i) => parseFloat(i).toFixed(1))).join(\" \");\n    return this.simpleHash(r);\n  }\n  /**\n   * Computes geometry hash for non-path shapes (matching SvgFingerprinter)\n   */\n  computeGeomHash(t, e) {\n    const s = [];\n    switch (e) {\n      case \"circle\":\n        s.push(`r=${t.getAttribute(\"r\") ?? \"0\"}`);\n        break;\n      case \"rect\": {\n        const r = parseFloat(t.getAttribute(\"width\") ?? \"0\"), a = parseFloat(t.getAttribute(\"height\") ?? \"0\");\n        r > 0 && a > 0 && s.push(`ratio=${(r / a).toFixed(2)}`);\n        break;\n      }\n      case \"ellipse\": {\n        const r = parseFloat(t.getAttribute(\"rx\") ?? \"0\"), a = parseFloat(t.getAttribute(\"ry\") ?? \"0\");\n        r > 0 && a > 0 && s.push(`ratio=${(r / a).toFixed(2)}`);\n        break;\n      }\n      case \"line\": {\n        const r = parseFloat(t.getAttribute(\"x1\") ?? \"0\"), a = parseFloat(t.getAttribute(\"y1\") ?? \"0\"), i = parseFloat(t.getAttribute(\"x2\") ?? \"0\"), o = parseFloat(t.getAttribute(\"y2\") ?? \"0\"), c = Math.atan2(o - a, i - r);\n        s.push(`angle=${c.toFixed(2)}`);\n        break;\n      }\n    }\n    return this.simpleHash(s.join(\";\"));\n  }\n  /**\n   * Simple hash function (matching SvgFingerprinter)\n   */\n  simpleHash(t) {\n    let e = 0;\n    for (let s = 0; s < t.length; s++) {\n      const r = t.charCodeAt(s);\n      e = (e << 5) - e + r, e = e & e;\n    }\n    return Math.abs(e).toString(16).padStart(8, \"0\");\n  }\n}\nclass Gt {\n  /**\n   * Applies a single constraint to candidates\n   * @param candidates - Current candidate elements\n   * @param constraint - Constraint to apply\n   * @returns Filtered candidates\n   */\n  applyConstraint(t, e) {\n    switch (e.type) {\n      case \"text-proximity\":\n        return this.applyTextProximity(\n          t,\n          e.params\n        );\n      case \"position\":\n        return this.applyPosition(t, e.params);\n      default:\n        return t;\n    }\n  }\n  /**\n   * Applies text proximity constraint using Levenshtein distance\n   */\n  applyTextProximity(t, e) {\n    return t.filter((s) => {\n      const r = s.textContent?.trim() ?? \"\";\n      return this.levenshteinDistance(r, e.reference) <= e.maxDistance;\n    });\n  }\n  /**\n   * Applies position constraint\n   */\n  applyPosition(t, e) {\n    if (t.length <= 1) return t;\n    switch (e.strategy) {\n      case \"first-in-dom\":\n        return [t[0]];\n      case \"top-most\":\n        return [this.getTopMost(t)];\n      case \"left-most\":\n        return [this.getLeftMost(t)];\n      default:\n        return [t[0]];\n    }\n  }\n  /**\n   * Gets the top-most element by bounding rect\n   */\n  getTopMost(t) {\n    return t.reduce((e, s) => {\n      try {\n        const r = e.getBoundingClientRect();\n        return s.getBoundingClientRect().top < r.top ? s : e;\n      } catch {\n        return e;\n      }\n    });\n  }\n  /**\n   * Gets the left-most element by bounding rect\n   */\n  getLeftMost(t) {\n    return t.reduce((e, s) => {\n      try {\n        const r = e.getBoundingClientRect();\n        return s.getBoundingClientRect().left < r.left ? s : e;\n      } catch {\n        return e;\n      }\n    });\n  }\n  /**\n   * Calculates Levenshtein distance between two strings\n   */\n  levenshteinDistance(t, e) {\n    if (t === e) return 0;\n    if (t.length === 0) return e.length;\n    if (e.length === 0) return t.length;\n    const s = Array.from({ length: e.length + 1 }, (r, a) => a);\n    for (let r = 1; r <= t.length; r++) {\n      let a = r;\n      for (let i = 1; i <= e.length; i++) {\n        const o = t[r - 1] === e[i - 1] ? s[i - 1] : Math.min(s[i - 1], a, s[i]) + 1;\n        s[i - 1] = a, a = o;\n      }\n      s[e.length] = a;\n    }\n    return s[e.length];\n  }\n}\nclass Vt {\n  constructor() {\n    this.cssGenerator = new rt();\n  }\n  /**\n   * Handles fallback when resolution fails\n   * @param eid - Element Identity being resolved\n   * @param dom - Document or element to search in\n   * @returns Fallback resolution result\n   */\n  handleFallback(t, e) {\n    const { onMissing: s } = t.fallback;\n    switch (s) {\n      case \"anchor-only\":\n        return this.fallbackToAnchor(t, e);\n      case \"strict\":\n        return {\n          status: \"error\",\n          elements: [],\n          warnings: [\"Element not found (strict mode)\"],\n          confidence: 0,\n          meta: { degraded: !0, degradationReason: \"strict-not-found\" }\n        };\n      default:\n        return {\n          status: \"error\",\n          elements: [],\n          warnings: [\"Element not found\"],\n          confidence: 0,\n          meta: { degraded: !0, degradationReason: \"not-found\" }\n        };\n    }\n  }\n  /**\n   * Attempts to find and return the anchor element as fallback\n   */\n  fallbackToAnchor(t, e) {\n    const s = this.cssGenerator.buildAnchorSelector(t), r = e instanceof Document ? e : e.ownerDocument ?? e;\n    try {\n      const a = r.querySelector(s);\n      if (a)\n        return {\n          status: \"degraded-fallback\",\n          elements: [a],\n          warnings: [\"Target not found, returning anchor\"],\n          confidence: t.meta.confidence * 0.3,\n          meta: { degraded: !0, degradationReason: \"anchor-fallback\" }\n        };\n    } catch (a) {\n      const i = a instanceof Error ? a.message : \"Unknown selector error\";\n      return {\n        status: \"error\",\n        elements: [],\n        warnings: [`Invalid anchor selector: ${i}`],\n        confidence: 0,\n        meta: { degraded: !0, degradationReason: \"invalid-anchor-selector\" }\n      };\n    }\n    return {\n      status: \"error\",\n      elements: [],\n      warnings: [\"Anchor also not found\"],\n      confidence: 0,\n      meta: { degraded: !0, degradationReason: \"anchor-not-found\" }\n    };\n  }\n  /**\n   * Handles ambiguous results (multiple matches)\n   * @param elements - All matching elements\n   * @param eid - Original Element Identity\n   * @returns Resolution result based on fallback rules\n   */\n  handleAmbiguous(t, e) {\n    const { onMultiple: s } = e.fallback;\n    switch (s) {\n      case \"first\":\n        return {\n          status: \"success\",\n          elements: [t[0]],\n          warnings: [\"Multiple matches, returning first\"],\n          confidence: e.meta.confidence * 0.7,\n          meta: { degraded: !0, degradationReason: \"first-of-multiple\" }\n        };\n      case \"best-score\":\n        return this.selectBestScoring(t, e);\n      default:\n        return {\n          status: \"ambiguous\",\n          elements: t,\n          warnings: [`Multiple matches: ${t.length}`],\n          confidence: e.meta.confidence * 0.5,\n          meta: { degraded: !0, degradationReason: \"multiple-matches\" }\n        };\n    }\n  }\n  /**\n   * Selects the best-scoring element from candidates\n   * Re-scores each element based on semantic match quality\n   */\n  selectBestScoring(t, e) {\n    const s = e.target.semantics;\n    let r = t[0], a = -1;\n    for (const i of t) {\n      const o = this.scoreElementMatch(i, s);\n      o > a && (a = o, r = i);\n    }\n    return {\n      status: \"success\",\n      elements: [r],\n      warnings: [`Multiple matches (${t.length}), selected best-scoring element`],\n      confidence: e.meta.confidence * (0.7 + a * 0.2),\n      meta: { degraded: !0, degradationReason: \"best-of-multiple\" }\n    };\n  }\n  /**\n   * Scores how well an element matches the target semantics\n   * @returns Score from 0 to 1\n   */\n  scoreElementMatch(t, e) {\n    let s = 0, r = 0;\n    if (e.id && (r += 0.3, t.id === e.id && (s += 0.3)), e.classes && e.classes.length > 0) {\n      r += 0.25;\n      const a = Array.from(t.classList), i = e.classes.filter(\n        (o) => a.includes(o)\n      ).length;\n      s += i / e.classes.length * 0.25;\n    }\n    if (e.attributes) {\n      const a = Object.entries(e.attributes);\n      if (a.length > 0) {\n        r += 0.2;\n        let i = 0;\n        for (const [o, c] of a)\n          t.getAttribute(o) === c && i++;\n        s += i / a.length * 0.2;\n      }\n    }\n    if (e.role && (r += 0.15, t.getAttribute(\"role\") === e.role && (s += 0.15)), e.text) {\n      r += 0.1;\n      const a = Q(t.textContent);\n      a === e.text.normalized ? s += 0.1 : a.includes(e.text.normalized) && (s += 0.05);\n    }\n    return r > 0 ? s / r : 0;\n  }\n}\nfunction Qt(n, t, e = {}) {\n  const s = { ...ft, ...e }, r = new rt(), a = new Bt(), i = new Gt(), o = new Vt(), c = t instanceof Document ? t : t.ownerDocument ?? t, u = r.buildSelector(n, {\n    ensureUnique: !1,\n    root: c\n  });\n  let d;\n  try {\n    d = Array.from(c.querySelectorAll(u));\n  } catch (f) {\n    const m = f instanceof Error ? f.message : \"Unknown selector error\";\n    return {\n      status: \"error\",\n      elements: [],\n      warnings: [`Invalid CSS selector: ${u}`, `Error: ${m}`],\n      confidence: 0,\n      meta: { degraded: !0, degradationReason: \"invalid-selector\" }\n    };\n  }\n  d.length > s.maxCandidates && (d = d.slice(0, s.maxCandidates));\n  const l = a.match(d, n.target.semantics);\n  if (l.length === 1)\n    return {\n      status: \"success\",\n      elements: l,\n      warnings: [],\n      confidence: n.meta.confidence,\n      meta: { degraded: !1 }\n    };\n  if (l.length === 0)\n    return s.enableFallback ? o.handleFallback(n, c) : {\n      status: \"error\",\n      elements: [],\n      warnings: [\"No matching elements found\"],\n      confidence: 0,\n      meta: { degraded: !0, degradationReason: \"not-found\" }\n    };\n  let h = l;\n  const g = Yt(n.constraints);\n  for (const f of g) {\n    if (h = i.applyConstraint(h, f), h.length === 1)\n      return {\n        status: \"success\",\n        elements: h,\n        warnings: [],\n        confidence: n.meta.confidence * 0.9,\n        meta: { degraded: !1 }\n      };\n    if (h.length === 0)\n      return s.enableFallback ? o.handleFallback(n, c) : {\n        status: \"error\",\n        elements: [],\n        warnings: [\"Constraints eliminated all candidates\"],\n        confidence: 0,\n        meta: { degraded: !0, degradationReason: \"over-constrained\" }\n      };\n  }\n  return s.strictMode ? {\n    status: \"ambiguous\",\n    elements: h,\n    warnings: [`Non-unique resolution: ${h.length} matches`],\n    confidence: n.meta.confidence * 0.7,\n    meta: { degraded: !0, degradationReason: \"ambiguous\" }\n  } : o.handleAmbiguous(h, n);\n}\nfunction Yt(n) {\n  return [...n].sort((t, e) => e.priority - t.priority);\n}\nfunction he(n) {\n  const t = [], e = [];\n  if (n.version ? n.version !== \"1.0\" && e.push(`Unknown version: ${n.version}`) : t.push(\"Missing version field\"), n.anchor ? (n.anchor.tag || t.push(\"Anchor missing tag\"), typeof n.anchor.score != \"number\" && t.push(\"Anchor missing score\"), n.anchor.semantics || t.push(\"Anchor missing semantics\")) : t.push(\"Missing anchor field\"), n.target ? (n.target.tag || t.push(\"Target missing tag\"), typeof n.target.score != \"number\" && t.push(\"Target missing score\"), n.target.semantics || t.push(\"Target missing semantics\")) : t.push(\"Missing target field\"), !Array.isArray(n.path))\n    t.push(\"Path must be an array\");\n  else\n    for (let s = 0; s < n.path.length; s++) {\n      const r = n.path[s];\n      r.tag || t.push(`Path node ${s} missing tag`), r.semantics || t.push(`Path node ${s} missing semantics`);\n    }\n  return n.meta ? (typeof n.meta.confidence != \"number\" && e.push(\"Missing confidence score\"), n.meta.generatedAt || e.push(\"Missing generatedAt timestamp\")) : t.push(\"Missing meta field\"), Array.isArray(n.constraints) || e.push(\"Constraints should be an array\"), n.fallback || e.push(\"Missing fallback rules\"), {\n    valid: t.length === 0,\n    errors: t,\n    warnings: e\n  };\n}\nfunction ue(n) {\n  if (!n || typeof n != \"object\") return !1;\n  const t = n;\n  return typeof t.version == \"string\" && typeof t.anchor == \"object\" && Array.isArray(t.path) && typeof t.target == \"object\";\n}\nconst nt = {\n  maxClasses: 2,\n  maxAttributes: 5,\n  includeText: !0,\n  maxTextLength: 50,\n  simplifyTarget: !0,\n  includeConstraints: !0\n};\nfunction st(n) {\n  return n === \"id\" ? 101 : E[n] !== void 0 ? E[n] : n.startsWith(\"data-\") ? E[\"data-*\"] : n.startsWith(\"aria-\") ? E[\"aria-*\"] : 0;\n}\nfunction Zt(n) {\n  return [\"id\", \"data-testid\", \"data-qa\", \"data-cy\", \"href\", \"text\", \"role\"].includes(n);\n}\nfunction Xt(n) {\n  return !!(/@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/.test(n) || /(\\+?\\d{1,3}[-.\\s]?)?\\(?\\d{3}\\)?[-.\\s]?\\d{3}[-.\\s]?\\d{4}/.test(n) || /\\d{4}[-\\s]?\\d{4}[-\\s]?\\d{4}[-\\s]?\\d{4}/.test(n));\n}\nfunction Kt(n, t) {\n  const e = { ...nt, ...t }, s = `v${n.version}`, r = z(n.anchor, !1, e), a = n.path.length > 0 ? n.path.map((c) => z(c, !1, e)).join(\" > \") + \" > \" : \"\", i = z(n.target, !0, e), o = e.includeConstraints ? te(n) : \"\";\n  return `${s}: ${r} :: ${a}${i}${o}`;\n}\nfunction Jt(n) {\n  n = n.trim();\n  const t = n.match(/^v(\\d+(?:\\.\\d+)?)\\s*:\\s*/);\n  if (!t)\n    throw new Error('Invalid SEQL Selector: missing version prefix (expected \"v1:\")');\n  const e = t[1];\n  if (e !== \"1.0\" && e !== \"1\")\n    throw new Error(`Unsupported SEQL Selector version: v${e} (only v1.0 is supported)`);\n  let s = n.slice(t[0].length);\n  const r = s.match(/^(.+?)\\s*::\\s*/);\n  if (!r)\n    throw new Error('Invalid SEQL Selector: missing anchor separator \"::\"');\n  const a = r[1].trim();\n  s = s.slice(r[0].length);\n  const i = s.match(/\\s*\\{([^}]+)\\}\\s*$/);\n  let o = \"\";\n  i && (o = i[1], s = s.slice(0, i.index));\n  const c = s.split(/\\s*>\\s*/).map((p) => p.trim()).filter((p) => p);\n  if (c.length === 0)\n    throw new Error(\"Invalid SEQL Selector: missing target node\");\n  const u = c[c.length - 1], d = c.slice(0, -1), l = F(a, !0), h = d.map((p) => F(p, !1)), g = F(u, !1), f = ee(o);\n  return {\n    version: \"1.0\",\n    anchor: l,\n    path: h,\n    target: g,\n    constraints: f,\n    fallback: {\n      onMultiple: \"best-score\",\n      onMissing: \"anchor-only\",\n      maxDepth: 10\n    },\n    meta: {\n      confidence: 0.7,\n      generatedAt: (/* @__PURE__ */ new Date()).toISOString(),\n      generator: \"seql-parser@1.0\",\n      source: \"seql-string\",\n      degraded: !1\n    }\n  };\n}\nfunction z(n, t = !1, e = nt) {\n  const { tag: s, semantics: r } = n;\n  let a = s;\n  const i = [], o = { ...r.attributes };\n  r.id && (o.id = r.id), r.role && !o.role && (o.role = r.role);\n  const c = Object.entries(o).map(([l, h]) => {\n    const g = st(l), f = l === \"href\" || l === \"src\" ? k(l, h) : h;\n    return { name: l, value: f, priority: g };\n  }).filter((l) => l.name !== \"id\" && l.name !== \"class\" && B.has(l.name) || G.has(l.name) && V(l.value) ? !1 : l.priority > 0 || l.name === \"role\" || l.name === \"id\");\n  c.sort((l, h) => h.priority - l.priority);\n  const u = c.slice(0, e.maxAttributes);\n  u.sort((l, h) => l.name.localeCompare(h.name));\n  for (const { name: l, value: h } of u)\n    i.push(`${l}=\"${j(h)}\"`);\n  if (e.includeText && r.text && !Xt(r.text.normalized)) {\n    const l = r.text.normalized;\n    l.length > 0 && l.length <= e.maxTextLength && i.push(`text=\"${j(l)}\"`);\n  }\n  let d = i;\n  if (i.length > 0 && (t && e.simplifyTarget && r.id && (d = i.filter((l) => {\n    const h = l.split(\"=\")[0];\n    return st(h) >= 60 || h === \"text\" || h === \"id\" || h === \"role\";\n  })), d.length > 0 && d.sort((l, h) => l.localeCompare(h))), r.classes && r.classes.length > 0) {\n    const l = M(r.classes), h = !!r.id || i.some(\n      (f) => f.startsWith(\"href=\") || f.startsWith(\"data-testid=\") || f.startsWith(\"text=\") || f.startsWith(\"role=\")\n    );\n    if (!(t && e.simplifyTarget && h) && l.length > 0) {\n      const f = l.sort().slice(0, e.maxClasses);\n      a += f.map((m) => `.${m}`).join(\"\");\n    }\n  }\n  if (d.length > 0 && (a += `[${d.join(\",\")}]`), \"nthChild\" in n && n.nthChild) {\n    const l = !!r.id || r.attributes && Object.keys(r.attributes).some(Zt);\n    t && e.simplifyTarget && l || (a += `#${n.nthChild}`);\n  }\n  return a;\n}\nfunction te(n) {\n  if (!n.constraints || n.constraints.length === 0)\n    return \"\";\n  const t = [];\n  for (const e of n.constraints)\n    switch (e.type) {\n      case \"uniqueness\":\n        t.push(\"unique=true\");\n        break;\n      case \"position\":\n        e.params && e.params.strategy && t.push(`pos=${e.params.strategy}`);\n        break;\n      case \"text-proximity\":\n        if (e.params && e.params.reference) {\n          const s = j(String(e.params.reference));\n          t.push(`text=\"${s}\"`);\n        }\n        break;\n    }\n  return t.length === 0 ? \"\" : ` {${t.join(\",\")}}`;\n}\nfunction F(n, t) {\n  let e = n;\n  const s = {}, r = e.match(/^([a-z][a-z0-9-]*)/);\n  if (!r)\n    throw new Error(`Invalid node: missing tag name in \"${n}\"`);\n  const a = r[1];\n  e = e.slice(a.length);\n  const i = [];\n  let o;\n  for (; o = e.match(/^\\.([a-zA-Z][a-zA-Z0-9-_]*)/); )\n    i.push(o[1]), e = e.slice(o[0].length);\n  i.length > 0 && (s.classes = i);\n  const c = e.match(/^\\[([^\\]]+)\\]/);\n  if (c) {\n    const l = c[1], h = {}, g = se(l);\n    for (const f of g) {\n      const m = f.match(/^([a-z][a-z0-9-]*)(?:=|~=)\"((?:[^\"\\\\]|\\\\.)*)\"/);\n      if (m) {\n        const [, p, S] = m;\n        h[p] = at(S);\n      }\n    }\n    Object.keys(h).length > 0 && (h.text && (s.text = {\n      raw: h.text,\n      normalized: h.text\n    }, delete h.text), h.id && (s.id = h.id, delete h.id), h.role && (s.role = h.role, delete h.role), Object.keys(h).length > 0 && (s.attributes = h)), e = e.slice(c[0].length);\n  }\n  let u;\n  const d = e.match(/^#(\\d+)/);\n  if (d && (u = parseInt(d[1], 10), e = e.slice(d[0].length)), e.trim())\n    throw new Error(`Invalid node: unexpected content \"${e}\" in \"${n}\"`);\n  return t ? {\n    tag: a,\n    semantics: s,\n    score: 0.7,\n    degraded: !1\n  } : {\n    tag: a,\n    semantics: s,\n    score: 0.7,\n    nthChild: u\n  };\n}\nfunction ee(n) {\n  if (!n.trim())\n    return [];\n  const t = [], e = n.split(\",\").map((s) => s.trim());\n  for (const s of e) {\n    const [r, a] = s.split(\"=\").map((i) => i.trim());\n    switch (r) {\n      case \"unique\":\n        a === \"true\" && t.push({\n          type: \"uniqueness\",\n          params: {\n            mode: \"strict\"\n          },\n          priority: 90\n        });\n        break;\n      case \"pos\":\n        t.push({\n          type: \"position\",\n          params: {\n            strategy: a\n          },\n          priority: 70\n        });\n        break;\n      case \"text\": {\n        const i = a.replace(/^\"(.*)\"$/, \"$1\");\n        t.push({\n          type: \"text-proximity\",\n          params: {\n            reference: at(i),\n            maxDistance: 5\n          },\n          priority: 60\n        });\n        break;\n      }\n    }\n  }\n  return t;\n}\nfunction se(n) {\n  const t = [];\n  let e = \"\", s = !1;\n  for (let r = 0; r < n.length; r++) {\n    const a = n[r];\n    a === '\"' && (r === 0 || n[r - 1] !== \"\\\\\") ? (s = !s, e += a) : a === \",\" && !s ? (e.trim() && t.push(e.trim()), e = \"\") : e += a;\n  }\n  return e.trim() && t.push(e.trim()), t;\n}\nfunction j(n) {\n  return n.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"').replace(/>/g, \"\\\\>\").replace(/:/g, \"\\\\:\");\n}\nfunction at(n) {\n  return n.replace(/\\\\\\\\/g, \"\\0\").replace(/\\\\\"/g, '\"').replace(/\\\\>/g, \">\").replace(/\\\\:/g, \":\").replace(/\\x00/g, \"\\\\\");\n}\nfunction de(n, t, e) {\n  const s = Z(n, t);\n  return s ? Kt(s, e) : null;\n}\nfunction fe(n, t, e) {\n  try {\n    const s = Jt(n);\n    return Qt(s, t, e).elements || [];\n  } catch (s) {\n    return console.error(\"Failed to resolve SEQL Selector:\", s), [];\n  }\n}\nconst re = /* @__PURE__ */ new Set([\"script\", \"style\", \"noscript\", \"meta\", \"link\", \"head\", \"title\"]);\nfunction W(n) {\n  return n.id && !D(n.id) ? 3 : n.hasAttribute(\"role\") || n.hasAttribute(\"aria-label\") || n.hasAttribute(\"aria-labelledby\") || n.hasAttribute(\"data-testid\") || n.hasAttribute(\"data-qa\") || n.hasAttribute(\"data-test\") ? 2 : 1;\n}\nfunction it(n, t) {\n  const e = n.tagName.toLowerCase();\n  return !!(re.has(e) || t && W(n) === 1 && ![\n    \"form\",\n    \"main\",\n    \"nav\",\n    \"section\",\n    \"article\",\n    \"footer\",\n    \"header\",\n    \"button\",\n    \"a\",\n    \"input\",\n    \"label\",\n    \"select\",\n    \"textarea\"\n  ].includes(e));\n}\nfunction ot(n) {\n  return [...n].sort((t, e) => {\n    const s = W(t);\n    return W(e) - s;\n  });\n}\nfunction ge(n = {}) {\n  const t = performance.now(), {\n    root: e = typeof document < \"u\" ? document.body : void 0,\n    filter: s = \"*\",\n    limit: r = 1 / 0,\n    onProgress: a,\n    progressInterval: i = 100,\n    skipNonSemantic: o = !0,\n    generatorOptions: c = {},\n    cache: u,\n    signal: d\n  } = n;\n  if (!e)\n    throw new Error(\"Root element or document is required\");\n  const l = u ?? Y(), h = { ...c, cache: l };\n  let g;\n  try {\n    e instanceof Document, g = Array.from(e.querySelectorAll(s));\n  } catch {\n    return {\n      results: [],\n      failed: [],\n      stats: {\n        totalElements: 0,\n        successful: 0,\n        failed: 0,\n        skipped: 0,\n        totalTimeMs: 0,\n        avgTimePerElementMs: 0,\n        cacheHitRate: 0\n      }\n    };\n  }\n  const f = g.filter((C) => !it(C, o)), p = ot(f).slice(0, r), S = [], y = [];\n  let w = 0;\n  const x = p.length;\n  let b = 0;\n  for (let C = 0; C < p.length && !d?.aborted; C++) {\n    const v = p[C], A = l.getEID(v);\n    if (A)\n      S.push({\n        element: v,\n        eid: A,\n        generationTimeMs: 0\n        // Cached, no generation time\n      });\n    else {\n      const U = performance.now();\n      try {\n        const P = Z(v, h), ct = performance.now() - U;\n        P ? S.push({\n          element: v,\n          eid: P,\n          generationTimeMs: ct\n        }) : w++;\n      } catch (P) {\n        y.push({\n          element: v,\n          error: P instanceof Error ? P.message : String(P)\n        });\n      }\n    }\n    a && C - b >= i && (a(C + 1, x), b = C);\n  }\n  a && a(x, x);\n  const $ = performance.now() - t, I = l.getStats(), H = I.eidHits + I.eidMisses + I.selectorHits + I.selectorMisses, T = I.eidHits + I.selectorHits, R = H > 0 ? T / H : 0;\n  return {\n    results: S,\n    failed: y,\n    stats: {\n      totalElements: x,\n      successful: S.length,\n      failed: y.length,\n      skipped: w,\n      totalTimeMs: $,\n      avgTimePerElementMs: S.length > 0 ? $ / S.length : 0,\n      cacheHitRate: R\n    }\n  };\n}\nfunction me(n, t = {}) {\n  const e = performance.now(), {\n    limit: s = 1 / 0,\n    onProgress: r,\n    progressInterval: a = 100,\n    skipNonSemantic: i = !0,\n    generatorOptions: o = {},\n    cache: c,\n    signal: u\n  } = t, d = c ?? Y(), l = { ...o, cache: d }, h = n.filter((T) => !it(T, i)), f = ot(h).slice(0, s), m = [], p = [];\n  let S = 0;\n  const y = f.length;\n  let w = 0;\n  for (let T = 0; T < f.length && !u?.aborted; T++) {\n    const R = f[T], C = d.getEID(R);\n    if (C)\n      m.push({\n        element: R,\n        eid: C,\n        generationTimeMs: 0\n      });\n    else {\n      const v = performance.now();\n      try {\n        const A = Z(R, l), U = performance.now() - v;\n        A ? m.push({\n          element: R,\n          eid: A,\n          generationTimeMs: U\n        }) : S++;\n      } catch (A) {\n        p.push({\n          element: R,\n          error: A instanceof Error ? A.message : String(A)\n        });\n      }\n    }\n    r && T - w >= a && (r(T + 1, y), w = T);\n  }\n  r && r(y, y);\n  const x = performance.now() - e, b = d.getStats(), $ = b.eidHits + b.eidMisses + b.selectorHits + b.selectorMisses, I = b.eidHits + b.selectorHits, H = $ > 0 ? I / $ : 0;\n  return {\n    results: m,\n    failed: p,\n    stats: {\n      totalElements: y,\n      successful: m.length,\n      failed: p.length,\n      skipped: S,\n      totalTimeMs: x,\n      avgTimePerElementMs: m.length > 0 ? x / m.length : 0,\n      cacheHitRate: H\n    }\n  };\n}\nexport {\n  gt as AnchorFinder,\n  Gt as ConstraintsEvaluator,\n  rt as CssGenerator,\n  dt as DEFAULT_GENERATOR_OPTIONS,\n  ft as DEFAULT_RESOLVER_OPTIONS,\n  Ut as EIDCache,\n  ne as EID_VERSION,\n  Vt as FallbackHandler,\n  ae as MAX_PATH_DEPTH,\n  Ct as PathBuilder,\n  K as ROLE_ANCHOR_VALUES,\n  X as SEMANTIC_ANCHOR_TAGS,\n  ie as SEMANTIC_ATTRIBUTES,\n  ht as SEMANTIC_TAGS,\n  et as SemanticExtractor,\n  Bt as SemanticsMatcher,\n  _t as SvgFingerprinter,\n  qt as calculateConfidence,\n  ce as calculateElementScore,\n  zt as createEIDCache,\n  xt as filterClasses,\n  Z as generateEID,\n  ge as generateEIDBatch,\n  me as generateEIDForElements,\n  de as generateSEQL,\n  oe as getClassScore,\n  Y as getGlobalCache,\n  ue as isEID,\n  J as isUtilityClass,\n  Q as normalizeText,\n  Jt as parseSEQL,\n  le as resetGlobalCache,\n  Qt as resolve,\n  fe as resolveSEQL,\n  Kt as stringifySEQL,\n  he as validateEID\n};\n//# sourceMappingURL=seql-js.js.map\n","import { generateSEQL } from \"@whenessel/seql-js\";\n\n/**\n * Options for building SEQL selectors.\n * These options are passed to generateSEQL from @whenessel/seql-js.\n * @public\n * @remarks\n * See @whenessel/seql-js documentation for available options.\n */\nexport interface SelectorOptions {\n  // Options are passed through to generateSEQL\n  // Type is intentionally loose to allow future SEQL options\n  [key: string]: any;\n}\n\n/**\n * Generates a SEQL selector string for a given DOM element.\n * @public\n * @param element - The DOM element to generate a selector for\n * @param options - Optional configuration for SEQL generation\n * @returns A SEQL selector string, or null if the element cannot be processed\n * @remarks\n * SEQL (Semantic Element Query Language) provides stable element identification\n * that survives DOM restructuring and CSS changes. The selector format is:\n * \"v1: anchor :: path > target[attributes]\"\n */\nexport function buildSelector(\n  element: Element,\n  options: SelectorOptions = {},\n  onError?: (error: Error, element: Element) => void,\n): string | null {\n  if (!element || element.nodeType !== Node.ELEMENT_NODE) {\n    return null;\n  }\n\n  try {\n    const selector = generateSEQL(element, options, options);\n    return selector;\n  } catch (error) {\n    // Log error if callback provided, but still return null for backward compatibility\n    if (onError && error instanceof Error) {\n      onError(error, element);\n    }\n    return null;\n  }\n}\n","export { buildSelector, type SelectorOptions } from \"./selector/selector\";\n\n/**\n * Options used to configure event capture for the tracker.\n * @public\n * @remarks\n * All options are enabled by default for comprehensive tracking.\n */\nexport interface TrackerOptions {\n  send?: (data: Record<string, any>) => void;\n  captureText?: boolean;\n  captureSelector?: boolean;\n  debug?: boolean;\n  seqlOptions?: SelectorOptions;\n  events?: {\n    mouseUp?: boolean;\n    mouseDown?: boolean;\n    click?: boolean;\n    contextMenu?: boolean;\n    dblClick?: boolean;\n    focus?: boolean;\n    blur?: boolean;\n    touchStart?: boolean;\n    touchEnd?: boolean;\n    touchCancel?: boolean;\n    input?: boolean;\n    play?: boolean;\n    pause?: boolean;\n    seeked?: boolean;\n    volumeChange?: boolean;\n    rateChange?: boolean;\n  };\n}\n\nimport { buildSelector, type SelectorOptions } from \"./selector/selector\";\n\nlet handler: ((e: Event) => void) | null = null;\nlet waitForGtagTimer: ReturnType<typeof setInterval> | null = null;\nlet isManuallyInitialized = false;\nconst POLL_INTERVAL = 50;\nconst MAX_WAIT = 5000;\n\nconst isVitest = typeof import.meta !== \"undefined\" && !!(import.meta as any).vitest;\n\nconst DEFAULT_EVENTS = {\n  mouseUp: false,\n  mouseDown: false,\n  click: true,\n  contextMenu: true,\n  dblClick: true,\n  focus: true,\n  blur: true,\n  touchStart: true,\n  touchEnd: true,\n  touchCancel: true,\n  input: true,\n  play: true,\n  pause: true,\n  seeked: true,\n  volumeChange: true,\n  rateChange: true,\n};\n\n/**\n * Initializes the tracker and attaches DOM listeners for various events.\n * @public\n * @param options Capture configuration and a send callback invoked for each event.\n * @returns void\n * @remarks\n * Must be called in a browser-like environment; re-invocation resets existing listeners.\n */\nexport function initTracker(options: TrackerOptions = {}) {\n  // Mark as manually initialized to prevent auto-init from overriding\n  isManuallyInitialized = true;\n\n  const opts = {\n    send: (payload: Record<string, any>) => {\n      console.log(\"Event tracked:\", payload);\n    },\n    captureText: true,\n    captureSelector: true,\n    debug: false,\n    events: { ...DEFAULT_EVENTS, ...options.events },\n    ...options,\n  };\n  console.log(`initTracker: ${JSON.stringify(opts)}`);\n\n  // Remove existing listeners if any\n  if (handler) {\n    Object.keys(DEFAULT_EVENTS).forEach((eventName) => {\n      const mappedEventName =\n        eventName === \"dblClick\"\n          ? \"dblclick\"\n          : eventName === \"volumeChange\"\n            ? \"volumechange\"\n            : eventName === \"rateChange\"\n              ? \"ratechange\"\n              : eventName.toLowerCase();\n\n      document.removeEventListener(mappedEventName, handler as EventListener, { capture: true });\n    });\n  }\n\n  handler = (e: Event) => {\n    const el = e.target as Element | null;\n    if (!el) return;\n\n    // Check if this event type should be tracked\n    const eventKey =\n      e.type === \"dblclick\"\n        ? \"dblClick\"\n        : e.type === \"volumechange\"\n          ? \"volumeChange\"\n          : e.type === \"ratechange\"\n            ? \"rateChange\"\n            : Object.keys(DEFAULT_EVENTS).find((key) => key.toLowerCase() === e.type);\n\n    if (!eventKey || !opts.events[eventKey as keyof typeof DEFAULT_EVENTS]) return;\n\n    const payload: any = {\n      type: e.type,\n      tag: el.tagName.toLowerCase(),\n      ts: Date.now(),\n    };\n\n    if (opts.captureText) {\n      payload.text =\n        el instanceof HTMLInputElement\n          ? el.value\n          : el instanceof HTMLTextAreaElement\n            ? el.value\n            : el.textContent?.trim() || null;\n    }\n\n    if (opts.captureSelector) {\n      const selector = buildSelector(\n        el,\n        opts.seqlOptions,\n        opts.debug\n          ? (error, element) => {\n              console.error(\n                \"[GCE Debug] Error generating selector:\",\n                error.message,\n                \"\\nElement:\",\n                element,\n              );\n            }\n          : undefined,\n      );\n      if (selector) {\n        payload.selector = selector;\n      } else if (opts.debug) {\n        console.warn(\"[GCE Debug] Selector generation returned null for element:\", el);\n      }\n    }\n\n    if (opts.debug) {\n      console.log(\"[GCE Debug] Event captured:\", {\n        eventType: e.type,\n        element: el,\n        payload,\n      });\n    }\n\n    opts.send(payload);\n  };\n\n  // Add listeners for all enabled events\n  // Use capture phase to intercept events before other handlers can modify DOM\n  Object.entries(opts.events).forEach(([eventName, isEnabled]) => {\n    if (!isEnabled) return;\n\n    const mappedEventName =\n      eventName === \"dblClick\"\n        ? \"dblclick\"\n        : eventName === \"volumeChange\"\n          ? \"volumechange\"\n          : eventName === \"rateChange\"\n            ? \"ratechange\"\n            : eventName.toLowerCase();\n\n    document.addEventListener(mappedEventName, handler as EventListener, { capture: true });\n  });\n}\n\n/**\n * Starts a polling loop that waits for `gtag` or `dataLayer` and auto-initializes the tracker.\n * @public\n * @returns void\n * @remarks\n * Designed for browser environments where GA4 or GTM may load asynchronously.\n */\nexport function startAutoInit() {\n  if (typeof window === \"undefined\") return;\n\n  if (waitForGtagTimer) {\n    clearInterval(waitForGtagTimer);\n  }\n\n  let waited = 0;\n\n  waitForGtagTimer = setInterval(() => {\n    if (typeof window === \"undefined\") {\n      clearInterval(waitForGtagTimer!);\n      waitForGtagTimer = null;\n      return;\n    }\n\n    waited += POLL_INTERVAL;\n\n    const gtag = (window as any).gtag;\n    const dataLayer = (window as any).dataLayer;\n\n    const hasDataLayer = Array.isArray(dataLayer) && typeof dataLayer.push === \"function\";\n\n    if (typeof gtag === \"function\" || hasDataLayer) {\n      clearInterval(waitForGtagTimer!);\n      waitForGtagTimer = null;\n\n      // Only auto-initialize if tracker hasn't been initialized manually\n      if (!isManuallyInitialized && !handler) {\n        initTracker({\n          // send events through gtag when it is available\n          send: (payload) => {\n            if (typeof gtag === \"function\") {\n              gtag(\"event\", \"ui_event\", payload);\n            } else {\n              dataLayer.push({\n                event: \"ui_event\",\n                ...payload,\n              });\n            }\n          },\n        });\n      }\n\n      return;\n    }\n\n    if (waited >= MAX_WAIT) {\n      clearInterval(waitForGtagTimer!);\n      waitForGtagTimer = null;\n      console.warn(\"[GCE] gtag did not initialize in time โ tracking disabled\");\n    }\n  }, POLL_INTERVAL);\n}\n\n/**\n * Resets listeners and timers; intended for test environments.\n * @internal\n * @returns void\n * @remarks\n * โ\n */\nexport function _resetTrackerForTests() {\n  if (handler) {\n    Object.keys(DEFAULT_EVENTS).forEach((eventName) => {\n      const mappedEventName =\n        eventName === \"dblClick\"\n          ? \"dblclick\"\n          : eventName === \"volumeChange\"\n            ? \"volumechange\"\n            : eventName === \"rateChange\"\n              ? \"ratechange\"\n              : eventName.toLowerCase();\n\n      document.removeEventListener(mappedEventName, handler as EventListener, { capture: true });\n    });\n    handler = null;\n  }\n\n  if (waitForGtagTimer) {\n    clearInterval(waitForGtagTimer);\n    waitForGtagTimer = null;\n  }\n\n  isManuallyInitialized = false;\n}\n\nif (typeof window !== \"undefined\" && !isVitest) {\n  startAutoInit();\n}\n\nexport default { init: initTracker };\n"],"names":["q","N","lt","X","K","ht","E","B","dt","D","n","G","V","gt","t","e","c","u","a","i","d","l","mt","pt","L","_","yt","M","xt","J","tt","Ct","h","g","m","Q","Tt","Et","wt","k","vt","$t","It","Nt","Rt","Mt","Dt","Ht","Pt","kt","Lt","et","s","_t","r","qt","Ot","Ut","zt","O","Y","Z","v","A","Wt","o","_a","p","S","y","w","Ft","x","b","$","I","H","T","R","jt","C","nt","st","Zt","Xt","Kt","z","te","f","j","de","buildSelector","element","options","onError","generateSEQL","error","handler","waitForGtagTimer","isManuallyInitialized","POLL_INTERVAL","MAX_WAIT","isVitest","_documentCurrentScript","DEFAULT_EVENTS","initTracker","opts","payload","eventName","mappedEventName","el","eventKey","key","selector","isEnabled","startAutoInit","waited","gtag","dataLayer","hasDataLayer","_resetTrackerForTests","index"],"mappings":"sSAAK,MAAsBA,EAAI,CAC7B,OAAQ,GACR,KAAM,GACN,OAAQ,GACR,WAAY,EACd,EAAGC,EAAI,CACL,aAAc,GACd,KAAM,GACN,WAAY,GACZ,UAAW,IACX,YAAa,IACb,wBAAyB,EACzB,qBAAsB,IACtB,eAAgB,EAClB,EAAGC,GAAK,CACN,wBAAyB,EAC3B,EAAGC,EAAI,CACL,OACA,OACA,MACA,UACA,UACA,SACA,QACF,EAAGC,EAAI,CACL,OACA,aACA,OACA,SACA,cACA,gBACA,SACA,QACF,EAAGC,GAAK,CAEN,UACA,QACA,UACA,aACA,SACA,SACA,SACA,OACA,OACA,MACA,UACA,UACA,OAEA,SACA,WACA,WACA,OACA,QACA,QACA,SACA,QACA,WACA,SACA,SACA,WACA,SACA,WAEA,IACA,QACA,QACA,SACA,SACA,OAEA,aACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,MACA,KACA,KACA,KACA,KACA,KACA,KAEA,UACA,MACA,WACA,QACA,QACA,KACA,QACA,KACA,QACA,KAEA,MACA,OACA,SACA,OACA,OACA,WACA,UACA,UACA,IACA,OACA,KACF,EA2BGC,EAAI,CAEL,cAAe,IACf,UAAW,GACX,UAAW,GACX,YAAa,GACb,eAAgB,GAEhB,aAAc,GACd,kBAAmB,GACnB,mBAAoB,GAEpB,KAAM,GACN,KAAM,GAEN,IAAK,GAEL,KAAM,GACN,KAAM,GACN,IAAK,GACL,MAAO,GACP,IAAK,GACL,YAAa,GAEb,SAAU,GAEV,SAAU,EACZ,EAAGC,EAAoB,IAAI,IAAI,CAC7B,KAEA,QAEA,QAEA,QAEA,WAEA,iBACF,CAAC,EAAGC,GAAK,CACP,aAAc,GACd,qBAAsB,GACtB,oBAAqB,EACrB,eAAgB,GAChB,sBAAuB,GACvB,OAAQ,SACV,EAKA,SAASC,EAAEC,EAAG,CACZ,MAAO,CAAC,EAAE,gBAAgB,KAAKA,CAAC,GAAK,0BAA0B,KAAKA,CAAC,GAAK,0BAA0B,KAAKA,CAAC,GAAK,QAAQ,KAAKA,CAAC,GAAK,iBAAiB,KAAKA,CAAC,GAAK,kEAAkE,K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AAI,CAAC,KAAM,CAC1H,CACA,SAASE,EAAE7B,EAAGI,EAAGC,EAAI,CAAA,EAAI,CACvB,GAAI,CAACD,EAAG,OAAOA,EACf,MAAM,EAAI,CAAE,GAAGsB,GAAI,GAAGrB,CAAC,EACvB,OAAOL,IAAM,QAAUA,IAAM,MAAQ4B,GAAGxB,EAAG,CAAC,EAAIA,CAClD,CACA,MAAM0B,GAAK,CACT,OACA,aACA,kBACA,mBACA,gBACA,YACA,aACA,gBACA,eACA,eACF,EAAGC,GAAK,CACN,gBACA,eACA,eACA,gBACA,cACA,gBACA,eACA,YACA,eACA,eACA,YACA,aACF,EAAGC,GAAK,CACN,aACA,cACA,gBACA,gBACA,YACA,cACA,eACA,cACA,gBACA,eACA,eACA,aACA,eACA,mBACA,eACA,aACA,mBACA,YACF,EAAGC,GAAK,CACN,cACA,mBACA,cACA,YACA,eACA,gBACA,UACF,EAAGC,GAAK,CACN,cACA,eACA,YACA,UACA,UACA,qBACA,UACA,iBACA,iBACA,kBACA,cACF,EAAGC,GAAK,CAEN,UACA,WACA,cACA,aACA,aAEA,cACA,UACA,eAEA,kBACA,WACA,gBAEA,UACA,cACA,UACA,iBACA,UACA,iBACA,UAEA,UACA,gBACA,UACA,UAEA,aACA,gBACA,aACA,kBACA,kBACA,eACA,gBACF,EAAGC,GAAK,CACN,gBAEA,cAEA,aAEA,YAEF,EAAGC,GAAK,CACN,KACA,OACA,OACA,cACA,QACA,MACA,MACA,MACF,EAAGC,GAAK,CACN,WACA,UACA,WACA,SACA,WACA,WACA,OACF,EAAGC,GAAK,CACN,UACA,eACA,QACA,OAEF,EACA,SAASC,GAAGxC,EAAGI,EAAG,CAChB,OAAO0B,GAAG,SAAS9B,CAAC,EAAI,GAAK+B,GAAG,SAAS/B,CAAC,GAAKgC,GAAG,SAAShC,CAAC,GAAKiC,GAAG,KAAM5B,GAAML,EAAE,WAAWK,CAAC,CAAC,EAAI,GAAK6B,GAAG,SAASlC,CAAC,EAAI,GAAKmC,GAAG,KAAM9B,GAAML,EAAE,WAAWK,CAAC,CAAC,GAAK+B,GAAG,SAASp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","x_google_ignoreList":[0]}