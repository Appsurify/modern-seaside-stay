{"version":3,"file":"google-custom-event-tracker.umd.js","sources":["../node_modules/@whenessel/seql-js/dist/seql-js.js","../src/selector/selector.ts","../src/index.ts"],"sourcesContent":["const ee = \"1.0\", se = 10, L = {\n  ANCHOR: 0.4,\n  PATH: 0.3,\n  TARGET: 0.2,\n  UNIQUENESS: 0.1\n}, I = {\n  SEMANTIC_TAG: 0.5,\n  ROLE: 0.3,\n  ARIA_LABEL: 0.1,\n  STABLE_ID: 0.1,\n  TEST_MARKER: 0.05,\n  DEPTH_PENALTY_THRESHOLD: 5,\n  DEPTH_PENALTY_FACTOR: 0.05,\n  DEGRADED_SCORE: 0.3\n}, ct = {\n  MIN_CONFIDENCE_FOR_SKIP: 0.7\n}, X = [\n  \"form\",\n  \"main\",\n  \"nav\",\n  \"section\",\n  \"article\",\n  \"footer\",\n  \"header\"\n], K = [\n  \"form\",\n  \"navigation\",\n  \"main\",\n  \"region\",\n  \"contentinfo\",\n  \"complementary\",\n  \"banner\",\n  \"search\"\n], lt = [\n  // HTML5 Semantic\n  \"article\",\n  \"aside\",\n  \"details\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"header\",\n  \"main\",\n  \"mark\",\n  \"nav\",\n  \"section\",\n  \"summary\",\n  \"time\",\n  // Form elements\n  \"button\",\n  \"datalist\",\n  \"fieldset\",\n  \"form\",\n  \"input\",\n  \"label\",\n  \"legend\",\n  \"meter\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"progress\",\n  \"select\",\n  \"textarea\",\n  // Interactive\n  \"a\",\n  \"audio\",\n  \"video\",\n  \"canvas\",\n  \"dialog\",\n  \"menu\",\n  // Text content\n  \"blockquote\",\n  \"dd\",\n  \"dl\",\n  \"dt\",\n  \"hr\",\n  \"li\",\n  \"ol\",\n  \"ul\",\n  \"p\",\n  \"pre\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  // Table\n  \"caption\",\n  \"col\",\n  \"colgroup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"tr\",\n  // SVG\n  \"svg\",\n  \"path\",\n  \"circle\",\n  \"rect\",\n  \"line\",\n  \"polyline\",\n  \"polygon\",\n  \"ellipse\",\n  \"g\",\n  \"text\",\n  \"use\"\n], ht = [\n  \"rect\",\n  \"path\",\n  \"circle\",\n  \"line\",\n  \"polyline\",\n  \"polygon\",\n  \"ellipse\",\n  \"g\",\n  \"text\",\n  \"use\",\n  \"defs\",\n  \"clipPath\",\n  \"mask\"\n], re = [\n  \"aria-label\",\n  \"aria-labelledby\",\n  \"aria-describedby\",\n  \"name\",\n  \"type\",\n  \"data-testid\",\n  \"data-qa\",\n  \"data-test\",\n  \"href\",\n  \"title\",\n  \"placeholder\",\n  \"alt\"\n], w = {\n  // Test attributes (highest priority)\n  \"data-testid\": 100,\n  \"data-qa\": 99,\n  \"data-cy\": 98,\n  \"data-test\": 97,\n  \"data-test-id\": 96,\n  // ARIA (accessibility semantics)\n  \"aria-label\": 90,\n  \"aria-labelledby\": 85,\n  \"aria-describedby\": 80,\n  // Semantic HTML attributes\n  name: 75,\n  href: 70,\n  // for <a>\n  src: 70,\n  // for <img>, <script>, etc.\n  type: 65,\n  role: 60,\n  alt: 55,\n  title: 50,\n  for: 45,\n  placeholder: 40,\n  // Any data-* attribute (if not above)\n  \"data-*\": 30,\n  // Any aria-* attribute (if not above)\n  \"aria-*\": 25\n}, B = /* @__PURE__ */ new Set([\n  \"id\",\n  // handled separately\n  \"class\",\n  // handled separately\n  \"style\",\n  // unstable\n  \"xmlns\",\n  // service attribute for SVG\n  \"tabindex\",\n  // can change\n  \"contenteditable\"\n]), ut = {\n  maxPathDepth: 10,\n  enableSvgFingerprint: !0,\n  confidenceThreshold: 0.1,\n  fallbackToBody: !0,\n  includeUtilityClasses: !1,\n  source: \"dom-dsl\"\n}, dt = {\n  strictMode: !1,\n  enableFallback: !0,\n  maxCandidates: 20\n};\nfunction D(n) {\n  return !!(/^[a-z]+-\\d+$/i.test(n) || /^[a-z]+(-[a-z]+)+-\\d+$/i.test(n) || /^[a-z]+(_[a-z]+)*_\\d+$/i.test(n) || /^\\d+$/.test(n) || /^:[a-z0-9]+:$/i.test(n) || /^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/i.test(n) || /^[a-z]{1,3}[A-Za-z0-9]{8,}$/.test(n) && (/\\d/.test(n) || /[A-Z]/.test(n)) || /^radix-/.test(n) || /^mui-\\d+$/.test(n));\n}\nconst G = /* @__PURE__ */ new Set([\n  \"aria-labelledby\",\n  \"aria-describedby\",\n  \"aria-controls\",\n  \"aria-owns\",\n  \"aria-activedescendant\",\n  \"for\",\n  \"form\",\n  \"list\",\n  \"headers\",\n  \"aria-details\",\n  \"aria-errormessage\",\n  \"aria-flowto\"\n]);\nfunction V(n) {\n  return n.trim().split(/\\s+/).some((e) => D(e));\n}\nclass ft {\n  constructor(t, e) {\n    this.maxDepth = t.maxPathDepth ?? 10, this.cache = e;\n  }\n  /**\n   * Finds the best anchor element for the target\n   * @param target - Target element to find anchor for\n   * @returns Anchor result or null if not found\n   */\n  findAnchor(t) {\n    if (this.cache) {\n      const i = this.cache.getAnchor(t);\n      if (i !== void 0)\n        return i;\n    }\n    let e = t.parentElement, s = 0, r = null;\n    for (; e && s < this.maxDepth; ) {\n      if (e.tagName.toLowerCase() === \"body\")\n        return r || {\n          element: e,\n          score: I.DEGRADED_SCORE,\n          tier: \"C\",\n          depth: s\n        };\n      const i = this.scoreAnchor(e);\n      if (i > 0) {\n        const o = this.applyDepthPenalty(i, s), l = this.getTier(e), u = { element: e, score: o, tier: l, depth: s };\n        if (l === \"A\")\n          return u;\n        (!r || o > r.score) && (r = u);\n      }\n      e = e.parentElement, s++;\n    }\n    const a = r;\n    return this.cache && this.cache.setAnchor(t, a), a;\n  }\n  /**\n   * Scores an element as anchor candidate (without depth penalty)\n   * @param element - Element to score\n   * @returns Raw score from 0 to 1\n   */\n  scoreAnchor(t) {\n    let e = 0;\n    const s = t.tagName.toLowerCase();\n    X.includes(s) && (e += I.SEMANTIC_TAG);\n    const r = t.getAttribute(\"role\");\n    r && K.includes(r) && (e += I.ROLE), (t.hasAttribute(\"aria-label\") || t.hasAttribute(\"aria-labelledby\")) && (e += I.ARIA_LABEL);\n    const a = t.id;\n    return a && !D(a) && (e += I.STABLE_ID), (t.hasAttribute(\"data-testid\") || t.hasAttribute(\"data-qa\") || t.hasAttribute(\"data-test\")) && (e += I.TEST_MARKER), Math.min(e, 1);\n  }\n  /**\n   * Applies depth penalty to score\n   * Following SPECIFICATION.md ยง7: depthPenalty = (depth - threshold) * factor\n   */\n  applyDepthPenalty(t, e) {\n    if (e <= I.DEPTH_PENALTY_THRESHOLD)\n      return t;\n    const s = (e - I.DEPTH_PENALTY_THRESHOLD) * I.DEPTH_PENALTY_FACTOR;\n    return Math.max(0, t - s);\n  }\n  /**\n   * Determines the tier of an anchor element\n   */\n  getTier(t) {\n    const e = t.tagName.toLowerCase();\n    if (X.includes(e))\n      return \"A\";\n    const s = t.getAttribute(\"role\");\n    return s && K.includes(s) ? \"B\" : \"C\";\n  }\n}\nconst gt = [\n  // CSS-in-JS\n  /^css-[a-z0-9]+$/i,\n  /^sc-[a-z0-9]+-\\d+$/i,\n  /^[a-z]{5,8}$/i,\n  // Short generated classes (abcdef)\n  // Material-UI / MUI\n  /^Mui[A-Z]\\w+-\\w+-\\w+/,\n  /^makeStyles-\\w+-\\d+$/,\n  // JSS\n  /^jss\\d+$/,\n  // Emotion / Linaria\n  /^(emotion|linaria)-[a-z0-9]+/i,\n  // Component libraries with hashes\n  /^(chakra|tw-|ant-)[a-z0-9]+-\\w+/i,\n  // Hash-based (hashes in classes)\n  /-[a-f0-9]{6,}$/i,\n  /^_[a-z0-9]{5,}$/i,\n  /\\d{5,}/\n  // 5+ digits in a row\n], pt = [\n  // === FIX 4: Tailwind arbitrary values and variants (highest priority) ===\n  /^\\[/,\n  // Any arbitrary value or variant starting with [ (e.g., [&_svg]:..., [mask-type:luminance])\n  // === FIX 4: Pseudo-class variants (must be before specific patterns) ===\n  /^(first|last|odd|even|only|first-of-type|last-of-type|only-of-type):/,\n  // first:, last:, etc.\n  /^(hover|focus|active|disabled|enabled|checked|indeterminate|default|required|valid|invalid|in-range|out-of-range|placeholder-shown|autofill|read-only):/,\n  // State pseudo-classes\n  /^(focus-within|focus-visible|visited|target|open):/,\n  // Advanced pseudo-classes\n  // === FIX 4: Responsive variants (must be before specific patterns) ===\n  /^(sm|md|lg|xl|2xl|3xl|4xl|5xl|6xl|7xl):/,\n  // === FIX 4: Dark mode and directional variants ===\n  /^dark:/,\n  /^(rtl|ltr):/,\n  // === FIX 4: Group and peer variants ===\n  /^(group|peer)(-hover|-focus|-active)?:/,\n  // === FIX 4: Tailwind utilities with fraction values ===\n  /\\/([\\d.]+|full|auto|screen)$/,\n  // /50, /100, /full, /auto, /screen\n  // === FIX 4: Positioning utilities ===\n  /^(inset|top|right|bottom|left)(-|$)/,\n  // inset-0, top-0, left-0\n  // === Layout & Display ===\n  /^(flex|inline-flex|grid|block|inline|inline-block|hidden|visible)$/,\n  /^(absolute|relative|fixed|sticky|static)$/,\n  // === Flexbox & Grid ===\n  /^(items|justify|content|self|place)-/,\n  /^flex-(row|col|wrap|nowrap|1|auto|initial|none)/,\n  /^grid-(cols|rows|flow)/,\n  // === Spacing (Tailwind) ===\n  /^(gap|space)-/,\n  /^[mp][trblxy]?-(\\d+|auto|px)$/,\n  // === Negative Tailwind utilities (margins, positioning, transforms) ===\n  /^-[mp][trblxy]?-\\d+$/,\n  // -m-4, -mt-2, -mx-4, -px-4, -py-2\n  /^-(top|right|bottom|left|inset)-\\d+$/,\n  // -top-4, -bottom-6, -left-6, -inset-0\n  /^-z-\\d+$/,\n  // -z-10, -z-20\n  /^-space-[xy]-\\d+$/,\n  // -space-x-2, -space-y-4\n  /^-translate-[xy]-\\d+$/,\n  // -translate-x-4, -translate-y-2\n  /^-rotate-\\d+$/,\n  // -rotate-45, -rotate-90\n  /^-scale-\\d+$/,\n  // -scale-50, -scale-75\n  /^-skew-[xy]-\\d+$/,\n  // -skew-x-12, -skew-y-6\n  // === Sizing ===\n  /^(w|h|min-w|min-h|max-w|max-h|size)-/,\n  // === Colors & Styling ===\n  // Note: text-* can be semantic (text-muted, text-primary) or utility (text-center, text-lg)\n  // More specific patterns for utility text-* classes\n  /^text-(center|left|right|justify|start|end|xs|sm|base|lg|xl|2xl|3xl|4xl|5xl|6xl|7xl|8xl|9xl)$/,\n  /^text-(uppercase|lowercase|capitalize|normal-case|underline|line-through|no-underline)$/,\n  /^text-(truncate|ellipsis|clip)$/,\n  /^(bg|border|ring|shadow|outline)-/,\n  /^rounded(-|$)/,\n  // === Typography ===\n  /^(font|leading|tracking|whitespace|break|truncate)-/,\n  /^(uppercase|lowercase|capitalize|normal-case)$/,\n  // === Transform & Animation (IMPORTANT!) ===\n  /^(transform|transition|duration|delay|ease|animate)-/,\n  /^(scale|rotate|translate|skew)-/,\n  /^transform$/,\n  /^backdrop-blur-/,\n  /^motion-/,\n  // Framer Motion\n  /^(fade|slide|zoom|bounce|pulse|spin|ping)-/,\n  // animations\n  // === Overflow & Scrolling ===\n  /^(overflow|overscroll|scroll)-/,\n  /^object-(contain|cover|fill|none|scale-down)$/,\n  // === Interactivity ===\n  /^(cursor|pointer-events|select|resize)-/,\n  // === Visibility & Opacity ===\n  /^(opacity|z)-/,\n  /^(visible|invisible|collapse)$/,\n  // === Bootstrap utilities ===\n  /^d-(none|inline|inline-block|block|grid|table|flex)$/,\n  /^(float|clearfix|text)-(left|right|center|justify|start|end)$/,\n  /^(m|p)[trblxy]?-[0-5]$/,\n  /^(w|h)-(25|50|75|100|auto)$/,\n  // Note: btn-* classes are semantic (component classes), not utility\n  // /^btn-(primary|secondary|success|danger|warning|info|light|dark|link)$/,\n  /^btn-(sm|lg|block)$/,\n  // Only size modifiers are utility\n  /^text-(muted|primary|success|danger|warning|info|light|dark|white)$/,\n  /^bg-(primary|secondary|success|danger|warning|info|light|dark|white|transparent)$/,\n  /^border(-top|-bottom|-left|-right)?(-0)?$/,\n  /^rounded(-top|-bottom|-left|-right|-circle|-pill|-0)?$/,\n  /^shadow(-sm|-lg|-none)?$/,\n  /^(align|justify|order|flex)-(start|end|center|between|around|fill|grow|shrink)$/,\n  /^col(-sm|-md|-lg|-xl)?(-\\d+|-auto)?$/,\n  /^row(-cols)?(-\\d+)?$/,\n  /^g[xy]?-[0-5]$/,\n  /^(show|hide|invisible|visible)$/,\n  /^(position|top|bottom|start|end)-(static|relative|absolute|fixed|sticky|-\\d+)$/,\n  // === Common utility patterns ===\n  /^(row|col)$/,\n  /^clearfix$/,\n  /^pull-(left|right)$/,\n  /^float-(left|right|none)$/\n], mt = [\n  // === Navigation ===\n  /^(nav|menu|header|footer|sidebar|topbar|navbar|breadcrumb)/,\n  /(navigation|dropdown|megamenu)$/,\n  // === Components ===\n  /^(btn|button|link|card|modal|dialog|popup|tooltip|alert|badge|chip)/,\n  /^(form|input|select|checkbox|radio|textarea|label|fieldset)/,\n  /^(table|list|item|row|cell|column)/,\n  /^(accordion|tab|carousel|slider|gallery)/,\n  // === Content ===\n  /^(content|main|article|post|comment|title|subtitle|description|caption)/,\n  /^(hero|banner|jumbotron|section|wrapper|box)/,\n  // === User/Data ===\n  /^(user|profile|avatar|account|auth)/,\n  /^(product|item|price|cart|checkout|order)/,\n  // === Layout sections ===\n  /^(page|layout|panel|widget|block)/,\n  // === States (semantic naming) ===\n  /-(primary|secondary|tertiary|success|error|warning|info|danger)$/,\n  /-(active|inactive|disabled|enabled|selected|highlighted|focused)$/,\n  /-(open|closed|expanded|collapsed|visible|hidden)$/,\n  /-(large|medium|small|tiny|xs|sm|md|lg|xl)$/,\n  // === Action buttons ===\n  /^(submit|cancel|close|delete|edit|save|back|next|prev|search)/,\n  // === Status ===\n  /^(loading|pending|complete|failed|draft|published)/\n];\nfunction _(n) {\n  return gt.some((t) => t.test(n));\n}\nfunction q(n) {\n  return n.length <= 2 || /^\\d/.test(n) ? !0 : pt.some((t) => t.test(n));\n}\nfunction bt(n) {\n  return _(n) || q(n) ? !1 : mt.some((t) => t.test(n));\n}\nfunction St(n) {\n  return !_(n) && !q(n);\n}\nfunction N(n) {\n  return n.filter((t) => St(t));\n}\nfunction yt(n) {\n  if (_(n) || q(n))\n    return 0;\n  let t = 0.5;\n  return bt(n) && (t = 0.8), n.length < 3 ? t *= 0.3 : n.length < 5 && (t *= 0.6), /\\d/.test(n) && (t *= 0.7), Math.min(t, 1);\n}\nfunction At(n) {\n  const t = [], e = [];\n  for (const s of n)\n    q(s) || _(s) ? e.push(s) : t.push(s);\n  return { semantic: t, utility: e };\n}\nfunction J(n) {\n  return q(n) || _(n);\n}\nfunction ne(n) {\n  return yt(n);\n}\nconst tt = (n) => n.replace(/([#:.[\\]@])/g, \"\\\\$1\");\nclass xt {\n  constructor(t, e) {\n    this.maxDepth = t.maxPathDepth ?? 10, this.cache = e;\n  }\n  /**\n   * Builds path from anchor to target (excluding both)\n   * @param anchor - Anchor element (start)\n   * @param target - Target element (end)\n   * @param extractor - Semantic extractor instance\n   * @returns Path build result with nodes and degradation info\n   */\n  buildPath(t, e, s) {\n    const r = [];\n    let a = e.parentElement;\n    for (; a && a !== t && r.length < this.maxDepth; )\n      r.unshift(a), a = a.parentElement;\n    const i = r.length >= this.maxDepth && a !== t;\n    let o = this.filterNoise(r);\n    return o = this.ensureUniqueness(r, o, t, e, s), {\n      path: o.map((u) => {\n        const d = u.parentElement;\n        let c;\n        if (d) {\n          const g = Array.from(d.children).indexOf(u);\n          g !== -1 && (c = g + 1);\n        }\n        return {\n          tag: u.tagName.toLowerCase(),\n          semantics: s.extract(u),\n          score: s.scoreElement(u),\n          nthChild: c\n        };\n      }),\n      degraded: i,\n      degradationReason: i ? \"path-depth-overflow\" : void 0\n    };\n  }\n  /**\n   * Legacy method for backward compatibility\n   */\n  buildPathNodes(t, e, s) {\n    return this.buildPath(t, e, s).path;\n  }\n  /**\n   * Ensures path uniqueness by adding nodes if needed\n   * Following SPECIFICATION.md ยง8 Disambiguation Algorithm\n   */\n  ensureUniqueness(t, e, s, r, a) {\n    const i = this.buildTestSelector(s, e, r);\n    try {\n      const o = r.ownerDocument;\n      if (!o) return e;\n      let l;\n      if (this.cache) {\n        const d = this.cache.getSelectorResults(i);\n        d !== void 0 ? l = d : (l = Array.from(o.querySelectorAll(i)), this.cache.setSelectorResults(i, l));\n      } else\n        l = o.querySelectorAll(i);\n      if (l.length <= 1)\n        return e;\n      const u = t.filter((d) => !e.includes(d));\n      for (const d of u) {\n        if (a.scoreElement(d) < ct.MIN_CONFIDENCE_FOR_SKIP)\n          continue;\n        const h = this.insertNodeInOrder(e, d, t), g = this.buildTestSelector(s, h, r);\n        try {\n          let f;\n          if (this.cache) {\n            const p = this.cache.getSelectorResults(g);\n            p !== void 0 ? f = p : (f = Array.from(o.querySelectorAll(g)), this.cache.setSelectorResults(g, f));\n          } else\n            f = o.querySelectorAll(g);\n          if (f.length === 1)\n            return h;\n          f.length < l.length && (e = h);\n        } catch {\n        }\n      }\n      return e;\n    } catch {\n      return e;\n    }\n  }\n  /**\n   * Inserts node into path maintaining original order\n   */\n  insertNodeInOrder(t, e, s) {\n    const r = s.indexOf(e), a = [...t];\n    let i = 0;\n    for (let o = 0; o < a.length && !(s.indexOf(a[o]) > r); o++)\n      i = o + 1;\n    return a.splice(i, 0, e), a;\n  }\n  /**\n   * Builds a test CSS selector from path\n   */\n  buildTestSelector(t, e, s) {\n    const r = [];\n    r.push(this.elementToSelector(t));\n    for (const a of e)\n      r.push(this.elementToSelector(a));\n    return r.push(this.elementToSelector(s)), r.join(\" \");\n  }\n  /**\n   * Converts element to basic CSS selector\n   */\n  elementToSelector(t) {\n    let e = t.tagName.toLowerCase();\n    t.id && !D(t.id) && (e += `#${tt(t.id)}`);\n    for (const s of Array.from(t.classList))\n      J(s) || (e += `.${tt(s)}`);\n    return e;\n  }\n  /**\n   * Filters out noise/layout elements\n   */\n  filterNoise(t) {\n    return t.filter((e) => this.shouldInclude(e));\n  }\n  /**\n   * Determines if element should be included in path\n   */\n  shouldInclude(t) {\n    const e = t.tagName.toLowerCase();\n    return lt.includes(e) ? !0 : e === \"div\" || e === \"span\" ? this.hasSemanticFeatures(t) : !1;\n  }\n  /**\n   * Checks if element has meaningful semantic features\n   */\n  hasSemanticFeatures(t) {\n    if (t.hasAttribute(\"role\")) return !0;\n    for (const s of Array.from(t.attributes))\n      if (s.name.startsWith(\"aria-\")) return !0;\n    if (t.classList.length > 0) {\n      for (const s of Array.from(t.classList))\n        if (!J(s)) return !0;\n    }\n    if (t.hasAttribute(\"data-testid\") || t.hasAttribute(\"data-qa\") || t.hasAttribute(\"data-test\"))\n      return !0;\n    const e = t.id;\n    return !!(e && !D(e));\n  }\n}\nfunction Q(n) {\n  return n ? n.trim().replace(/[\\n\\t\\r]/g, \" \").replace(/\\s+/g, \" \") : \"\";\n}\nconst Ct = {\n  preserveQueryForAbsolute: !0,\n  removeDynamicHashes: !0\n};\nfunction Tt(n) {\n  return n ? [\n    /\\d{5,}/,\n    // 5+ digits\n    /[a-f0-9]{8,}/i,\n    // hex hash 8+ characters\n    /(session|token|temp|random|timestamp|nonce|cache)/i,\n    // dynamic words\n    /^\\d+$/,\n    // only digits\n    /^[a-f0-9-]{32,}$/i\n    // UUID-like\n  ].some((e) => e.test(n)) : !1;\n}\nfunction Et(n, t) {\n  if (!n) return n;\n  const e = n.startsWith(\"http://\") || n.startsWith(\"https://\"), [s, r] = n.split(\"#\"), [a, i] = s.split(\"?\");\n  let o = a;\n  return e && t.preserveQueryForAbsolute && i && (o += `?${i}`), r && (t.removeDynamicHashes && Tt(r) || (o += `#${r}`)), o;\n}\nfunction k(n, t, e = {}) {\n  if (!t) return t;\n  const s = { ...Ct, ...e };\n  return n === \"href\" || n === \"src\" ? Et(t, s) : t;\n}\nconst wt = [\n  \"role\",\n  \"aria-label\",\n  \"aria-labelledby\",\n  \"aria-describedby\",\n  \"aria-controls\",\n  \"aria-owns\",\n  \"aria-level\",\n  \"aria-posinset\",\n  \"aria-setsize\",\n  \"aria-haspopup\"\n], vt = [\n  \"aria-selected\",\n  \"aria-checked\",\n  \"aria-pressed\",\n  \"aria-expanded\",\n  \"aria-hidden\",\n  \"aria-disabled\",\n  \"aria-current\",\n  \"aria-busy\",\n  \"aria-invalid\",\n  \"aria-grabbed\",\n  \"aria-live\",\n  \"aria-atomic\"\n], $t = [\n  \"data-state\",\n  \"data-active\",\n  \"data-inactive\",\n  \"data-selected\",\n  \"data-open\",\n  \"data-closed\",\n  \"data-visible\",\n  \"data-hidden\",\n  \"data-disabled\",\n  \"data-enabled\",\n  \"data-loading\",\n  \"data-error\",\n  \"data-success\",\n  \"data-highlighted\",\n  \"data-focused\",\n  \"data-hover\",\n  \"data-orientation\",\n  \"data-theme\"\n], Mt = [\n  \"data-radix-\",\n  \"data-headlessui-\",\n  \"data-reach-\",\n  \"data-mui-\",\n  \"data-chakra-\",\n  \"data-mantine-\",\n  \"data-tw-\"\n], It = [\n  \"data-testid\",\n  \"data-test-id\",\n  \"data-test\",\n  \"data-cy\",\n  \"data-qa\",\n  \"data-automation-id\",\n  \"data-id\",\n  \"data-component\",\n  \"data-entity-id\",\n  \"data-product-id\",\n  \"data-user-id\"\n], Rt = [\n  \"id\",\n  \"name\",\n  \"type\",\n  \"placeholder\",\n  \"title\",\n  \"for\",\n  \"alt\",\n  \"href\"\n], Nt = [\n  \"disabled\",\n  \"checked\",\n  \"selected\",\n  \"hidden\",\n  \"readonly\",\n  \"required\",\n  \"value\"\n], Dt = [\n  /^radix-/,\n  /^headlessui-/,\n  /^mui-/,\n  /:\\w+:/\n  // matches :ru:, :r1:, etc.\n];\nfunction Ht(n, t) {\n  return wt.includes(n) ? !0 : vt.includes(n) || $t.includes(n) || Mt.some((e) => n.startsWith(e)) ? !1 : It.includes(n) || n.startsWith(\"data-\") && n.endsWith(\"-id\") ? !0 : n === \"id\" ? !Dt.some((e) => e.test(t)) : Rt.includes(n) ? !0 : Nt.includes(n) ? !1 : !!n.startsWith(\"data-\");\n}\nclass Pt {\n  constructor(t, e) {\n    this.includeUtilityClasses = t.includeUtilityClasses ?? !1, this.cache = e;\n  }\n  /**\n   * Extracts semantic features from element\n   * @param element - DOM element to extract from\n   * @returns Semantic features object\n   */\n  extract(t) {\n    if (this.cache) {\n      const i = this.cache.getSemantics(t);\n      if (i !== void 0)\n        return i;\n    }\n    const e = {}, s = t.id;\n    if (s && !D(s) && (e.id = s), t.classList.length > 0) {\n      const i = Array.from(t.classList);\n      if (this.includeUtilityClasses)\n        e.classes = i;\n      else {\n        const { semantic: o } = At(i);\n        o.length > 0 && (e.classes = o);\n      }\n    }\n    const r = this.extractAttributes(t);\n    Object.keys(r).length > 0 && (e.attributes = r);\n    const a = t.getAttribute(\"role\");\n    if (a && (e.role = a), this.shouldExtractText(t)) {\n      const i = this.extractText(t);\n      i && (e.text = i);\n    }\n    return this.cache && this.cache.setSemantics(t, e), e;\n  }\n  /**\n   * Scores element based on semantic richness\n   * @param element - Element to score\n   * @returns Score from 0 to 1\n   */\n  scoreElement(t) {\n    let e = 0.5;\n    const s = this.extract(t);\n    return s.id && (e += 0.15), s.classes && s.classes.length > 0 && (e += 0.1), s.attributes && Object.keys(s.attributes).length > 0 && (e += 0.1), s.role && (e += 0.1), s.text && (e += 0.05), Math.min(e, 1);\n  }\n  /**\n   * Checks if attribute should be ignored\n   * @param attrName - Attribute name\n   * @returns True if should be ignored\n   */\n  shouldIgnoreAttribute(t) {\n    return !!(B.has(t) || t.startsWith(\"on\") || t.startsWith(\"ng-\") || t.startsWith(\"_ng\") || t.startsWith(\"data-reactid\") || t.startsWith(\"data-react\") || t.startsWith(\"data-v-\"));\n  }\n  /**\n   * Gets attribute priority\n   * @param attrName - Attribute name\n   * @returns Priority number (higher = more priority)\n   */\n  getAttributePriority(t) {\n    return w[t] !== void 0 ? w[t] : t.startsWith(\"data-\") ? w[\"data-*\"] : t.startsWith(\"aria-\") ? w[\"aria-*\"] : 0;\n  }\n  /**\n   * Checks if attribute value is dynamic (should be ignored)\n   * @param value - Attribute value\n   * @returns True if value is dynamic\n   */\n  isDynamicValue(t) {\n    return [\n      /^[a-f0-9]{32,}$/i,\n      // Long hashes\n      /^\\d{10,}$/,\n      // Timestamp\n      /^(undefined|null|\\[object)/,\n      // JS artifacts\n      /^{{.*}}$/\n      // Template literals\n    ].some((s) => s.test(t));\n  }\n  /**\n   * Extracts relevant semantic attributes from element\n   * Iterates through all attributes and filters by priority\n   */\n  extractAttributes(t) {\n    const e = {};\n    for (const s of Array.from(t.attributes)) {\n      const r = s.name;\n      if (this.shouldIgnoreAttribute(r) || !Ht(r, s.value) || G.has(r) && V(s.value) || this.getAttributePriority(r) === 0) continue;\n      const i = r === \"href\" || r === \"src\" ? k(r, s.value) : s.value;\n      !i || i.trim() === \"\" || this.isDynamicValue(i) || (e[r] = i);\n    }\n    return e;\n  }\n  /**\n   * Extracts and normalizes text content\n   */\n  extractText(t) {\n    const e = this.getDirectTextContent(t);\n    if (!e) return null;\n    const s = Q(e);\n    if (!s) return null;\n    const r = 100, a = e.length > r ? e.slice(0, r) + \"...\" : e, i = s.length > r ? s.slice(0, r) + \"...\" : s;\n    return {\n      raw: a,\n      normalized: i\n    };\n  }\n  /**\n   * Gets direct text content excluding child elements\n   */\n  getDirectTextContent(t) {\n    const e = [];\n    for (const s of Array.from(t.childNodes))\n      if (s.nodeType === Node.TEXT_NODE && s.textContent) {\n        const r = s.textContent.trim();\n        r && e.push(r);\n      }\n    return e.length > 0 ? e.join(\" \") : t.textContent ?? null;\n  }\n  /**\n   * Determines if text should be extracted for this element\n   */\n  shouldExtractText(t) {\n    const e = t.tagName.toLowerCase();\n    return [\n      \"button\",\n      \"a\",\n      \"label\",\n      \"h1\",\n      \"h2\",\n      \"h3\",\n      \"h4\",\n      \"h5\",\n      \"h6\",\n      \"p\",\n      \"span\",\n      \"li\",\n      \"th\",\n      \"td\",\n      \"dt\",\n      \"dd\",\n      \"legend\",\n      \"figcaption\",\n      \"summary\"\n    ].includes(e);\n  }\n}\nclass kt {\n  /**\n   * Generates fingerprint for SVG element\n   * @param element - SVG element to fingerprint\n   * @returns SVG fingerprint object\n   */\n  fingerprint(t) {\n    const e = t.tagName.toLowerCase(), s = this.getShape(e), r = {\n      shape: s,\n      hasAnimation: this.hasAnimation(t)\n    };\n    if (s === \"path\") {\n      const o = t.getAttribute(\"d\");\n      o && (r.dHash = this.computePathHash(o));\n    } else [\"circle\", \"rect\", \"ellipse\", \"line\"].includes(s) && (r.geomHash = this.computeGeomHash(t, s));\n    const a = t.getAttribute(\"role\");\n    a && (r.role = a);\n    const i = t.querySelector(\"title\");\n    return i?.textContent && (r.titleText = i.textContent.trim()), r;\n  }\n  /**\n   * Computes hash from path data (first N commands)\n   * @param d - SVG path d attribute value\n   * @returns Hash string\n   */\n  computePathHash(t) {\n    const e = this.normalizePathData(t);\n    return this.simpleHash(e);\n  }\n  /**\n   * Gets the shape type from tag name\n   */\n  getShape(t) {\n    return [\n      \"path\",\n      \"circle\",\n      \"rect\",\n      \"line\",\n      \"polyline\",\n      \"polygon\",\n      \"ellipse\",\n      \"g\",\n      \"text\",\n      \"use\",\n      \"svg\"\n    ].find((s) => s === t) ?? \"path\";\n  }\n  /**\n   * Normalizes path data for consistent hashing\n   */\n  normalizePathData(t) {\n    return (t.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi) ?? []).slice(0, 5).map((r) => r.trim().replace(/(-?\\d+\\.?\\d*)/g, (a) => parseFloat(a).toFixed(1))).join(\" \");\n  }\n  /**\n   * Computes geometry hash for non-path shapes\n   */\n  computeGeomHash(t, e) {\n    const s = [];\n    switch (e) {\n      case \"circle\":\n        s.push(`r=${t.getAttribute(\"r\") ?? \"0\"}`);\n        break;\n      case \"rect\":\n        {\n          const r = parseFloat(t.getAttribute(\"width\") ?? \"0\"), a = parseFloat(t.getAttribute(\"height\") ?? \"0\");\n          r > 0 && a > 0 && s.push(`ratio=${(r / a).toFixed(2)}`);\n        }\n        break;\n      case \"ellipse\":\n        {\n          const r = parseFloat(t.getAttribute(\"rx\") ?? \"0\"), a = parseFloat(t.getAttribute(\"ry\") ?? \"0\");\n          r > 0 && a > 0 && s.push(`ratio=${(r / a).toFixed(2)}`);\n        }\n        break;\n      case \"line\":\n        {\n          const r = parseFloat(t.getAttribute(\"x1\") ?? \"0\"), a = parseFloat(t.getAttribute(\"y1\") ?? \"0\"), i = parseFloat(t.getAttribute(\"x2\") ?? \"0\"), o = parseFloat(t.getAttribute(\"y2\") ?? \"0\"), l = Math.atan2(o - a, i - r);\n          s.push(`angle=${l.toFixed(2)}`);\n        }\n        break;\n    }\n    return this.simpleHash(s.join(\";\"));\n  }\n  /**\n   * Detects animations on SVG element\n   */\n  hasAnimation(t) {\n    if (t.querySelector(\"animate, animateTransform, animateMotion\"))\n      return !0;\n    const e = t.ownerDocument;\n    if (e?.defaultView)\n      try {\n        const s = e.defaultView.getComputedStyle(t);\n        if (s.animationName !== \"none\" || s.transitionProperty !== \"all\" && s.transitionProperty !== \"none\")\n          return !0;\n      } catch {\n      }\n    return !1;\n  }\n  /**\n   * Simple hash function for fingerprinting (not cryptographic)\n   */\n  simpleHash(t) {\n    let e = 0;\n    for (let s = 0; s < t.length; s++) {\n      const r = t.charCodeAt(s);\n      e = (e << 5) - e + r, e = e & e;\n    }\n    return Math.abs(e).toString(16).padStart(8, \"0\");\n  }\n}\nfunction _t(n, t = 0) {\n  const e = n.anchor.score, s = n.path.length > 0 ? n.path.reduce((o, l) => o + l.score, 0) / n.path.length : 0.5, r = n.target.score, a = e * L.ANCHOR + s * L.PATH + r * L.TARGET + t * L.UNIQUENESS, i = n.anchor.degraded ? 0.2 : 0;\n  return Math.max(0, Math.min(1, a - i));\n}\nfunction ae(n, t, e) {\n  let s = 0.5;\n  return t && (s += 0.2), e && (s += 0.15), s += Math.min(n * 0.05, 0.15), Math.min(s, 1);\n}\nclass qt {\n  constructor(t) {\n    this.cache = /* @__PURE__ */ new Map(), this.maxSize = t;\n  }\n  get(t) {\n    const e = this.cache.get(t);\n    if (e !== void 0)\n      return this.cache.delete(t), this.cache.set(t, e), e;\n  }\n  set(t, e) {\n    if (this.cache.has(t))\n      this.cache.delete(t);\n    else if (this.cache.size >= this.maxSize) {\n      const s = this.cache.keys().next().value;\n      s !== void 0 && this.cache.delete(s);\n    }\n    this.cache.set(t, e);\n  }\n  has(t) {\n    return this.cache.has(t);\n  }\n  delete(t) {\n    this.cache.delete(t);\n  }\n  clear() {\n    this.cache.clear();\n  }\n  get size() {\n    return this.cache.size;\n  }\n}\nclass Lt {\n  constructor(t = {}) {\n    this.eidCache = /* @__PURE__ */ new WeakMap(), this.selectorResultCache = new qt(\n      t.maxSelectorCacheSize ?? 1e3\n    ), this.anchorCache = /* @__PURE__ */ new WeakMap(), this.semanticsCache = /* @__PURE__ */ new WeakMap(), this.stats = {\n      eidHits: 0,\n      eidMisses: 0,\n      selectorHits: 0,\n      selectorMisses: 0,\n      anchorHits: 0,\n      anchorMisses: 0,\n      semanticsHits: 0,\n      semanticsMisses: 0,\n      selectorCacheSize: 0,\n      maxSelectorCacheSize: t.maxSelectorCacheSize ?? 1e3\n    };\n  }\n  /**\n   * Get cached EID for element\n   */\n  getEID(t) {\n    const e = this.eidCache.get(t);\n    if (e !== void 0)\n      return this.stats.eidHits++, e;\n    this.stats.eidMisses++;\n  }\n  /**\n   * Cache EID for element\n   */\n  setEID(t, e) {\n    this.eidCache.set(t, e);\n  }\n  /**\n   * Get cached selector results\n   */\n  getSelectorResults(t) {\n    const e = this.selectorResultCache.get(t);\n    if (e !== void 0)\n      return this.stats.selectorHits++, this.stats.selectorCacheSize = this.selectorResultCache.size, e;\n    this.stats.selectorMisses++, this.stats.selectorCacheSize = this.selectorResultCache.size;\n  }\n  /**\n   * Cache selector results\n   */\n  setSelectorResults(t, e) {\n    this.selectorResultCache.set(t, e), this.stats.selectorCacheSize = this.selectorResultCache.size;\n  }\n  /**\n   * Get cached anchor result\n   */\n  getAnchor(t) {\n    if (this.anchorCache.has(t))\n      return this.stats.anchorHits++, this.anchorCache.get(t);\n    this.stats.anchorMisses++;\n  }\n  /**\n   * Cache anchor result\n   */\n  setAnchor(t, e) {\n    this.anchorCache.set(t, e);\n  }\n  /**\n   * Get cached semantics\n   */\n  getSemantics(t) {\n    const e = this.semanticsCache.get(t);\n    if (e !== void 0)\n      return this.stats.semanticsHits++, e;\n    this.stats.semanticsMisses++;\n  }\n  /**\n   * Cache semantics\n   */\n  setSemantics(t, e) {\n    this.semanticsCache.set(t, e);\n  }\n  /**\n   * Clear all caches\n   */\n  clear() {\n    this.selectorResultCache.clear(), this.stats.selectorCacheSize = 0, this.stats = {\n      eidHits: 0,\n      eidMisses: 0,\n      selectorHits: 0,\n      selectorMisses: 0,\n      anchorHits: 0,\n      anchorMisses: 0,\n      semanticsHits: 0,\n      semanticsMisses: 0,\n      selectorCacheSize: 0,\n      maxSelectorCacheSize: this.stats.maxSelectorCacheSize\n    };\n  }\n  /**\n   * Invalidate cache for a specific element\n   * Note: WeakMaps don't support deletion, but we can clear selector cache\n   * if needed. This method is mainly for future extensibility.\n   */\n  invalidateElement(t) {\n  }\n  /**\n   * Invalidate a specific selector from cache\n   */\n  invalidateSelector(t) {\n    this.selectorResultCache.delete(t), this.stats.selectorCacheSize = this.selectorResultCache.size;\n  }\n  /**\n   * Get cache statistics\n   */\n  getStats() {\n    return {\n      ...this.stats,\n      selectorCacheSize: this.selectorResultCache.size\n    };\n  }\n  /**\n   * Get cache hit rate for EID cache\n   */\n  getEIDHitRate() {\n    const t = this.stats.eidHits + this.stats.eidMisses;\n    return t > 0 ? this.stats.eidHits / t : 0;\n  }\n  /**\n   * Get cache hit rate for selector cache\n   */\n  getSelectorHitRate() {\n    const t = this.stats.selectorHits + this.stats.selectorMisses;\n    return t > 0 ? this.stats.selectorHits / t : 0;\n  }\n  /**\n   * Get cache hit rate for anchor cache\n   */\n  getAnchorHitRate() {\n    const t = this.stats.anchorHits + this.stats.anchorMisses;\n    return t > 0 ? this.stats.anchorHits / t : 0;\n  }\n  /**\n   * Get cache hit rate for semantics cache\n   */\n  getSemanticsHitRate() {\n    const t = this.stats.semanticsHits + this.stats.semanticsMisses;\n    return t > 0 ? this.stats.semanticsHits / t : 0;\n  }\n  /**\n   * Get overall cache hit rate\n   */\n  getOverallHitRate() {\n    const t = this.stats.eidHits + this.stats.selectorHits + this.stats.anchorHits + this.stats.semanticsHits, e = this.stats.eidMisses + this.stats.selectorMisses + this.stats.anchorMisses + this.stats.semanticsMisses, s = t + e;\n    return s > 0 ? t / s : 0;\n  }\n}\nfunction Ot(n) {\n  return new Lt(n);\n}\nlet O = null;\nfunction Z() {\n  return O || (O = Ot()), O;\n}\nfunction ie() {\n  O = null;\n}\nfunction Y(n, t = {}) {\n  if (!n || !n.ownerDocument || !n.isConnected)\n    return null;\n  const e = { ...ut, ...t }, s = e.cache ?? Z(), r = s.getEID(n);\n  if (r !== void 0)\n    return r;\n  const a = new ft(e, s), i = new xt(e, s), o = new Pt(e, s), l = new kt(), u = a.findAnchor(n);\n  if (!u && !e.fallbackToBody)\n    return null;\n  const d = u?.element ?? n.ownerDocument?.body ?? null;\n  if (!d) return null;\n  const c = !u || u.tier === \"C\", h = d.tagName.toLowerCase(), g = d.parentElement;\n  let f;\n  if (g && h !== \"body\" && h !== \"html\") {\n    const T = Array.from(g.children).indexOf(d);\n    T !== -1 && (f = T + 1);\n  }\n  const p = o.extract(d), m = {\n    tag: d.tagName.toLowerCase(),\n    semantics: p,\n    score: u?.score ?? I.DEGRADED_SCORE,\n    degraded: c,\n    nthChild: f\n  }, b = i.buildPath(d, n, o), y = o.extract(n);\n  e.enableSvgFingerprint && zt(n) && (y.svg = l.fingerprint(n));\n  const v = n.parentElement;\n  let A;\n  if (v) {\n    const T = Array.from(v.children).indexOf(n);\n    T !== -1 && (A = T + 1);\n  }\n  const S = {\n    tag: n.tagName.toLowerCase(),\n    semantics: y,\n    score: o.scoreElement(n),\n    nthChild: A\n  }, $ = [], M = {\n    onMultiple: \"best-score\",\n    onMissing: \"anchor-only\",\n    maxDepth: 3\n  }, H = m.degraded || b.degraded, E = Ut(m.degraded, b), x = {\n    version: \"1.0\",\n    anchor: m,\n    path: b.path,\n    target: S,\n    constraints: $,\n    fallback: M,\n    meta: {\n      confidence: 0,\n      // Calculated below\n      generatedAt: (/* @__PURE__ */ new Date()).toISOString(),\n      generator: \"dom-eid@1.0\",\n      source: e.source,\n      degraded: H,\n      degradationReason: E\n    }\n  };\n  return x.meta.confidence = _t(x), x.meta.confidence < e.confidenceThreshold ? null : (s.setEID(n, x), x);\n}\nfunction zt(n) {\n  return n.namespaceURI === \"http://www.w3.org/2000/svg\" || n.tagName.toLowerCase() === \"svg\" || n instanceof SVGElement;\n}\nfunction Ut(n, t) {\n  if (n && t.degraded)\n    return \"anchor-and-path-degraded\";\n  if (n)\n    return \"no-semantic-anchor\";\n  if (t.degraded)\n    return t.degradationReason;\n}\nclass st {\n  buildSelector(t, e) {\n    if (t.path.length === 0 && t.anchor.tag === t.target.tag && JSON.stringify(t.anchor.semantics) === JSON.stringify(t.target.semantics)) {\n      const c = this.buildNodeSelector(\n        t.target.tag,\n        t.target.semantics,\n        { excludeClasses: !1 }\n        // Include classes for same-element case\n      );\n      return e?.ensureUnique ? this.ensureUniqueSelector(c, t, e) : c;\n    }\n    const r = [], a = e?.ensureUnique ? this.ensureUniqueAnchor(t, e.root ?? document) : this.buildNodeSelector(t.anchor.tag, t.anchor.semantics);\n    r.push(a);\n    for (const c of t.path) {\n      let h = this.buildNodeSelector(c.tag, c.semantics);\n      c.nthChild !== void 0 && ([\"tr\", \"td\", \"th\", \"thead\", \"tbody\", \"tfoot\"].includes(c.tag) ? h += `:nth-child(${c.nthChild})` : h += `:nth-child(${c.nthChild})`), r.push(h);\n    }\n    let i = this.buildNodeSelector(\n      t.target.tag,\n      t.target.semantics,\n      { excludeClasses: e?.ensureUnique }\n      // Exclude classes initially if we need unique\n    );\n    t.target.nthChild !== void 0 && ([\"tr\", \"td\", \"th\", \"thead\", \"tbody\", \"tfoot\"].includes(t.target.tag) ? i += `:nth-child(${t.target.nthChild})` : i += `:nth-child(${t.target.nthChild})`), r.push(i);\n    const o = this.isSvgChildElement(t.target.tag), l = t.path.some((c) => c.tag === \"svg\");\n    let u;\n    if (o && l) {\n      const c = t.path.findIndex((h) => h.tag === \"svg\");\n      if (c !== -1) {\n        const h = c + 1, g = r.slice(0, h + 1), f = r.slice(h + 1, -1), p = r[r.length - 1];\n        f.length > 0 ? u = g.join(\" \") + \" > \" + f.join(\" > \") + \" > \" + p : u = g.join(\" \") + \" > \" + p;\n      } else\n        u = r.join(\" \");\n    } else\n      u = r.join(\" \");\n    if (!e?.ensureUnique)\n      return u;\n    const d = this.querySelectorSafe(u, e.root ?? document);\n    if (d.length === 1)\n      return {\n        selector: u,\n        isUnique: !0,\n        usedNthOfType: u.includes(\":nth-\"),\n        extraClassesAdded: 0\n      };\n    if (d.length === 0 || d.length > 1) {\n      const c = this.buildFullDomPathSelector(\n        t,\n        t.target.semantics,\n        e.root ?? document\n      );\n      if (c && this.isUnique(c, e.root ?? document))\n        return {\n          selector: c,\n          isUnique: !0,\n          usedNthOfType: c.includes(\":nth-\"),\n          extraClassesAdded: 0\n        };\n    }\n    return this.ensureUniqueSelector(u, t, e);\n  }\n  /**\n   * Builds selector for anchor only (used in fallback)\n   * @param eid - Element Identity\n   * @returns CSS selector for anchor\n   */\n  buildAnchorSelector(t) {\n    return this.buildNodeSelector(t.anchor.tag, t.anchor.semantics);\n  }\n  /**\n   * Ensures selector uniqueness by progressively adding classes and nth-of-type\n   */\n  ensureUniqueSelector(t, e, s) {\n    const r = s.root ?? document, a = s.maxClasses ?? 4, i = e.target.tag, o = e.target.semantics;\n    let l = t, u = 0, d = !1;\n    if (this.querySelectorSafe(l, r).length === 0) {\n      const f = this.buildFullDomPathSelector(e, o, r);\n      if (f && (l = f, this.isUnique(l, r)))\n        return {\n          selector: l,\n          isUnique: !0,\n          usedNthOfType: !1,\n          extraClassesAdded: 0\n        };\n    }\n    if (this.isUnique(l, r))\n      return {\n        selector: l,\n        isUnique: !0,\n        usedNthOfType: !1,\n        extraClassesAdded: 0\n      };\n    const h = N(o.classes ?? []);\n    for (let f = 0; f < Math.min(h.length, a); f++) {\n      const p = h[f];\n      if (l += `.${this.escapeCSS(p)}`, u++, this.isUnique(l, r))\n        return {\n          selector: l,\n          isUnique: !0,\n          usedNthOfType: !1,\n          extraClassesAdded: u\n        };\n    }\n    if (!this.isUnique(l, r)) {\n      const f = this.buildFullDomPathSelector(e, o, r);\n      if (f && this.isUnique(f, r))\n        return {\n          selector: f,\n          isUnique: !0,\n          usedNthOfType: f.includes(\":nth-of-type(\"),\n          extraClassesAdded: u\n        };\n    }\n    const g = this.findNthElementByText(l, o, r);\n    return g && (l += this.getNthSelector(g, i), d = !0), {\n      selector: l,\n      isUnique: this.isUnique(l, r),\n      usedNthOfType: d,\n      extraClassesAdded: u\n    };\n  }\n  /**\n   * Builds full DOM path selector by traversing actual DOM from anchor\n   * This handles cases where intermediate div/span elements were filtered out\n   */\n  buildFullDomPathSelector(t, e, s) {\n    const r = this.buildNodeSelector(t.anchor.tag, t.anchor.semantics), a = this.querySelectorSafe(r, s);\n    if (a.length === 0) return null;\n    for (const i of a) {\n      const o = this.findTargetWithinAnchor(i, t.target.tag, e);\n      if (o.length === 0) continue;\n      const l = o.map((u) => {\n        const d = this.scorePathMatch(u, i, t.path);\n        return { element: u, score: d };\n      });\n      l.sort((u, d) => d.score - u.score);\n      for (const { element: u } of l) {\n        const d = this.buildPathFromAnchorToTarget(i, u, t, s);\n        if (d && this.isUnique(d, s))\n          return d;\n      }\n    }\n    return null;\n  }\n  /**\n   * Scores how well a candidate's DOM path matches the EID path\n   * Compares tags, classes, attributes, and nthChild positions\n   * @param candidate - Target element candidate\n   * @param anchor - Anchor element\n   * @param eidPath - EID path nodes\n   * @returns Score (higher = better match)\n   */\n  scorePathMatch(t, e, s) {\n    const r = [];\n    let a = t.parentElement;\n    for (; a && a !== e; )\n      r.unshift(a), a = a.parentElement;\n    let i = 0;\n    const o = Math.min(r.length, s.length);\n    for (let u = 0; u < o; u++) {\n      const d = r[u], c = s[u];\n      if (d.tagName.toLowerCase() === c.tag) {\n        if (i += 10, c.nthChild !== void 0) {\n          const h = d.parentElement;\n          h && (Array.from(h.children).indexOf(d) + 1 === c.nthChild ? i += 20 : i -= 10);\n        }\n      } else\n        i -= 5;\n      if (c.semantics.classes && c.semantics.classes.length > 0) {\n        const h = c.semantics.classes.filter(\n          (g) => d.classList.contains(g)\n        );\n        i += h.length * 2;\n      }\n      if (c.semantics.attributes) {\n        const h = Object.entries(c.semantics.attributes).filter(\n          ([g, f]) => d.getAttribute(g) === f\n        );\n        i += h.length * 3;\n      }\n    }\n    const l = Math.abs(r.length - s.length);\n    return i -= l * 2, i;\n  }\n  /**\n   * Finds target elements within an anchor by matching semantics\n   */\n  findTargetWithinAnchor(t, e, s) {\n    return Array.from(t.querySelectorAll(e)).filter((a) => {\n      if (s.text) {\n        const i = a.textContent?.trim() || \"\", o = s.text.normalized;\n        if (!i.includes(o) && !o.includes(i))\n          return !1;\n      }\n      return !!(s.classes && s.classes.length > 0 && s.classes.every((o) => a.classList.contains(o)) || s.attributes && Object.entries(s.attributes).every(([o, l]) => {\n        const u = a.getAttribute(o);\n        return o === \"href\" || o === \"src\" ? k(o, u || \"\") === k(o, l) : u === l;\n      }) || s.text);\n    });\n  }\n  /**\n   * Disambiguates a parent element by trying attributes, classes, then nth-of-type\n   * Priority: stable attributes > one stable class > nth-of-type\n   * @param element The DOM element to disambiguate\n   * @param tag The tag name\n   * @param pathNode EID path node with semantics (if available)\n   * @param fullPath Current selector path (for uniqueness testing)\n   * @param root Root element for queries\n   * @returns Disambiguated selector part (e.g., \"div[role='main']\" or \"div.sidebar\" or \"div:nth-of-type(3)\")\n   */\n  disambiguateParent(t, e, s, r, a) {\n    if (s?.semantics?.attributes) {\n      const o = this.buildNodeSelector(e, s.semantics, {\n        excludeClasses: !0\n      }), l = [...r, e].join(\" > \"), u = this.querySelectorSafe(l, a), d = [...r, o].join(\" > \"), c = this.querySelectorSafe(d, a);\n      if (c.length > 0 && c.length < u.length)\n        return o;\n    }\n    if (s?.semantics?.classes) {\n      const o = N(s.semantics.classes);\n      if (o.length > 0) {\n        const l = `${e}.${this.escapeCSS(o[0])}`, u = [...r, e].join(\" > \"), d = this.querySelectorSafe(u, a), c = [...r, l].join(\" > \"), h = this.querySelectorSafe(c, a);\n        if (h.length > 0 && h.length < d.length)\n          return l;\n      }\n    }\n    const i = t.parentElement;\n    return i && Array.from(i.children).filter((l) => l.tagName.toLowerCase() === e).length > 1 ? `${e}${this.getNthSelector(t, e)}` : e;\n  }\n  /**\n   * Builds CSS selector path from anchor to target by traversing actual DOM\n   */\n  buildPathFromAnchorToTarget(t, e, s, r) {\n    const a = [];\n    let i = e;\n    for (; i && i !== t; )\n      a.unshift(i), i = i.parentElement;\n    if (i !== t)\n      return null;\n    const o = [\n      // ============================================================\n      // Strategy 0: anchor path target[attrs_only]\n      // Most flexible - no classes on target, only semantic attributes\n      // ============================================================\n      () => {\n        const l = this.buildNodeSelector(s.anchor.tag, s.anchor.semantics), u = s.target.tag, d = s.target.semantics, c = [];\n        for (const m of s.path)\n          c.push(m.tag);\n        const g = [l, ...c, u].filter(Boolean).join(\" \");\n        if (this.isUnique(g, r))\n          return g;\n        const f = this.buildNodeSelector(u, d, {\n          excludeClasses: !0\n          // KEY: no classes on target in Strategy 0\n        }), p = [\n          l,\n          ...c.slice(0, -1),\n          f\n        ].join(\" \");\n        return this.isUnique(p, r) ? p : null;\n      },\n      // ============================================================\n      // Strategy 1: anchor > parent[attrs|class|nth] > target[attrs_only]\n      // Full path with '>' combinator\n      // Parents: disambiguated using attrs > stable class > nth-of-type\n      // Target: ONLY attributes, NO classes\n      // ============================================================\n      () => {\n        const l = [this.buildNodeSelector(s.anchor.tag, s.anchor.semantics)], u = /* @__PURE__ */ new Map();\n        let d = 0;\n        for (let h = 0; h < a.length - 1; h++) {\n          const g = a[h], f = g.tagName.toLowerCase();\n          d < s.path.length && s.path[d].tag === f ? (u.set(g, s.path[d]), d++) : u.set(g, null);\n        }\n        for (let h = 0; h < a.length; h++) {\n          const g = a[h], f = g.tagName.toLowerCase();\n          if (h < a.length - 1) {\n            const b = u.get(g) || null, y = this.disambiguateParent(g, f, b, l, r);\n            l.push(y);\n            continue;\n          }\n          const p = this.buildNodeSelector(\n            s.target.tag,\n            s.target.semantics,\n            { excludeClasses: !0 }\n            // KEY: no classes on target\n          ), m = g.parentElement;\n          m && [\"td\", \"th\", \"tr\", \"thead\", \"tbody\", \"tfoot\"].includes(f) && Array.from(m.children).filter(\n            (y) => y.tagName.toLowerCase() === f\n          ).length > 1 ? l.push(`${p}${this.getNthSelector(g, f)}`) : l.push(p);\n        }\n        const c = l.join(\" > \");\n        return this.isUnique(c, r) ? c : null;\n      },\n      // ============================================================\n      // Strategy 2: anchor parent[attrs|class|nth] target[attrs_only]\n      // Descendant combinator (space) - more flexible\n      // Parents: disambiguated using attrs > stable class > nth-of-type\n      // Target: ONLY attributes, NO classes\n      // ============================================================\n      () => {\n        const u = [this.buildNodeSelector(s.anchor.tag, s.anchor.semantics)];\n        for (let h = 0; h < a.length - 1; h++) {\n          const f = a[h].tagName.toLowerCase(), p = s.path[h] || null, m = u.join(\" \") + \" \" + f;\n          if (this.querySelectorSafe(m, r).length > 1) {\n            if (p?.semantics?.attributes) {\n              const A = this.buildNodeSelector(f, p.semantics, {\n                excludeClasses: !0\n              }), S = u.join(\" \") + \" \" + A;\n              if (this.querySelectorSafe(S, r).length === 1 || this.querySelectorSafe(S + \" \" + s.target.tag, r).length === 1) {\n                u.push(A);\n                continue;\n              }\n            }\n            if (p?.semantics?.classes) {\n              const A = N(p.semantics.classes);\n              if (A.length > 0) {\n                const S = `${f}.${this.escapeCSS(A[0])}`, $ = u.join(\" \") + \" \" + S;\n                if (this.querySelectorSafe($, r).length === 1 || this.querySelectorSafe($ + \" \" + s.target.tag, r).length === 1) {\n                  u.push(S);\n                  continue;\n                }\n              }\n            }\n            const y = a[h], v = y.parentElement;\n            if (v && Array.from(v.children).filter(\n              (S) => S.tagName.toLowerCase() === f\n            ).length > 1) {\n              u.push(`${f}${this.getNthSelector(y, f)}`);\n              continue;\n            }\n          }\n          u.push(f);\n        }\n        const d = this.buildNodeSelector(\n          s.target.tag,\n          s.target.semantics,\n          { excludeClasses: !0 }\n          // KEY: no classes on target\n        );\n        u.push(d);\n        const c = u.join(\" \");\n        return this.isUnique(c, r) ? c : null;\n      },\n      // ============================================================\n      // Strategy 3: anchor path target[attrs + 1_stable_class]\n      // Add ONE stable class to target (must be semantic, NOT utility)\n      // Only use this if attrs alone are not sufficient\n      // ============================================================\n      () => {\n        const l = this.buildNodeSelector(s.anchor.tag, s.anchor.semantics), u = [];\n        for (const g of s.path)\n          u.push(g.tag);\n        if (N(s.target.semantics.classes ?? []).length === 0)\n          return null;\n        const c = this.buildNodeSelector(\n          s.target.tag,\n          s.target.semantics,\n          { maxClasses: 1 }\n          // KEY: ONE stable class only\n        ), h = [l, ...u.slice(0, -1), c].join(\" \");\n        return this.isUnique(h, r) ? h : null;\n      },\n      // ============================================================\n      // Strategy 4: anchor path target[attrs]:nth-of-type(N)\n      // Last resort - add nth-of-type to target\n      // Only use when all other strategies fail\n      // ============================================================\n      () => {\n        const l = this.buildNodeSelector(s.anchor.tag, s.anchor.semantics), u = [];\n        for (const p of s.path)\n          u.push(p.tag);\n        const d = a[a.length - 1], c = d.parentElement;\n        if (!c || Array.from(c.children).filter(\n          (p) => p.tagName.toLowerCase() === s.target.tag\n        ).length <= 1) return null;\n        const g = this.buildNodeSelector(\n          s.target.tag,\n          s.target.semantics,\n          { excludeClasses: !0 }\n          // No classes, just attrs + nth\n        ) + this.getNthSelector(d, s.target.tag), f = [l, ...u.slice(0, -1), g].join(\" \");\n        return this.isUnique(f, r) ? f : null;\n      }\n    ];\n    for (const l of o) {\n      const u = l();\n      if (u) return u;\n    }\n    return null;\n  }\n  /**\n   * Builds a minimal selector for a DOM element\n   * @param element The DOM element to create a selector for\n   * @returns A minimal CSS selector for the element\n   */\n  buildElementSelector(t) {\n    const e = t.tagName.toLowerCase();\n    let s = e;\n    if (t.id && !D(t.id))\n      return `${e}#${this.escapeCSS(t.id)}`;\n    const r = Array.from(t.classList), a = N(r);\n    a.length > 0 && (s += a.slice(0, 2).map((o) => `.${this.escapeCSS(o)}`).join(\"\"));\n    const i = t.getAttribute(\"role\");\n    return i && (s += `[role=\"${this.escapeAttr(i)}\"]`), s;\n  }\n  /**\n   * Safe querySelectorAll that doesn't throw\n   */\n  querySelectorSafe(t, e) {\n    try {\n      return Array.from(e.querySelectorAll(t));\n    } catch {\n      return [];\n    }\n  }\n  /**\n   * Finds element by matching text content\n   * Returns the matching element (used with getNthSelector for table-aware positioning)\n   */\n  findNthElementByText(t, e, s) {\n    const r = this.querySelectorSafe(t, s);\n    if (r.length <= 1) return null;\n    if (e.text) {\n      const a = e.text.normalized;\n      for (const i of r) {\n        const o = i.textContent?.trim() || \"\";\n        if (o === a || o.includes(a) || a.includes(o))\n          return i;\n      }\n    }\n    return null;\n  }\n  /**\n   * Checks if selector matches exactly one element\n   */\n  isUnique(t, e) {\n    try {\n      return e.querySelectorAll(t).length === 1;\n    } catch {\n      return !1;\n    }\n  }\n  /**\n   * Gets nth-of-type index for an element\n   */\n  getNthOfTypeIndex(t, e) {\n    const s = t.parentElement;\n    if (!s) return null;\n    const a = Array.from(s.children).filter((i) => i.tagName.toLowerCase() === e).indexOf(t);\n    return a !== -1 ? a + 1 : null;\n  }\n  /**\n   * FIX 2: Ensures anchor selector is unique in the document\n   * Priority order: tag โ tag.class โ tag[attr] โ tag:nth-of-type(N)\n   * @param eid - Element Identity with anchor information\n   * @param root - Root element for uniqueness check\n   * @returns Unique selector for anchor\n   */\n  ensureUniqueAnchor(t, e) {\n    const s = t.anchor.tag, r = t.anchor.semantics;\n    if (this.isUnique(s, e))\n      return s;\n    if (r.classes && r.classes.length > 0) {\n      const i = N(r.classes);\n      if (i.length > 0) {\n        const o = `${s}.${this.escapeCSS(i[0])}`;\n        if (this.isUnique(o, e))\n          return o;\n      }\n    }\n    if (r.attributes) {\n      const i = this.getSortedAttributes(r.attributes);\n      for (const { name: o, value: l } of i) {\n        const u = o === \"href\" || o === \"src\" ? k(o, l) : l;\n        if (u) {\n          const d = `${s}[${o}=\"${this.escapeAttr(u)}\"]`;\n          if (this.isUnique(d, e))\n            return d;\n        }\n      }\n    }\n    if (t.anchor.nthChild !== void 0) {\n      const i = `${s}:nth-child(${t.anchor.nthChild})`;\n      if (this.isUnique(i, e))\n        return i;\n    }\n    const a = Array.from(e.querySelectorAll(s));\n    if (a.length > 1) {\n      const i = this.findElementBySemantics(a, r);\n      if (i) {\n        const o = this.getNthOfTypeIndex(i, s);\n        if (o)\n          return `${s}:nth-of-type(${o})`;\n      }\n    }\n    return s;\n  }\n  /**\n   * FIX 2: Finds element by matching semantics\n   * @param elements - Array of candidate elements\n   * @param semantics - Semantics to match against\n   * @returns Matching element or null\n   */\n  findElementBySemantics(t, e) {\n    return e.classes && e.classes.length > 0 || e.attributes && Object.keys(e.attributes).length > 0 || e.text ? t.find((r) => {\n      if (e.classes && e.classes.length > 0 && e.classes.every((i) => r.classList.contains(i)) || e.attributes && Object.entries(e.attributes).every(\n        ([i, o]) => r.getAttribute(i) === o\n      ))\n        return !0;\n      if (e.text) {\n        const a = r.textContent?.trim() || \"\", i = e.text.normalized;\n        if (a.includes(i) || i.includes(a))\n          return !0;\n      }\n      return !1;\n    }) || null : t.length > 0 ? t[0] : null;\n  }\n  /**\n   * FIX 3: Gets nth selector - nth-child for tables, nth-of-type for others\n   * This method is now ACTIVELY INTEGRATED in selector generation logic\n   * to ensure table elements use position-specific nth-child selectors\n   * @param element - Element to get selector for\n   * @param tag - Tag name\n   * @returns nth selector string (e.g., \":nth-child(2)\" or \":nth-of-type(2)\")\n   */\n  getNthSelector(t, e) {\n    const s = t.parentElement;\n    if (!s) return \"\";\n    const r = Array.from(s.children), a = r.indexOf(t) + 1;\n    return [\"tr\", \"td\", \"th\", \"thead\", \"tbody\", \"tfoot\"].includes(e) ? `:nth-child(${a})` : `:nth-of-type(${r.filter((l) => l.tagName.toLowerCase() === e).indexOf(t) + 1})`;\n  }\n  /**\n   * Gets attribute priority for sorting\n   * @param attrName - Attribute name\n   * @returns Priority number (higher = more priority)\n   */\n  getAttributePriority(t) {\n    return w[t] !== void 0 ? w[t] : t.startsWith(\"data-\") ? w[\"data-*\"] : t.startsWith(\"aria-\") ? w[\"aria-*\"] : 0;\n  }\n  /**\n   * Checks if attribute should be ignored\n   * @param attrName - Attribute name\n   * @returns True if should be ignored\n   */\n  shouldIgnoreAttribute(t) {\n    return !!(B.has(t) || t.startsWith(\"on\") || t.startsWith(\"ng-\") || t.startsWith(\"_ng\") || t.startsWith(\"data-reactid\") || t.startsWith(\"data-react\") || t.startsWith(\"data-v-\"));\n  }\n  /**\n   * Gets attributes sorted by priority\n   * @param attributes - Attributes object\n   * @returns Sorted array of attributes with priority\n   */\n  getSortedAttributes(t) {\n    return Object.entries(t).filter(([e]) => !this.shouldIgnoreAttribute(e)).filter(\n      ([e, s]) => !G.has(e) || !V(s)\n    ).map(([e, s]) => ({\n      name: e,\n      value: s,\n      priority: this.getAttributePriority(e)\n    })).filter((e) => e.priority > 0).sort((e, s) => s.priority - e.priority);\n  }\n  /**\n   * Builds selector for a single node\n   * Priority: ID โ semantic attributes โ role โ classes\n   */\n  buildNodeSelector(t, e, s) {\n    let r = t;\n    if (e.id)\n      return r += `#${this.escapeCSS(e.id)}`, r;\n    if (e.attributes) {\n      const a = this.getSortedAttributes(e.attributes);\n      for (const { name: i, value: o } of a) {\n        const l = i === \"href\" || i === \"src\" ? k(i, o) : o;\n        l && (r += `[${i}=\"${this.escapeAttr(l)}\"]`);\n      }\n    }\n    if (e.role && !e.attributes?.role && (r += `[role=\"${this.escapeAttr(e.role)}\"]`), !s?.excludeClasses && e.classes && e.classes.length > 0) {\n      const a = N(e.classes), i = s?.maxClasses !== void 0 ? a.slice(0, s.maxClasses) : a;\n      r += i.map((o) => `.${this.escapeCSS(o)}`).join(\"\");\n    }\n    return r;\n  }\n  /**\n   * Escapes special characters for CSS selector\n   */\n  escapeCSS(t) {\n    let e = t;\n    return e.startsWith(\"-\") && (e = \"\\\\-\" + e.slice(1)), e = e.replace(/([!\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~])/g, \"\\\\$1\"), e;\n  }\n  /**\n   * Escapes quotes for attribute values\n   */\n  escapeAttr(t) {\n    return t.replace(/\"/g, '\\\\\"').replace(/\\\\/g, \"\\\\\\\\\");\n  }\n  /**\n   * Checks if element tag is an SVG child element\n   * @param tag - Element tag name\n   * @returns True if element is an SVG child\n   */\n  isSvgChildElement(t) {\n    return ht.includes(t);\n  }\n}\nclass Ft {\n  /**\n   * Filters elements that match the semantics\n   * @param elements - Candidate elements\n   * @param semantics - Target semantics to match\n   * @returns Filtered elements that match\n   */\n  match(t, e) {\n    return t.filter((s) => this.matchElement(s, e));\n  }\n  /**\n   * Checks if a single element matches the semantics\n   */\n  matchElement(t, e) {\n    return !(e.text && !this.matchText(t, e.text) || e.attributes && !this.matchAttributes(t, e.attributes) || e.svg && !this.matchSvgFingerprint(t, e.svg));\n  }\n  /**\n   * Matches text content\n   * Prioritizes direct text nodes, but falls back to full textContent if no direct text\n   */\n  matchText(t, e) {\n    const a = Array.from(t.childNodes).filter(\n      (o) => o.nodeType === Node.TEXT_NODE\n    ).map((o) => o.textContent?.trim() ?? \"\").join(\" \") || (t.textContent?.trim() ?? \"\");\n    if (!a) return !1;\n    const i = Q(a);\n    return e.matchMode === \"partial\" ? i.includes(e.normalized) : i === e.normalized;\n  }\n  /**\n   * Matches attributes\n   */\n  matchAttributes(t, e) {\n    for (const [s, r] of Object.entries(e))\n      if (t.getAttribute(s) !== r)\n        return !1;\n    return !0;\n  }\n  /**\n   * Matches SVG fingerprint\n   */\n  matchSvgFingerprint(t, e) {\n    if (t.tagName.toLowerCase() !== e.shape)\n      return !1;\n    if (e.dHash && e.shape === \"path\") {\n      const s = t.getAttribute(\"d\");\n      if (s && this.computePathHash(s) !== e.dHash)\n        return !1;\n    }\n    return !(e.geomHash && [\"circle\", \"rect\", \"ellipse\", \"line\"].includes(e.shape) && this.computeGeomHash(t, e.shape) !== e.geomHash || e.titleText && t.querySelector(\"title\")?.textContent?.trim() !== e.titleText);\n  }\n  /**\n   * Computes simple path hash (matching SvgFingerprinter)\n   */\n  computePathHash(t) {\n    const r = (t.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi) ?? []).slice(0, 5).map((a) => a.trim().replace(/(-?\\d+\\.?\\d*)/g, (i) => parseFloat(i).toFixed(1))).join(\" \");\n    return this.simpleHash(r);\n  }\n  /**\n   * Computes geometry hash for non-path shapes (matching SvgFingerprinter)\n   */\n  computeGeomHash(t, e) {\n    const s = [];\n    switch (e) {\n      case \"circle\":\n        s.push(`r=${t.getAttribute(\"r\") ?? \"0\"}`);\n        break;\n      case \"rect\": {\n        const r = parseFloat(t.getAttribute(\"width\") ?? \"0\"), a = parseFloat(t.getAttribute(\"height\") ?? \"0\");\n        r > 0 && a > 0 && s.push(`ratio=${(r / a).toFixed(2)}`);\n        break;\n      }\n      case \"ellipse\": {\n        const r = parseFloat(t.getAttribute(\"rx\") ?? \"0\"), a = parseFloat(t.getAttribute(\"ry\") ?? \"0\");\n        r > 0 && a > 0 && s.push(`ratio=${(r / a).toFixed(2)}`);\n        break;\n      }\n      case \"line\": {\n        const r = parseFloat(t.getAttribute(\"x1\") ?? \"0\"), a = parseFloat(t.getAttribute(\"y1\") ?? \"0\"), i = parseFloat(t.getAttribute(\"x2\") ?? \"0\"), o = parseFloat(t.getAttribute(\"y2\") ?? \"0\"), l = Math.atan2(o - a, i - r);\n        s.push(`angle=${l.toFixed(2)}`);\n        break;\n      }\n    }\n    return this.simpleHash(s.join(\";\"));\n  }\n  /**\n   * Simple hash function (matching SvgFingerprinter)\n   */\n  simpleHash(t) {\n    let e = 0;\n    for (let s = 0; s < t.length; s++) {\n      const r = t.charCodeAt(s);\n      e = (e << 5) - e + r, e = e & e;\n    }\n    return Math.abs(e).toString(16).padStart(8, \"0\");\n  }\n}\nclass jt {\n  /**\n   * Applies a single constraint to candidates\n   * @param candidates - Current candidate elements\n   * @param constraint - Constraint to apply\n   * @returns Filtered candidates\n   */\n  applyConstraint(t, e) {\n    switch (e.type) {\n      case \"text-proximity\":\n        return this.applyTextProximity(\n          t,\n          e.params\n        );\n      case \"position\":\n        return this.applyPosition(t, e.params);\n      default:\n        return t;\n    }\n  }\n  /**\n   * Applies text proximity constraint using Levenshtein distance\n   */\n  applyTextProximity(t, e) {\n    return t.filter((s) => {\n      const r = s.textContent?.trim() ?? \"\";\n      return this.levenshteinDistance(r, e.reference) <= e.maxDistance;\n    });\n  }\n  /**\n   * Applies position constraint\n   */\n  applyPosition(t, e) {\n    if (t.length <= 1) return t;\n    switch (e.strategy) {\n      case \"first-in-dom\":\n        return [t[0]];\n      case \"top-most\":\n        return [this.getTopMost(t)];\n      case \"left-most\":\n        return [this.getLeftMost(t)];\n      default:\n        return [t[0]];\n    }\n  }\n  /**\n   * Gets the top-most element by bounding rect\n   */\n  getTopMost(t) {\n    return t.reduce((e, s) => {\n      try {\n        const r = e.getBoundingClientRect();\n        return s.getBoundingClientRect().top < r.top ? s : e;\n      } catch {\n        return e;\n      }\n    });\n  }\n  /**\n   * Gets the left-most element by bounding rect\n   */\n  getLeftMost(t) {\n    return t.reduce((e, s) => {\n      try {\n        const r = e.getBoundingClientRect();\n        return s.getBoundingClientRect().left < r.left ? s : e;\n      } catch {\n        return e;\n      }\n    });\n  }\n  /**\n   * Calculates Levenshtein distance between two strings\n   */\n  levenshteinDistance(t, e) {\n    if (t === e) return 0;\n    if (t.length === 0) return e.length;\n    if (e.length === 0) return t.length;\n    const s = Array.from({ length: e.length + 1 }, (r, a) => a);\n    for (let r = 1; r <= t.length; r++) {\n      let a = r;\n      for (let i = 1; i <= e.length; i++) {\n        const o = t[r - 1] === e[i - 1] ? s[i - 1] : Math.min(s[i - 1], a, s[i]) + 1;\n        s[i - 1] = a, a = o;\n      }\n      s[e.length] = a;\n    }\n    return s[e.length];\n  }\n}\nclass Wt {\n  constructor() {\n    this.cssGenerator = new st();\n  }\n  /**\n   * Handles fallback when resolution fails\n   * @param eid - Element Identity being resolved\n   * @param dom - Document or element to search in\n   * @returns Fallback resolution result\n   */\n  handleFallback(t, e) {\n    const { onMissing: s } = t.fallback;\n    switch (s) {\n      case \"anchor-only\":\n        return this.fallbackToAnchor(t, e);\n      case \"strict\":\n        return {\n          status: \"error\",\n          elements: [],\n          warnings: [\"Element not found (strict mode)\"],\n          confidence: 0,\n          meta: { degraded: !0, degradationReason: \"strict-not-found\" }\n        };\n      default:\n        return {\n          status: \"error\",\n          elements: [],\n          warnings: [\"Element not found\"],\n          confidence: 0,\n          meta: { degraded: !0, degradationReason: \"not-found\" }\n        };\n    }\n  }\n  /**\n   * Attempts to find and return the anchor element as fallback\n   */\n  fallbackToAnchor(t, e) {\n    const s = this.cssGenerator.buildAnchorSelector(t), r = e instanceof Document ? e : e.ownerDocument ?? e;\n    try {\n      const a = r.querySelector(s);\n      if (a)\n        return {\n          status: \"degraded-fallback\",\n          elements: [a],\n          warnings: [\"Target not found, returning anchor\"],\n          confidence: t.meta.confidence * 0.3,\n          meta: { degraded: !0, degradationReason: \"anchor-fallback\" }\n        };\n    } catch (a) {\n      const i = a instanceof Error ? a.message : \"Unknown selector error\";\n      return {\n        status: \"error\",\n        elements: [],\n        warnings: [`Invalid anchor selector: ${i}`],\n        confidence: 0,\n        meta: { degraded: !0, degradationReason: \"invalid-anchor-selector\" }\n      };\n    }\n    return {\n      status: \"error\",\n      elements: [],\n      warnings: [\"Anchor also not found\"],\n      confidence: 0,\n      meta: { degraded: !0, degradationReason: \"anchor-not-found\" }\n    };\n  }\n  /**\n   * Handles ambiguous results (multiple matches)\n   * @param elements - All matching elements\n   * @param eid - Original Element Identity\n   * @returns Resolution result based on fallback rules\n   */\n  handleAmbiguous(t, e) {\n    const { onMultiple: s } = e.fallback;\n    switch (s) {\n      case \"first\":\n        return {\n          status: \"success\",\n          elements: [t[0]],\n          warnings: [\"Multiple matches, returning first\"],\n          confidence: e.meta.confidence * 0.7,\n          meta: { degraded: !0, degradationReason: \"first-of-multiple\" }\n        };\n      case \"best-score\":\n        return this.selectBestScoring(t, e);\n      default:\n        return {\n          status: \"ambiguous\",\n          elements: t,\n          warnings: [`Multiple matches: ${t.length}`],\n          confidence: e.meta.confidence * 0.5,\n          meta: { degraded: !0, degradationReason: \"multiple-matches\" }\n        };\n    }\n  }\n  /**\n   * Selects the best-scoring element from candidates\n   * Re-scores each element based on semantic match quality\n   */\n  selectBestScoring(t, e) {\n    const s = e.target.semantics;\n    let r = t[0], a = -1;\n    for (const i of t) {\n      const o = this.scoreElementMatch(i, s);\n      o > a && (a = o, r = i);\n    }\n    return {\n      status: \"success\",\n      elements: [r],\n      warnings: [`Multiple matches (${t.length}), selected best-scoring element`],\n      confidence: e.meta.confidence * (0.7 + a * 0.2),\n      meta: { degraded: !0, degradationReason: \"best-of-multiple\" }\n    };\n  }\n  /**\n   * Scores how well an element matches the target semantics\n   * @returns Score from 0 to 1\n   */\n  scoreElementMatch(t, e) {\n    let s = 0, r = 0;\n    if (e.id && (r += 0.3, t.id === e.id && (s += 0.3)), e.classes && e.classes.length > 0) {\n      r += 0.25;\n      const a = Array.from(t.classList), i = e.classes.filter(\n        (o) => a.includes(o)\n      ).length;\n      s += i / e.classes.length * 0.25;\n    }\n    if (e.attributes) {\n      const a = Object.entries(e.attributes);\n      if (a.length > 0) {\n        r += 0.2;\n        let i = 0;\n        for (const [o, l] of a)\n          t.getAttribute(o) === l && i++;\n        s += i / a.length * 0.2;\n      }\n    }\n    if (e.role && (r += 0.15, t.getAttribute(\"role\") === e.role && (s += 0.15)), e.text) {\n      r += 0.1;\n      const a = Q(t.textContent);\n      a === e.text.normalized ? s += 0.1 : a.includes(e.text.normalized) && (s += 0.05);\n    }\n    return r > 0 ? s / r : 0;\n  }\n}\nfunction Bt(n, t, e = {}) {\n  const s = { ...dt, ...e }, r = new st(), a = new Ft(), i = new jt(), o = new Wt(), l = t instanceof Document ? t : t.ownerDocument ?? t, u = r.buildSelector(n, {\n    ensureUnique: !1,\n    root: l\n  });\n  let d;\n  try {\n    d = Array.from(l.querySelectorAll(u));\n  } catch (f) {\n    const p = f instanceof Error ? f.message : \"Unknown selector error\";\n    return {\n      status: \"error\",\n      elements: [],\n      warnings: [`Invalid CSS selector: ${u}`, `Error: ${p}`],\n      confidence: 0,\n      meta: { degraded: !0, degradationReason: \"invalid-selector\" }\n    };\n  }\n  d.length > s.maxCandidates && (d = d.slice(0, s.maxCandidates));\n  const c = a.match(d, n.target.semantics);\n  if (c.length === 1)\n    return {\n      status: \"success\",\n      elements: c,\n      warnings: [],\n      confidence: n.meta.confidence,\n      meta: { degraded: !1 }\n    };\n  if (c.length === 0)\n    return s.enableFallback ? o.handleFallback(n, l) : {\n      status: \"error\",\n      elements: [],\n      warnings: [\"No matching elements found\"],\n      confidence: 0,\n      meta: { degraded: !0, degradationReason: \"not-found\" }\n    };\n  let h = c;\n  const g = Gt(n.constraints);\n  for (const f of g) {\n    if (h = i.applyConstraint(h, f), h.length === 1)\n      return {\n        status: \"success\",\n        elements: h,\n        warnings: [],\n        confidence: n.meta.confidence * 0.9,\n        meta: { degraded: !1 }\n      };\n    if (h.length === 0)\n      return s.enableFallback ? o.handleFallback(n, l) : {\n        status: \"error\",\n        elements: [],\n        warnings: [\"Constraints eliminated all candidates\"],\n        confidence: 0,\n        meta: { degraded: !0, degradationReason: \"over-constrained\" }\n      };\n  }\n  return s.strictMode ? {\n    status: \"ambiguous\",\n    elements: h,\n    warnings: [`Non-unique resolution: ${h.length} matches`],\n    confidence: n.meta.confidence * 0.7,\n    meta: { degraded: !0, degradationReason: \"ambiguous\" }\n  } : o.handleAmbiguous(h, n);\n}\nfunction Gt(n) {\n  return [...n].sort((t, e) => e.priority - t.priority);\n}\nfunction oe(n) {\n  const t = [], e = [];\n  if (n.version ? n.version !== \"1.0\" && e.push(`Unknown version: ${n.version}`) : t.push(\"Missing version field\"), n.anchor ? (n.anchor.tag || t.push(\"Anchor missing tag\"), typeof n.anchor.score != \"number\" && t.push(\"Anchor missing score\"), n.anchor.semantics || t.push(\"Anchor missing semantics\")) : t.push(\"Missing anchor field\"), n.target ? (n.target.tag || t.push(\"Target missing tag\"), typeof n.target.score != \"number\" && t.push(\"Target missing score\"), n.target.semantics || t.push(\"Target missing semantics\")) : t.push(\"Missing target field\"), !Array.isArray(n.path))\n    t.push(\"Path must be an array\");\n  else\n    for (let s = 0; s < n.path.length; s++) {\n      const r = n.path[s];\n      r.tag || t.push(`Path node ${s} missing tag`), r.semantics || t.push(`Path node ${s} missing semantics`);\n    }\n  return n.meta ? (typeof n.meta.confidence != \"number\" && e.push(\"Missing confidence score\"), n.meta.generatedAt || e.push(\"Missing generatedAt timestamp\")) : t.push(\"Missing meta field\"), Array.isArray(n.constraints) || e.push(\"Constraints should be an array\"), n.fallback || e.push(\"Missing fallback rules\"), {\n    valid: t.length === 0,\n    errors: t,\n    warnings: e\n  };\n}\nfunction ce(n) {\n  if (!n || typeof n != \"object\") return !1;\n  const t = n;\n  return typeof t.version == \"string\" && typeof t.anchor == \"object\" && Array.isArray(t.path) && typeof t.target == \"object\";\n}\nconst rt = {\n  maxClasses: 2,\n  maxAttributes: 5,\n  includeText: !0,\n  maxTextLength: 50,\n  simplifyTarget: !0,\n  includeConstraints: !0\n};\nfunction et(n) {\n  return n === \"id\" ? 101 : w[n] !== void 0 ? w[n] : n.startsWith(\"data-\") ? w[\"data-*\"] : n.startsWith(\"aria-\") ? w[\"aria-*\"] : 0;\n}\nfunction Vt(n) {\n  return [\"id\", \"data-testid\", \"data-qa\", \"data-cy\", \"href\", \"text\", \"role\"].includes(n);\n}\nfunction Qt(n) {\n  return !!(/@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/.test(n) || /(\\+?\\d{1,3}[-.\\s]?)?\\(?\\d{3}\\)?[-.\\s]?\\d{3}[-.\\s]?\\d{4}/.test(n) || /\\d{4}[-\\s]?\\d{4}[-\\s]?\\d{4}[-\\s]?\\d{4}/.test(n));\n}\nfunction Zt(n, t) {\n  const e = { ...rt, ...t }, s = `v${n.version}`, r = U(n.anchor, !1, e), a = n.path.length > 0 ? n.path.map((l) => U(l, !1, e)).join(\" > \") + \" > \" : \"\", i = U(n.target, !0, e), o = e.includeConstraints ? Xt(n) : \"\";\n  return `${s}: ${r} :: ${a}${i}${o}`;\n}\nfunction Yt(n) {\n  n = n.trim();\n  const t = n.match(/^v(\\d+(?:\\.\\d+)?)\\s*:\\s*/);\n  if (!t)\n    throw new Error('Invalid SEQL Selector: missing version prefix (expected \"v1:\")');\n  const e = t[1];\n  if (e !== \"1.0\" && e !== \"1\")\n    throw new Error(`Unsupported SEQL Selector version: v${e} (only v1.0 is supported)`);\n  let s = n.slice(t[0].length);\n  const r = s.match(/^(.+?)\\s*::\\s*/);\n  if (!r)\n    throw new Error('Invalid SEQL Selector: missing anchor separator \"::\"');\n  const a = r[1].trim();\n  s = s.slice(r[0].length);\n  const i = s.match(/\\s*\\{([^}]+)\\}\\s*$/);\n  let o = \"\";\n  i && (o = i[1], s = s.slice(0, i.index));\n  const l = s.split(/\\s*>\\s*/).map((m) => m.trim()).filter((m) => m);\n  if (l.length === 0)\n    throw new Error(\"Invalid SEQL Selector: missing target node\");\n  const u = l[l.length - 1], d = l.slice(0, -1), c = F(a, !0), h = d.map((m) => F(m, !1)), g = F(u, !1), f = Kt(o);\n  return {\n    version: \"1.0\",\n    anchor: c,\n    path: h,\n    target: g,\n    constraints: f,\n    fallback: {\n      onMultiple: \"best-score\",\n      onMissing: \"anchor-only\",\n      maxDepth: 10\n    },\n    meta: {\n      confidence: 0.7,\n      generatedAt: (/* @__PURE__ */ new Date()).toISOString(),\n      generator: \"seql-parser@1.0\",\n      source: \"seql-string\",\n      degraded: !1\n    }\n  };\n}\nfunction U(n, t = !1, e = rt) {\n  const { tag: s, semantics: r } = n;\n  let a = s;\n  const i = [], o = { ...r.attributes };\n  r.id && (o.id = r.id), r.role && !o.role && (o.role = r.role);\n  const l = Object.entries(o).map(([c, h]) => {\n    const g = et(c), f = c === \"href\" || c === \"src\" ? k(c, h) : h;\n    return { name: c, value: f, priority: g };\n  }).filter((c) => c.name !== \"id\" && c.name !== \"class\" && B.has(c.name) || G.has(c.name) && V(c.value) ? !1 : c.priority > 0 || c.name === \"role\" || c.name === \"id\");\n  l.sort((c, h) => h.priority - c.priority);\n  const u = l.slice(0, e.maxAttributes);\n  u.sort((c, h) => c.name.localeCompare(h.name));\n  for (const { name: c, value: h } of u)\n    i.push(`${c}=\"${j(h)}\"`);\n  if (e.includeText && r.text && !Qt(r.text.normalized)) {\n    const c = r.text.normalized;\n    c.length > 0 && c.length <= e.maxTextLength && i.push(`text=\"${j(c)}\"`);\n  }\n  let d = i;\n  if (i.length > 0 && (t && e.simplifyTarget && r.id && (d = i.filter((c) => {\n    const h = c.split(\"=\")[0];\n    return et(h) >= 60 || h === \"text\" || h === \"id\" || h === \"role\";\n  })), d.length > 0 && d.sort((c, h) => c.localeCompare(h))), r.classes && r.classes.length > 0) {\n    const c = N(r.classes), h = !!r.id || i.some(\n      (f) => f.startsWith(\"href=\") || f.startsWith(\"data-testid=\") || f.startsWith(\"text=\") || f.startsWith(\"role=\")\n    );\n    if (!(t && e.simplifyTarget && h) && c.length > 0) {\n      const f = c.sort().slice(0, e.maxClasses);\n      a += f.map((p) => `.${p}`).join(\"\");\n    }\n  }\n  if (d.length > 0 && (a += `[${d.join(\",\")}]`), \"nthChild\" in n && n.nthChild) {\n    const c = !!r.id || r.attributes && Object.keys(r.attributes).some(Vt);\n    t && e.simplifyTarget && c || (a += `#${n.nthChild}`);\n  }\n  return a;\n}\nfunction Xt(n) {\n  if (!n.constraints || n.constraints.length === 0)\n    return \"\";\n  const t = [];\n  for (const e of n.constraints)\n    switch (e.type) {\n      case \"uniqueness\":\n        t.push(\"unique=true\");\n        break;\n      case \"position\":\n        e.params && e.params.strategy && t.push(`pos=${e.params.strategy}`);\n        break;\n      case \"text-proximity\":\n        if (e.params && e.params.reference) {\n          const s = j(String(e.params.reference));\n          t.push(`text=\"${s}\"`);\n        }\n        break;\n    }\n  return t.length === 0 ? \"\" : ` {${t.join(\",\")}}`;\n}\nfunction F(n, t) {\n  let e = n;\n  const s = {}, r = e.match(/^([a-z][a-z0-9-]*)/);\n  if (!r)\n    throw new Error(`Invalid node: missing tag name in \"${n}\"`);\n  const a = r[1];\n  e = e.slice(a.length);\n  const i = [];\n  let o;\n  for (; o = e.match(/^\\.([a-zA-Z][a-zA-Z0-9-_]*)/); )\n    i.push(o[1]), e = e.slice(o[0].length);\n  i.length > 0 && (s.classes = i);\n  const l = e.match(/^\\[([^\\]]+)\\]/);\n  if (l) {\n    const c = l[1], h = {}, g = Jt(c);\n    for (const f of g) {\n      const p = f.match(/^([a-z][a-z0-9-]*)(?:=|~=)\"((?:[^\"\\\\]|\\\\.)*)\"/);\n      if (p) {\n        const [, m, b] = p;\n        h[m] = nt(b);\n      }\n    }\n    Object.keys(h).length > 0 && (h.text && (s.text = {\n      raw: h.text,\n      normalized: h.text\n    }, delete h.text), h.id && (s.id = h.id, delete h.id), h.role && (s.role = h.role, delete h.role), Object.keys(h).length > 0 && (s.attributes = h)), e = e.slice(l[0].length);\n  }\n  let u;\n  const d = e.match(/^#(\\d+)/);\n  if (d && (u = parseInt(d[1], 10), e = e.slice(d[0].length)), e.trim())\n    throw new Error(`Invalid node: unexpected content \"${e}\" in \"${n}\"`);\n  return t ? {\n    tag: a,\n    semantics: s,\n    score: 0.7,\n    degraded: !1\n  } : {\n    tag: a,\n    semantics: s,\n    score: 0.7,\n    nthChild: u\n  };\n}\nfunction Kt(n) {\n  if (!n.trim())\n    return [];\n  const t = [], e = n.split(\",\").map((s) => s.trim());\n  for (const s of e) {\n    const [r, a] = s.split(\"=\").map((i) => i.trim());\n    switch (r) {\n      case \"unique\":\n        a === \"true\" && t.push({\n          type: \"uniqueness\",\n          params: {\n            mode: \"strict\"\n          },\n          priority: 90\n        });\n        break;\n      case \"pos\":\n        t.push({\n          type: \"position\",\n          params: {\n            strategy: a\n          },\n          priority: 70\n        });\n        break;\n      case \"text\": {\n        const i = a.replace(/^\"(.*)\"$/, \"$1\");\n        t.push({\n          type: \"text-proximity\",\n          params: {\n            reference: nt(i),\n            maxDistance: 5\n          },\n          priority: 60\n        });\n        break;\n      }\n    }\n  }\n  return t;\n}\nfunction Jt(n) {\n  const t = [];\n  let e = \"\", s = !1;\n  for (let r = 0; r < n.length; r++) {\n    const a = n[r];\n    a === '\"' && (r === 0 || n[r - 1] !== \"\\\\\") ? (s = !s, e += a) : a === \",\" && !s ? (e.trim() && t.push(e.trim()), e = \"\") : e += a;\n  }\n  return e.trim() && t.push(e.trim()), t;\n}\nfunction j(n) {\n  return n.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"').replace(/>/g, \"\\\\>\").replace(/:/g, \"\\\\:\");\n}\nfunction nt(n) {\n  return n.replace(/\\\\\\\\/g, \"\\0\").replace(/\\\\\"/g, '\"').replace(/\\\\>/g, \">\").replace(/\\\\:/g, \":\").replace(/\\x00/g, \"\\\\\");\n}\nfunction le(n, t, e) {\n  const s = Y(n, t);\n  return s ? Zt(s, e) : null;\n}\nfunction he(n, t, e) {\n  try {\n    const s = Yt(n);\n    return Bt(s, t, e).elements || [];\n  } catch (s) {\n    return console.error(\"Failed to resolve SEQL Selector:\", s), [];\n  }\n}\nconst te = /* @__PURE__ */ new Set([\"script\", \"style\", \"noscript\", \"meta\", \"link\", \"head\", \"title\"]);\nfunction W(n) {\n  return n.id && !D(n.id) ? 3 : n.hasAttribute(\"role\") || n.hasAttribute(\"aria-label\") || n.hasAttribute(\"aria-labelledby\") || n.hasAttribute(\"data-testid\") || n.hasAttribute(\"data-qa\") || n.hasAttribute(\"data-test\") ? 2 : 1;\n}\nfunction at(n, t) {\n  const e = n.tagName.toLowerCase();\n  return !!(te.has(e) || t && W(n) === 1 && ![\n    \"form\",\n    \"main\",\n    \"nav\",\n    \"section\",\n    \"article\",\n    \"footer\",\n    \"header\",\n    \"button\",\n    \"a\",\n    \"input\",\n    \"label\",\n    \"select\",\n    \"textarea\"\n  ].includes(e));\n}\nfunction it(n) {\n  return [...n].sort((t, e) => {\n    const s = W(t);\n    return W(e) - s;\n  });\n}\nfunction ue(n = {}) {\n  const t = performance.now(), {\n    root: e = typeof document < \"u\" ? document.body : void 0,\n    filter: s = \"*\",\n    limit: r = 1 / 0,\n    onProgress: a,\n    progressInterval: i = 100,\n    skipNonSemantic: o = !0,\n    generatorOptions: l = {},\n    cache: u,\n    signal: d\n  } = n;\n  if (!e)\n    throw new Error(\"Root element or document is required\");\n  const c = u ?? Z(), h = { ...l, cache: c };\n  let g;\n  try {\n    e instanceof Document, g = Array.from(e.querySelectorAll(s));\n  } catch {\n    return {\n      results: [],\n      failed: [],\n      stats: {\n        totalElements: 0,\n        successful: 0,\n        failed: 0,\n        skipped: 0,\n        totalTimeMs: 0,\n        avgTimePerElementMs: 0,\n        cacheHitRate: 0\n      }\n    };\n  }\n  const f = g.filter((C) => !at(C, o)), m = it(f).slice(0, r), b = [], y = [];\n  let v = 0;\n  const A = m.length;\n  let S = 0;\n  for (let C = 0; C < m.length && !d?.aborted; C++) {\n    const T = m[C], R = c.getEID(T);\n    if (R)\n      b.push({\n        element: T,\n        eid: R,\n        generationTimeMs: 0\n        // Cached, no generation time\n      });\n    else {\n      const z = performance.now();\n      try {\n        const P = Y(T, h), ot = performance.now() - z;\n        P ? b.push({\n          element: T,\n          eid: P,\n          generationTimeMs: ot\n        }) : v++;\n      } catch (P) {\n        y.push({\n          element: T,\n          error: P instanceof Error ? P.message : String(P)\n        });\n      }\n    }\n    a && C - S >= i && (a(C + 1, A), S = C);\n  }\n  a && a(A, A);\n  const $ = performance.now() - t, M = c.getStats(), H = M.eidHits + M.eidMisses + M.selectorHits + M.selectorMisses, E = M.eidHits + M.selectorHits, x = H > 0 ? E / H : 0;\n  return {\n    results: b,\n    failed: y,\n    stats: {\n      totalElements: A,\n      successful: b.length,\n      failed: y.length,\n      skipped: v,\n      totalTimeMs: $,\n      avgTimePerElementMs: b.length > 0 ? $ / b.length : 0,\n      cacheHitRate: x\n    }\n  };\n}\nfunction de(n, t = {}) {\n  const e = performance.now(), {\n    limit: s = 1 / 0,\n    onProgress: r,\n    progressInterval: a = 100,\n    skipNonSemantic: i = !0,\n    generatorOptions: o = {},\n    cache: l,\n    signal: u\n  } = t, d = l ?? Z(), c = { ...o, cache: d }, h = n.filter((E) => !at(E, i)), f = it(h).slice(0, s), p = [], m = [];\n  let b = 0;\n  const y = f.length;\n  let v = 0;\n  for (let E = 0; E < f.length && !u?.aborted; E++) {\n    const x = f[E], C = d.getEID(x);\n    if (C)\n      p.push({\n        element: x,\n        eid: C,\n        generationTimeMs: 0\n      });\n    else {\n      const T = performance.now();\n      try {\n        const R = Y(x, c), z = performance.now() - T;\n        R ? p.push({\n          element: x,\n          eid: R,\n          generationTimeMs: z\n        }) : b++;\n      } catch (R) {\n        m.push({\n          element: x,\n          error: R instanceof Error ? R.message : String(R)\n        });\n      }\n    }\n    r && E - v >= a && (r(E + 1, y), v = E);\n  }\n  r && r(y, y);\n  const A = performance.now() - e, S = d.getStats(), $ = S.eidHits + S.eidMisses + S.selectorHits + S.selectorMisses, M = S.eidHits + S.selectorHits, H = $ > 0 ? M / $ : 0;\n  return {\n    results: p,\n    failed: m,\n    stats: {\n      totalElements: y,\n      successful: p.length,\n      failed: m.length,\n      skipped: b,\n      totalTimeMs: A,\n      avgTimePerElementMs: p.length > 0 ? A / p.length : 0,\n      cacheHitRate: H\n    }\n  };\n}\nexport {\n  ft as AnchorFinder,\n  jt as ConstraintsEvaluator,\n  st as CssGenerator,\n  ut as DEFAULT_GENERATOR_OPTIONS,\n  dt as DEFAULT_RESOLVER_OPTIONS,\n  Lt as EIDCache,\n  ee as EID_VERSION,\n  Wt as FallbackHandler,\n  se as MAX_PATH_DEPTH,\n  xt as PathBuilder,\n  K as ROLE_ANCHOR_VALUES,\n  X as SEMANTIC_ANCHOR_TAGS,\n  re as SEMANTIC_ATTRIBUTES,\n  lt as SEMANTIC_TAGS,\n  Pt as SemanticExtractor,\n  Ft as SemanticsMatcher,\n  kt as SvgFingerprinter,\n  _t as calculateConfidence,\n  ae as calculateElementScore,\n  Ot as createEIDCache,\n  At as filterClasses,\n  Y as generateEID,\n  ue as generateEIDBatch,\n  de as generateEIDForElements,\n  le as generateSEQL,\n  ne as getClassScore,\n  Z as getGlobalCache,\n  ce as isEID,\n  J as isUtilityClass,\n  Q as normalizeText,\n  Yt as parseSEQL,\n  ie as resetGlobalCache,\n  Bt as resolve,\n  he as resolveSEQL,\n  Zt as stringifySEQL,\n  oe as validateEID\n};\n//# sourceMappingURL=seql-js.js.map\n","import { generateSEQL } from \"@whenessel/seql-js\";\n\n/**\n * Options for building SEQL selectors.\n * These options are passed to generateSEQL from @whenessel/seql-js.\n * @public\n * @remarks\n * See @whenessel/seql-js documentation for available options.\n */\nexport interface SelectorOptions {\n  // Options are passed through to generateSEQL\n  // Type is intentionally loose to allow future SEQL options\n  [key: string]: any;\n}\n\n/**\n * Generates a SEQL selector string for a given DOM element.\n * @public\n * @param element - The DOM element to generate a selector for\n * @param options - Optional configuration for SEQL generation\n * @returns A SEQL selector string, or null if the element cannot be processed\n * @remarks\n * SEQL (Semantic Element Query Language) provides stable element identification\n * that survives DOM restructuring and CSS changes. The selector format is:\n * \"v1: anchor :: path > target[attributes]\"\n */\nexport function buildSelector(\n  element: Element,\n  options: SelectorOptions = {},\n  onError?: (error: Error, element: Element) => void,\n): string | null {\n  if (!element || element.nodeType !== Node.ELEMENT_NODE) {\n    return null;\n  }\n\n  try {\n    const selector = generateSEQL(element, options, options);\n    return selector;\n  } catch (error) {\n    // Log error if callback provided, but still return null for backward compatibility\n    if (onError && error instanceof Error) {\n      onError(error, element);\n    }\n    return null;\n  }\n}\n","export { buildSelector, type SelectorOptions } from \"./selector/selector\";\n\n/**\n * Options used to configure event capture for the tracker.\n * @public\n * @remarks\n * All options are enabled by default for comprehensive tracking.\n */\nexport interface TrackerOptions {\n  send?: (data: Record<string, any>) => void;\n  captureText?: boolean;\n  captureSelector?: boolean;\n  debug?: boolean;\n  seqlOptions?: SelectorOptions;\n  events?: {\n    mouseUp?: boolean;\n    mouseDown?: boolean;\n    click?: boolean;\n    contextMenu?: boolean;\n    dblClick?: boolean;\n    focus?: boolean;\n    blur?: boolean;\n    touchStart?: boolean;\n    touchEnd?: boolean;\n    touchCancel?: boolean;\n    input?: boolean;\n    play?: boolean;\n    pause?: boolean;\n    seeked?: boolean;\n    volumeChange?: boolean;\n    rateChange?: boolean;\n  };\n}\n\nimport { buildSelector, type SelectorOptions } from \"./selector/selector\";\n\nlet handler: ((e: Event) => void) | null = null;\nlet waitForGtagTimer: ReturnType<typeof setInterval> | null = null;\nlet isManuallyInitialized = false;\nconst POLL_INTERVAL = 50;\nconst MAX_WAIT = 5000;\n\nconst isVitest = typeof import.meta !== \"undefined\" && !!(import.meta as any).vitest;\n\nconst DEFAULT_EVENTS = {\n  mouseUp: false,\n  mouseDown: false,\n  click: true,\n  contextMenu: true,\n  dblClick: true,\n  focus: true,\n  blur: true,\n  touchStart: true,\n  touchEnd: true,\n  touchCancel: true,\n  input: true,\n  play: true,\n  pause: true,\n  seeked: true,\n  volumeChange: true,\n  rateChange: true,\n};\n\n/**\n * Initializes the tracker and attaches DOM listeners for various events.\n * @public\n * @param options Capture configuration and a send callback invoked for each event.\n * @returns void\n * @remarks\n * Must be called in a browser-like environment; re-invocation resets existing listeners.\n */\nexport function initTracker(options: TrackerOptions = {}) {\n  // Mark as manually initialized to prevent auto-init from overriding\n  isManuallyInitialized = true;\n\n  const opts = {\n    send: (payload: Record<string, any>) => {\n      console.log(\"Event tracked:\", payload);\n    },\n    captureText: true,\n    captureSelector: true,\n    debug: false,\n    events: { ...DEFAULT_EVENTS, ...options.events },\n    ...options,\n  };\n  console.log(`initTracker: ${JSON.stringify(opts)}`);\n\n  // Remove existing listeners if any\n  if (handler) {\n    Object.keys(DEFAULT_EVENTS).forEach((eventName) => {\n      const mappedEventName =\n        eventName === \"dblClick\"\n          ? \"dblclick\"\n          : eventName === \"volumeChange\"\n            ? \"volumechange\"\n            : eventName === \"rateChange\"\n              ? \"ratechange\"\n              : eventName.toLowerCase();\n\n      document.removeEventListener(mappedEventName, handler as EventListener, { capture: true });\n    });\n  }\n\n  handler = (e: Event) => {\n    const el = e.target as Element | null;\n    if (!el) return;\n\n    // Check if this event type should be tracked\n    const eventKey =\n      e.type === \"dblclick\"\n        ? \"dblClick\"\n        : e.type === \"volumechange\"\n          ? \"volumeChange\"\n          : e.type === \"ratechange\"\n            ? \"rateChange\"\n            : Object.keys(DEFAULT_EVENTS).find((key) => key.toLowerCase() === e.type);\n\n    if (!eventKey || !opts.events[eventKey as keyof typeof DEFAULT_EVENTS]) return;\n\n    const payload: any = {\n      type: e.type,\n      tag: el.tagName.toLowerCase(),\n      ts: Date.now(),\n    };\n\n    if (opts.captureText) {\n      payload.text =\n        el instanceof HTMLInputElement\n          ? el.value\n          : el instanceof HTMLTextAreaElement\n            ? el.value\n            : el.textContent?.trim() || null;\n    }\n\n    if (opts.captureSelector) {\n      const selector = buildSelector(\n        el,\n        opts.seqlOptions,\n        opts.debug\n          ? (error, element) => {\n              console.error(\n                \"[GCE Debug] Error generating selector:\",\n                error.message,\n                \"\\nElement:\",\n                element,\n              );\n            }\n          : undefined,\n      );\n      if (selector) {\n        payload.selector = selector;\n      } else if (opts.debug) {\n        console.warn(\"[GCE Debug] Selector generation returned null for element:\", el);\n      }\n    }\n\n    if (opts.debug) {\n      console.log(\"[GCE Debug] Event captured:\", {\n        eventType: e.type,\n        element: el,\n        payload,\n      });\n    }\n\n    opts.send(payload);\n  };\n\n  // Add listeners for all enabled events\n  // Use capture phase to intercept events before other handlers can modify DOM\n  Object.entries(opts.events).forEach(([eventName, isEnabled]) => {\n    if (!isEnabled) return;\n\n    const mappedEventName =\n      eventName === \"dblClick\"\n        ? \"dblclick\"\n        : eventName === \"volumeChange\"\n          ? \"volumechange\"\n          : eventName === \"rateChange\"\n            ? \"ratechange\"\n            : eventName.toLowerCase();\n\n    document.addEventListener(mappedEventName, handler as EventListener, { capture: true });\n  });\n}\n\n/**\n * Starts a polling loop that waits for `gtag` or `dataLayer` and auto-initializes the tracker.\n * @public\n * @returns void\n * @remarks\n * Designed for browser environments where GA4 or GTM may load asynchronously.\n */\nexport function startAutoInit() {\n  if (typeof window === \"undefined\") return;\n\n  if (waitForGtagTimer) {\n    clearInterval(waitForGtagTimer);\n  }\n\n  let waited = 0;\n\n  waitForGtagTimer = setInterval(() => {\n    if (typeof window === \"undefined\") {\n      clearInterval(waitForGtagTimer!);\n      waitForGtagTimer = null;\n      return;\n    }\n\n    waited += POLL_INTERVAL;\n\n    const gtag = (window as any).gtag;\n    const dataLayer = (window as any).dataLayer;\n\n    const hasDataLayer = Array.isArray(dataLayer) && typeof dataLayer.push === \"function\";\n\n    if (typeof gtag === \"function\" || hasDataLayer) {\n      clearInterval(waitForGtagTimer!);\n      waitForGtagTimer = null;\n\n      // Only auto-initialize if tracker hasn't been initialized manually\n      if (!isManuallyInitialized && !handler) {\n        initTracker({\n          // send events through gtag when it is available\n          send: (payload) => {\n            if (typeof gtag === \"function\") {\n              gtag(\"event\", \"ui_event\", payload);\n            } else {\n              dataLayer.push({\n                event: \"ui_event\",\n                ...payload,\n              });\n            }\n          },\n        });\n      }\n\n      return;\n    }\n\n    if (waited >= MAX_WAIT) {\n      clearInterval(waitForGtagTimer!);\n      waitForGtagTimer = null;\n      console.warn(\"[GCE] gtag did not initialize in time โ tracking disabled\");\n    }\n  }, POLL_INTERVAL);\n}\n\n/**\n * Resets listeners and timers; intended for test environments.\n * @internal\n * @returns void\n * @remarks\n * โ\n */\nexport function _resetTrackerForTests() {\n  if (handler) {\n    Object.keys(DEFAULT_EVENTS).forEach((eventName) => {\n      const mappedEventName =\n        eventName === \"dblClick\"\n          ? \"dblclick\"\n          : eventName === \"volumeChange\"\n            ? \"volumechange\"\n            : eventName === \"rateChange\"\n              ? \"ratechange\"\n              : eventName.toLowerCase();\n\n      document.removeEventListener(mappedEventName, handler as EventListener, { capture: true });\n    });\n    handler = null;\n  }\n\n  if (waitForGtagTimer) {\n    clearInterval(waitForGtagTimer);\n    waitForGtagTimer = null;\n  }\n\n  isManuallyInitialized = false;\n}\n\nif (typeof window !== \"undefined\" && !isVitest) {\n  startAutoInit();\n}\n\nexport default { init: initTracker };\n"],"names":["L","I","ct","X","K","lt","w","B","ut","D","n","G","V","ft","t","e","i","s","a","gt","pt","_","q","St","N","At","J","tt","xt","u","d","c","g","h","p","Q","Ct","Tt","Et","k","wt","vt","$t","Mt","It","Rt","Nt","Dt","Ht","Pt","kt","r","_t","qt","Lt","Ot","O","Z","Y","_a","f","T","m","b","y","zt","v","A","S","$","M","H","E","Ut","x","rt","et","Vt","Qt","Zt","U","Xt","j","le","buildSelector","element","options","onError","generateSEQL","error","handler","waitForGtagTimer","isManuallyInitialized","POLL_INTERVAL","MAX_WAIT","isVitest","_documentCurrentScript","DEFAULT_EVENTS","initTracker","opts","payload","eventName","mappedEventName","el","eventKey","key","selector","isEnabled","startAutoInit","waited","gtag","dataLayer","hasDataLayer","_resetTrackerForTests","index"],"mappings":"sSAAK,MAAsBA,EAAI,CAC7B,OAAQ,GACR,KAAM,GACN,OAAQ,GACR,WAAY,EACd,EAAGC,EAAI,CACL,aAAc,GACd,KAAM,GACN,WAAY,GACZ,UAAW,GACX,YAAa,IACb,wBAAyB,EACzB,qBAAsB,IACtB,eAAgB,EAClB,EAAGC,EAAK,CACN,wBAAyB,EAC3B,EAAGC,EAAI,CACL,OACA,OACA,MACA,UACA,UACA,SACA,QACF,EAAGC,EAAI,CACL,OACA,aACA,OACA,SACA,cACA,gBACA,SACA,QACF,EAAGC,EAAK,CAEN,UACA,QACA,UACA,aACA,SACA,SACA,SACA,OACA,OACA,MACA,UACA,UACA,OAEA,SACA,WACA,WACA,OACA,QACA,QACA,SACA,QACA,WACA,SACA,SACA,WACA,SACA,WAEA,IACA,QACA,QACA,SACA,SACA,OAEA,aACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,MACA,KACA,KACA,KACA,KACA,KACA,KAEA,UACA,MACA,WACA,QACA,QACA,KACA,QACA,KACA,QACA,KAEA,MACA,OACA,SACA,OACA,OACA,WACA,UACA,UACA,IACA,OACA,KACF,EA2BGC,EAAI,CAEL,cAAe,IACf,UAAW,GACX,UAAW,GACX,YAAa,GACb,eAAgB,GAEhB,aAAc,GACd,kBAAmB,GACnB,mBAAoB,GAEpB,KAAM,GACN,KAAM,GAEN,IAAK,GAEL,KAAM,GACN,KAAM,GACN,IAAK,GACL,MAAO,GACP,IAAK,GACL,YAAa,GAEb,SAAU,GAEV,SAAU,EACZ,EAAGC,EAAoB,IAAI,IAAI,CAC7B,KAEA,QAEA,QAEA,QAEA,WAEA,iBACF,CAAC,EAAGC,GAAK,CACP,aAAc,GACd,qBAAsB,GACtB,oBAAqB,GACrB,eAAgB,GAChB,sBAAuB,GACvB,OAAQ,SACV,EAKA,SAASC,EAAEC,EAAG,CACZ,MAAO,CAAC,EAAE,gBAAgB,KAAKA,CAAC,GAAK,0BAA0B,KAAKA,CAAC,GAAK,0BAA0B,KAAKA,CAAC,GAAK,QAAQ,KAAKA,CAAC,GAAK,iBAAiB,KAAKA,CAAC,GAAK,kEAAkE,K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","x_google_ignoreList":[0]}